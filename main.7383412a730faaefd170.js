(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{279:function(e,t,n){},280:function(e,t,n){},295:function(e,t,n){},504:function(e,t,n){"use strict";n.r(t);var r=n(26),i=n.n(r),o=(n(279),n(280),n.p+"ritmo/5c1e47a81453adf261ed135c96684141.png"),a=n.p+"ritmo/88c09b21bb207cab652ca66d4a3d5566.png",s=n.p+"ritmo/16f4868acec3e367a1bc63a529dd065d.png",l=n(0),c=n(23),u=n.n(c),h=n(63),d=n(11),p=n(59),f=n(10),m=Object(f.k)({codePlaySpeed:1,maxCodePlaySpeed:8});m.setCodePlaySpeed=Object(f.d)((function(e){m.codePlaySpeed=e})),m.setMaxCodePlaySpeed=Object(f.d)((function(e){m.maxCodePlaySpeed=e}));var y=Object(f.k)({width:null,height:null,scrollY:0,jsLoaded:!1});y.setAll=Object(f.d)((function(e,t,n,r){y.width=e,y.height=t,y.scrollY=n,y.jsLoaded=r})),y.setScrollY=Object(f.d)((function(e){y.scrollY=e})),y.setWH=Object(f.d)((function(e,t){y.width=e,y.height=t}));var g,b=n(9),v=n.n(b),w=n(248),E=n(249),x=n.n(E),k=n(250),I=n.n(k);function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function T(){return(T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){D(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D(e,t,n){return(t=z(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,z(r.key),r)}}function A(e,t,n){return t&&P(e.prototype,t),n&&P(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function z(e){var t=function(e,t){if("object"!==M(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==M(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===M(t)?t:String(t)}function L(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}function _(e,t){return(_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=H(e);if(t){var i=H(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R(this,n)}}function R(e,t){if(t&&("object"===M(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return U(e)}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Y=function(e){L(n,e);var t=B(n);function n(){return C(this,n),t.apply(this,arguments)}return A(n,[{key:"render",value:function(){return l.createElement(I.a,{transitionName:"cross-fade",transitionEnterTimeout:200,transitionLeaveTimeout:200},this.props.children)}}]),n}(l.Component),W=function(e){L(n,e);var t=B(n);function n(){var e;return C(this,n),D(U(e=t.call(this)),"HIGHLIGHT_TIMEOUT",1500),D(U(e),"removeHighlight",(function(){e.setState({highlight:!1})})),D(U(e),"updateHeight",(function(){var t=e.ref.current.getBoundingClientRect().height;e.setState({height:t})})),e.ref=l.createRef(),e.timeoutId=null,e.state={highlight:!1,key:null},e.resizeReaction=Object(f.l)((function(){return y.width}),(function(){return e.setState({height:void 0})})),e}return A(n,[{key:"render",value:function(){var e=v()("dynamic-p-inner-wrapper",{highlight:this.state.highlight});return l.createElement(Z,null,l.createElement("div",{className:e,ref:this.ref,style:{minHeight:this.state.height}},l.createElement(Y,null,this.props.children)),l.createElement("div",{style:{marginBottom:16}}))}},{key:"componentDidUpdate",value:function(){this.state.highlight&&(null!=this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout(this.removeHighlight,this.HIGHLIGHT_TIMEOUT)),this.updateHeight()}},{key:"componentDidMount",value:function(){this.updateHeight()}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.key,r=l.Children.only(e.children).key;if(n!==r){var i=null==n;return S(S({},t),{},{key:r,highlight:!i})}return null}}]),n}(l.PureComponent),Q=Object(p.a)(g=function(e){L(n,e);var t=B(n);function n(){return C(this,n),t.apply(this,arguments)}return A(n,[{key:"render",value:function(){return l.createElement(F,T({},this.props,{scrollY:y.scrollY}))}}]),n}(l.Component))||g,F=function(e){L(n,e);var t=B(n);function n(){var e;return C(this,n),D(U(e=t.call(this)),"DEBOUNCE_TIMEOUT",500),D(U(e),"updateChildProps",(function(){var t=e.props.childProps;e.setState((function(e){return t!==e.childProps?{childProps:t}:null}))})),e.ref=l.createRef(),e.timeoutId=null,e.state={},e}return A(n,[{key:"render",value:function(){var e=this.state.childProps;return this.props.childFunc(e,this.ref)}},{key:"componentDidUpdate",value:function(){this.updateGeometry(),this.checkDebounceProps()}},{key:"componentDidMount",value:function(){this.updateGeometry(),this.checkDebounceProps()}},{key:"updateGeometry",value:function(){var e=this.ref.current.getBoundingClientRect(),t=e.height,n=window.scrollY+e.top;console.log("DebounceWhenOutOfView updateGeometry top",n),this.setState((function(e){return e.height!==t||e.top!==n?{height:t,top:n}:null}))}},{key:"checkDebounceProps",value:function(){this.timeoutId&&clearTimeout(this.timeoutId),this.props.childProps!==this.state.childProps&&(this.timeoutId=setTimeout(this.updateChildProps,this.DEBOUNCE_TIMEOUT))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n;if(null!=t.height&&null!=t.top){var r=t.top,i=t.top+t.height,o=e.windowHeight,a=e.scrollY;n=a-100<=r&&r<=a+o+100||a-100<=i&&i<=a+o+100}return null==n||null==t.isVisible||n||t.isVisible?{isVisible:n,childProps:e.childProps}:null}}]),n}(l.Component);function V(e){return e.split("\n").map((function(e,t){return[e,l.createElement("br",{key:"br-".concat(t)})]})).flat()}function G(e){var t=e.componentStack,n=e.error;return l.createElement("div",{style:{backgroundColor:"pink"}},l.createElement("h3",{className:"text-danger"},"An error occured. This should not happen. Please file a bug report"," ",l.createElement("a",{href:"https://github.com/eleweek/inside_python_dict"},"on github")," "),l.createElement("p",null,V(n.message)),l.createElement("h6",{className:"text-danger"},"Component stack"),l.createElement("p",null,V(t)))}function Z(e){return l.createElement(w.ErrorBoundary,{onError:function(e,t){console.error("ErrorBoundary caught error\n\n",e,"\n\n\nComponent stack",t)},FallbackComponent:G},e.children)}function K(e){var t=[],n=0;return function(r){var i=n;t.push(r),setTimeout((function(){t.length>0&&i===n&&(e(t[t.length-1]),t=[],n++)}),0)}}var X=function(e){L(n,e);var t=B(n);function n(){var e;C(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return D(U(e=t.call.apply(t,[this].concat(i))),"setterFuncs",{}),e}return A(n,[{key:"setter",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!(e in this.setterFuncs)){var o=K(r?function(n){return t.setState((function(t){var r,i="".concat(e,"IdHack"),o=t[i];return o++,D(r={},e,n),D(r,i,o),r}))}:function(n){return t.setState(D({},e,n))});this.setterFuncs[e]=n?i()(o,50):o}return this.setterFuncs[e]}}]),n}(l.Component);function J(e){var t,n=e.children,r=[],i=[],o=function(){r.length>0&&(i.push(l.createElement("div",{className:"subcontainer",key:"subcontainer-".concat(i.length)},r)),r=[])},a=0,s=function(e){return e.type&&e.type.EXTRA_ERROR_BOUNDARY?l.createElement(Z,{key:e.key||"subcontainerize-eb-".concat(++a)},e):e},c=j(n);try{for(c.s();!(t=c.n()).done;){var u=t.value;"string"!=typeof u.type&&void 0!==u.type&&u.type.FULL_WIDTH?(o(),i.push(s(u))):r.push(s(u))}}catch(e){c.e(e)}finally{c.f()}return o(),i}l.Component;var q,$={TIME_SLIDER_THROTTLE_TIME:50,CODE_SCROLL_DEBOUNCE_TIME:200,THROTTLE_SELECTION_TRANSITIONS:!0,THROTTLE_SELECTION_TIMEOUT:150,MAX_CODE_PLAY_SPEED:8};function ee(){return"undefined"!=typeof window&&q?q:$}function te(e,t,n,r){if(e<0)throw new Error("Negative number");var i=e%100;if(10<=i&&i<=20)return r;if(i%10==1)return t;var o=i%10;return 2<=o&&o<=4?n:r}function ne(e,t){if(t<=e)throw new Error("randInt called with b (".concat(t,") <= a (").concat(e,")"));return e+Math.round(Math.random()*(t-e+1))}function re(e){return e[Math.floor(Math.random()*e.length)]}function ie(){return re(se)}var oe="abcdefghijklmnopqrstuvwxyz";function ae(){return re(oe)+re(oe)+re(oe)}var se=["bash","cat","chmod","cp","date","df","echo","ed","expr","link","ls","mkdir","mv","ps","pwd","rm","rmdir","sh","sleep","test","zsh","alias","apply","at","atrm","awk","batch","bg","bzip2","cd","clear","cmp","curl","cut","diff","dig","du","egrep","env","ex","fg","file","find","grep","grn","gzip","head","iconv","less","make","more","nc","open","sed","sort","ssh","stat","sudo","tail","tar","tee","time","top","tr","uname","uniq","unzip","wc","whois","xxd","yes"],le=n(74),ce=n.n(le),ue=n(3),he=n(514),de=(n(295),n(100)),pe=n.n(de),fe=(n(176),"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiByeD0iNC44IiBmaWxsPSIjMjMzOTQwIiBmaWxsLW9wYWNpdHk9IjAuMDUiLz4KPHBhdGggZD0iTTExLjY4NjUgMTUuOTAyNkwxNy4zODMyIDEwLjIwNjFDMTcuNjU3OSA5LjkzMTQ2IDE4LjEwMzQgOS45MzE0NiAxOC4zNzgxIDEwLjIwNjFMMTkuMDQyNiAxMC44NzA2QzE5LjMxNjkgMTEuMTQ1IDE5LjMxNzIgMTEuNTg5MyAxOS4wNDM3IDExLjg2NDNMMTQuNTI4OCAxNi40TDE5LjA0MzQgMjAuOTM2QzE5LjMxNzIgMjEuMjEwOSAxOS4zMTY2IDIxLjY1NTMgMTkuMDQyMyAyMS45Mjk3TDE4LjM3NzggMjIuNTk0MkMxOC4xMDMxIDIyLjg2ODggMTcuNjU3NiAyMi44Njg4IDE3LjM4MjkgMjIuNTk0MkwxMS42ODY1IDE2Ljg5NzRDMTEuNDExOCAxNi42MjI4IDExLjQxMTggMTYuMTc3MiAxMS42ODY1IDE1LjkwMjZaIiBmaWxsPSIjMjQyNDI0Ii8+Cjwvc3ZnPgo="),me="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiByeD0iNiIgZmlsbD0iIzIzMzk0MCIgZmlsbC1vcGFjaXR5PSIwLjA1Ii8+CjxwYXRoIGQ9Ik0yNi4zNjgyIDE4Ljg2OTZMMTYuOTM5MyAxMy4xNzk2QzE2LjE3MzIgMTIuNzE3NSAxNSAxMy4xNjU5IDE1IDE0LjMwODhWMjUuNjg2MUMxNSAyNi43MTE1IDE2LjA5MDIgMjcuMzI5NCAxNi45MzkzIDI2LjgxNTRMMjYuMzY4MiAyMS4xMjgxQzI3LjIwOTMgMjAuNjIyMyAyNy4yMTE5IDE5LjM3NTQgMjYuMzY4MiAxOC44Njk2WiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==",ye=n.p+"ritmo/f1c72338fb4b3d5d0dfd2a26a902cc1f.gif",ge=n(60),be=n.n(ge),ve=n(76),we=n.n(ve),Ee=n(251),xe=n.n(Ee),ke=n(252),Ie=n.n(ke),Me=n(13),je=n(151),Ne=n.n(je),Te=n(253),Oe=n.n(Te),Se=n(254),De=n.n(Se),Ce=n(255),Pe=n.n(Ce),Ae=n(152),ze=n.n(Ae);function Le(e){return(Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _e(e,t){return(_e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ue(e);if(t){var i=Ue(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Re(this,n)}}function Re(e,t){if(t&&("object"===Le(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ue(e){return(Ue=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function He(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Ye(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Ye(e,t){if(e){if("string"==typeof e)return We(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?We(e,t):void 0}}function We(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Qe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ze(r.key),r)}}function Ve(e,t,n){return t&&Fe(e.prototype,t),n&&Fe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ge(e,t,n){return(t=Ze(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ze(e){var t=function(e,t){if("object"!==Le(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Le(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Le(t)?t:String(t)}function Ke(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("number"==typeof e)t=["int",e];else if("string"==typeof e)t=["string",e];else if(ct(e))t=["none"];else if(ut(e))t=["dummy"];else if(ue.BigNumber.isBigNumber(e))t=["bignumber.js",e.toFixed()];else{if(null!==e||!n)throw new Error("Unknown key: ".concat(JSON.stringify(e)));t=["jsnull",e]}return JSON.stringify(t)}function Xe(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("number"==typeof e||ct(e)||ut(e))return e.toString();if(ue.BigNumber.isBigNumber(e))return e.toFixed();if("string"==typeof e)return t?JSON.stringify(e):e;throw new Error("Unknown key: ".concat(JSON.stringify(e)))}var Je=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;Qe(this,e),Ge(this,"SIZE",64),Ge(this,"JS_NUM_MAX_SIZE",32),this.JS_NUM_MAX_SIZE=32,this.data=[];for(var n=t>=0?0:1,r=0;r<this.JS_NUM_MAX_SIZE;++r){var i=t&1<<r?1:0;this.data.push(i)}for(var o=this.JS_NUM_MAX_SIZE;o<this.SIZE;++o)this.data.push(n)}return Ve(e,[{key:"xor",value:function(e){for(var t=0;t<this.SIZE;++t)this.data[t]^=e.data[t];return this}},{key:"sign",value:function(){return 1==this.data[this.data.length-1]?-1:1}},{key:"inc",value:function(){this.data[0]+=1,this._carryOverAll()}},{key:"eq",value:function(e){for(var t=0;t<this.SIZE;++t)if(this.data[t]!=e.data[t])return!1;return!0}},{key:"add",value:function(e){for(var t=0,n=0;n<this.SIZE;++n)this.data[n]+=e.data[n]+t,t=this.data[n]/2|0,this.data[n]%=2;return this}},{key:"complement",value:function(){for(var e=0;e<this.SIZE;++e)this.data[e]=0==this.data[e]?1:0;return this}},{key:"mul",value:function(e){for(var t=[],n=0;n<this.SIZE;++n)t[n]=0;for(var r=0;r<this.SIZE;++r)if(0!==this.data[r])for(var i=0;i<this.SIZE-r;++i)t[r+i]+=this.data[r]*e.data[i];return this.data=t,this._carryOverAll(),this}},{key:"toNumber",value:function(){for(var e=0,t=0;t<32;++t)this.data[t]&&(e|=1<<t);return e}},{key:"toStringDestroying",value:function(){var e=this.sign();e<0&&this.complement().inc();for(var t=[1],n=[0],r=0;r<this.SIZE;++r){var i=0;if(this.data[r])for(var o=0;o<t.length;++o)o>=n.length&&n.push(0),n[o]+=t[o]+i,i=n[o]/10|0,n[o]%=10;i&&n.push(i),i=0;for(var a=0;a<t.length;++a)t[a]=2*t[a]+i,i=t[a]/10|0,t[a]%=10;i&&t.push(i)}this.data=null;var s=[];e<0&&s.push("-");for(var l=n.length-1;l>=0;l--)s.push(String.fromCharCode("0".charCodeAt(0)+n[l]));return s.join("")}},{key:"_carryOverAll",value:function(){for(var e=0,t=0;t<this.SIZE;++t)this.data[t]+=e,e=this.data[t]/2|0,this.data[t]%=2}}]),e}();function qe(e){for(var t=new Je(e.charCodeAt(0)<<7),n=new Je(1000003),r=0;r<e.length;++r)t.mul(n).xor(new Je(e.charCodeAt(r)));return t.xor(new Je(e.length)),t.eq(new Je(-1))?"-2":t.toStringDestroying()}function $e(e){return qe(e)}function et(e){var t=Object(ue.BigNumber)(2).pow(30),n=t,r=Object(ue.BigNumber)(2).pow(61).minus(1),i=Object(ue.BigNumber)(0),o=1;e.lt(0)&&(o=-1,e=e.negated());for(var a=[];e.gt(0);){var s=e.mod(n);e=e.idiv(n),a.push(s)}var l,c=He(a.reverse());try{for(c.s();!(l=c.n()).done;){var u=l.value;i=i.times(t).plus(u).modulo(r)}}catch(e){c.e(e)}finally{c.f()}return o<0&&(i=i.negated()),i.gte(Object(ue.BigNumber)(2).pow(63))&&(i=Object(ue.BigNumber)(2).pow(64).minus(i)),i.eq(-1)&&(i=Object(ue.BigNumber)(-2)),i}function tt(e){if("string"==typeof e)return Object(ue.BigNumber)($e(e));if("number"==typeof e)return et(Object(ue.BigNumber)(e));if(ue.BigNumber.isBigNumber(e))return et(e);if(ct(e))return Object(ue.BigNumber)(e._hashCode);throw new Error("pyHash called with an object of unknown type: "+JSON.stringify(e))}var nt=function(){function e(){Qe(this,e),this._breakpoints=[],this._extraBpContext=null}return Ve(e,[{key:"addBP",value:function(e){var t={point:e};for(var n in this)if("_"!==n[0]){var r=this[n];void 0!==r&&"function"!=typeof r&&(t[n]=r)}if(this._extraBpContext)for(var i in this._extraBpContext)t[i]=this._extraBpContext[i];this._breakpoints.push(t)}},{key:"setExtraBpContext",value:function(e){this._extraBpContext=e}},{key:"getBreakpoints",value:function(){return this._breakpoints}}]),e}();function rt(e,t){return+e.mod(t).plus(t).mod(t).toString()}var it=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_e(e,t)}(n,e);var t=Be(n);function n(){return Qe(this,n),t.apply(this,arguments)}return Ve(n,[{key:"computeIdx",value:function(e,t){return rt(e,t)}}]),n}(nt),ot=function(){function e(){Qe(this,e)}return Ve(e,[{key:"toString",value:function(){return"DUMMY"}}]),e}(),at=function(){function e(){Qe(this,e),Ge(this,"_hashCode","-9223372036581563745")}return Ve(e,[{key:"toString",value:function(){return"None"}}]),e}(),st=new ot,lt=new at;function ct(e){return e instanceof at}function ut(e){return e instanceof ot}function ht(e,t){return ue.BigNumber.isBigNumber(e)&&(ue.BigNumber.isBigNumber(t)||"number"==typeof t)?e.eq(t):ue.BigNumber.isBigNumber(t)&&"number"==typeof e?t.eq(e):e===t}function dt(e){return(t=e).lt(0)?t.plus(Object(ue.BigNumber)(2).pow(64)):t;var t}function pt(e){return e.idiv(Object(ue.BigNumber)(2).pow(5))}var ft,mt=n(12),yt=n(40),gt=n(257),bt=n(258),vt=n(259),wt=n(260),Et=n(261),xt=n(262),kt=n(75),It=n(5);function Mt(e){return(Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var jt=["idx","status","boxSize","spacingX","spacingY","borderRadius"],Nt=["individualSelectionsProps"],Tt=["kvHack"];function Ot(e){return function(e){if(Array.isArray(e))return Pt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ct(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function St(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||Ct(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Ct(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Ct(e,t){if(e){if("string"==typeof e)return Pt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pt(e,t):void 0}}function Pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function At(){return(At=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function zt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zt(Object(n),!0).forEach((function(t){Bt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _t(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Bt(e,t,n){return(t=Yt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ut(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Yt(r.key),r)}}function Ht(e,t,n){return t&&Ut(e.prototype,t),n&&Ut(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Yt(e){var t=function(e,t){if("object"!==Mt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Mt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Mt(t)?t:String(t)}function Wt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qt(e,t)}function Qt(e,t){return(Qt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ft(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zt(e);if(t){var i=Zt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Vt(this,n)}}function Vt(e,t){if(t&&("object"===Mt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Gt(e)}function Gt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zt(e){return(Zt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kt(e){var t=Ne.a.highlight("python",e).value;return Oe()().use(De.a).stringify({type:"root",children:t})}function Xt(e){return l.createElement("pre",{className:"simple-code-block hl-left pl-2"},l.createElement("code",{dangerouslySetInnerHTML:{__html:Kt(e.children)}}))}Ne.a.registerLanguage("python",Pe.a),mt.b.add(gt.faPlay),mt.b.add(bt.faStepForward),mt.b.add(vt.faStepBackward),mt.b.add(wt.faFastForward),mt.b.add(Et.faFastBackward),mt.b.add(xt.faPause),mt.b.add(kt.faRedoAlt);var Jt={boxGeometry:{boxSize:40,boxPadding:2,spacingX:1,spacingY:5,fontSize:12,borderRadius:10},labelFontSize:16},qt={boxGeometry:{boxSize:50,boxPadding:1,spacingX:10,spacingY:4,fontSize:9,borderRadius:7.5},labelFontSize:12},$t={boxGeometry:{boxSize:56,boxPadding:1,spacingX:10,spacingY:4,fontSize:21,borderRadius:8},labelFontSize:16};function en(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=(r+n)*e;return"translate3d(".concat(o,"px, ").concat(t,"px, ").concat(i,"px)")}function tn(e){return Ke(e,!1)}var nn=function(e){Wt(n,e);var t=Ft(n);function n(){return Rt(this,n),t.apply(this,arguments)}return Ht(n,[{key:"render",value:function(){var e,t=this.props,n=t.extraClassName,r=t.idx,i=t.status,o=t.transitionDuration,a=t.color,s=t.boxSize,c=t.spacingX,u=t.borderRadius,h=this.props.yOffset||0,d=["active-box-selection",n,"active-box-selection-animated"];switch(i){case"removing":e=0;break;case"created":e=.15;break;case"adding":e=1}var p={opacity:e,transitionDuration:"".concat(o,"ms"),borderColor:a,width:s,height:s,borderRadius:u,transform:null!=r?en(r,h,s,c):void 0};return l.createElement("div",{ref:this.props.setInnerRef,className:v()(d),style:p})}}]),n}(l.PureComponent),rn=function(e){Wt(n,e);var t=Ft(n);function n(){var e;Rt(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Bt(Gt(e=t.call.apply(t,[this].concat(i))),"handleRef",(function(t){e.node=t})),Bt(Gt(e),"handleTransitionEnd",(function(t){e.props.onTransitionEnd(e.props.propsId)})),e}return Ht(n,[{key:"render",value:function(){var e=this.props,t=e.idx,n=e.status,r=e.extraClassName,i=e.yOffset,o=e.color,a=e.boxSize,s=e.spacingX,c=e.borderRadius;return l.createElement(nn,{setInnerRef:this.handleRef,extraClassName:r,idx:t,status:n,yOffset:i,color:o,boxSize:a,spacingX:s,borderRadius:c,transitionDuration:this.props.transitionDuration})}},{key:"componentDidUpdate",value:function(){var e=this;this.props.onTransitionEnd&&this.node.addEventListener("transitionend",(function(){return e.handleTransitionEnd(e.props.propsId)}),{once:!0,capture:!1})}}]),n}(l.Component);function on(e){var t=e.idx,n=e.status,r=e.boxSize,i=e.spacingX,o=e.spacingY,a=e.borderRadius,s=_t(e,jt);return l.createElement(an,{idx:t,status:n,individualSelectionsProps:[Lt({key:0},s)],boxSize:r,borderRadius:a,spacingX:i,spacingY:o})}var an=function(e){Wt(n,e);var t=Ft(n);function n(){var e;return Rt(this,n),Bt(Gt(e=t.call(this)),"TRANSITION_DURATION",500),Bt(Gt(e),"handleTransitionEnd",(function(t){t===e.state.epoch&&e.setState((function(e){return e.transitionRunning?{transitionRunning:!1}:null}))})),e.state={transitionRunning:!1,transitionStarting:!1,epoch:0},e}return Ht(n,[{key:"render",value:function(){var e=this,t=ee().THROTTLE_SELECTION_TRANSITIONS,n=this.state,r=n.idx,i=n.status,o=this.props,a=o.individualSelectionsProps,s=_t(o,Nt);return a.map((function(n){return l.createElement(rn,At({},n,s,{idx:r,status:i,transitionDuration:e.TRANSITION_DURATION,propsId:t&&e.state.epoch,onTransitionEnd:t&&e.handleTransitionEnd}))}))}},{key:"componentDidUpdate",value:function(){this.state.transitionRunning&&this.state.transitionStarting&&(this.setState((function(e){return{transitionStarting:!1}})),this.handleStartingTransition())}},{key:"handleStartingTransition",value:function(){var e=this,t=ee().THROTTLE_SELECTION_TIMEOUT;t="number"!=typeof t?this.TRANSITION_DURATION+20:Math.min(this.TRANSITION_DURATION+20,t);var n=this.state.epoch;setTimeout((function(){n===e.state.epoch&&e.handleTransitionEnd(n)}),t)}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(ee().THROTTLE_SELECTION_TRANSITIONS){if(t.transitionRunning||t.idx===e.idx&&t.status===e.status)return null;var n="adding"===t.status&&"adding"===e.status;return{idx:e.idx,status:e.status,transitionRunning:n,transitionStarting:n,epoch:t.epoch+1}}return{idx:e.idx,status:e.status}}}]),n}(l.Component),sn=function(e){Wt(n,e);var t=Ft(n);function n(){return Rt(this,n),t.apply(this,arguments)}return Ht(n,[{key:"shortDisplayedString",value:function(e){var t,n="DUMMY"===e||"EMPTY"===e||""===e||"string"==typeof e&&/^[-+]?[0-9]+$/.test(e),r=n?8:12,i=Xe(e,!1);if(i.length<=r)t=[i];else{var o=n?3:4;t=4===o?[i.substring(0,o),l.createElement("br",{key:"br1"}),"⋯",l.createElement("br",{key:"br2"}),i.substring(i.length-o,i.length)]:[i.substring(0,o),"…",i.substring(i.length-o,i.length)]}return{shortenedValue:t,extraType:n,isEmpty:!1}}},{key:"render",value:function(){var e,t,n,r,i=this.props,o=i.value,a=i.idx,s=i.status,c=(i.extraStyleWhenAdding,i.removedOffset),u=i.createdOffset,h=i.boxSize,d=i.spacingX,p=i.fontSize,f=i.spacingY,m=i.borderRadius,y=i.boxPadding,g=(this.props.yRel||0)*(h+f),b=["box",{"box-animated":"removed"!==s&&"created"!==s}],w=[].concat(b);if(null!=o){var E,x=this.shortDisplayedString(o),k=x.shortenedValue,I=x.extraType,M={fontSize:.75*this.props.fontSize};E=1===k.length&&""===k[0]?l.createElement("span",{className:"box-content-extra-type",style:M},"(empty str)"):I?l.createElement("span",{className:"box-content-extra-type",style:M},"(str)"):null,b.push("box-full"),e=l.createElement("span",{className:"box-content"},k," ",E)}else b.push("box-empty");switch(s){case"removed":r="box-removed";break;case"removing":r="box-removing",t=null!=o?g-(null!=c?c:h):g;break;case"created":r="box-created",t=null!=o?g-(null!=u?u:h):g;break;case"adding":t=g,n=this.props.extraStyleWhenAdding}return b.push(r),w.push(r),l.createElement(l.Fragment,null,l.createElement("div",{style:Lt({transform:"removed"!==s?en(a,t,h,d,0):"translate(0px, 0px)",width:h,height:h,fontSize:p,lineHeight:"".concat(p,"px"),borderRadius:m,padding:y},n),className:v()(b)}),e&&l.createElement("div",{style:Lt({transform:"removed"!==s?en(a,t,h,d,5):"translate(0px, 0px)",width:h,height:h,fontSize:p,lineHeight:"".concat(p,"px"),borderRadius:m,padding:y,marginRight:"10px"},n),className:v()(w,"box-content-wrapper")},e))}}]),n}(l.PureComponent),ln=function(e){Wt(n,e);var t=Ft(n);function n(){return Rt(this,n),t.apply(this,arguments)}return Ht(n,[{key:"render",value:function(){var e=this.props,t=e.extraClassName,n=e.idx,r=e.status,i=e.color,o=e.boxSize,a=e.spacingX,s=e.spacingY,c=e.borderRadius,u=[{key:"".concat(t,"-hashCode"),extraClassName:t,color:i,yOffset:0},{key:"".concat(t,"-key"),extraClassName:t,color:i,yOffset:o+s},{key:"".concat(t,"-value"),extraClassName:t,color:i,yOffset:2*(o+s)}];return l.createElement(an,{individualSelectionsProps:u,idx:n,status:r,boxSize:o,spacingX:a,spacingY:s,borderRadius:c})}}]),n}(l.PureComponent),cn=function(e){Wt(n,e);var t=Ft(n);function n(){return Rt(this,n),t.apply(this,arguments)}return Ht(n,[{key:"render",value:function(){for(var e,t=this.props,n=t.extraClassName,r=t.idx,i=t.status,o=(t.count,t.color),a=t.boxSize,s=t.spacingX,c=t.spacingY,u=t.borderRadius,h=[],d=0;d<this.props.count;++d)h.push({key:"".concat(n,"-").concat(d),extraClassName:n,color:o,yOffset:d*(a+c)});return l.createElement(an,(Bt(e={individualSelectionsProps:h,idx:r,status:i,boxSize:a,spacingX:s,spacingY:c},"spacingY",c),Bt(e,"borderRadius",u),e))}}]),n}(l.PureComponent),un=Object(It.c)({status:null,modId:null,box:null,value:null,group:null,id:null,idx:null,someProps:null}),hn=function(e){Wt(n,e);var t=Ft(n);function n(){var e;return Rt(this,n),Bt(Gt(e=t.call(this)),"updateModIdForGC",(function(t){e.setState((function(e){var n=Math.max(e.gcModId,t);return n>e.gcModId?{gcModId:n}:null}))})),e.state={keyData:null,activeBoxSelection1:null,activeBoxSelection1status:null,activeBoxSelection2:null,activeBoxSelection2status:null,lastIdx:null,lastIdx2:null,needProcessCreatedAfterRender:!1,needReflow:!1,firstRender:!0,modificationId:0,lastBoxId:0,removingValueToGroupToKeyToId:null},e.ref=l.createRef(),e.gcTimeout=null,e}return Ht(n,[{key:"debugLogState",value:function(){n.staticDebugLogState(this.state)}},{key:"render",value:function(){var e=this;if(this.state.needGarbageCollection){var t=this.state.modificationId;setTimeout((function(){return e.updateModIdForGC(t)}),n.ANIMATION_DURATION_TIMEOUT)}var r,i=[],o=Dt(this.state.keyData.keys());try{for(o.s();!(r=o.n()).done;){var a=r.value;i.push(this.state.keyData.get(a).box)}}catch(e){o.e(e)}finally{o.f()}return i.sort((function(e,t){return e.key>t.key?1:e.key<t.key?-1:0})),this.state.activeBoxSelection1&&i.push(this.state.activeBoxSelection1),this.state.activeBoxSelection2&&i.push(this.state.activeBoxSelection2),l.createElement("div",{className:"hash-vis",style:{height:this.props.height},ref:this.ref},i)}},{key:"componentDidUpdate",value:function(){var e=this.ref.current;if(this.state.needReflow&&(!function(e){e?e&&e.scrollTop:console.error("Not reflowing non-existant node!")}(e),this.props.onExpectedWidthChange&&this.props.onExpectedWidthChange(),this.state.needProcessCreatedAfterRender||this.setState({needReflow:!1})),this.state.needProcessCreatedAfterRender){var t=performance.now();this.setState((function(e){var t,n=e.modificationId+1,r={},i=Dt(e.keyData.entries());try{for(i.s();!(t=i.n()).done;){var o=St(t.value,2),a=o[0],s=o[1];"created"===s.status&&(r[a]={status:"adding",box:l.cloneElement(s.box,{status:"adding"}),modId:n})}}catch(e){i.e(e)}finally{i.f()}return{keyData:e.keyData.mergeDeep(r),needProcessCreatedAfterRender:!1,needReflow:!1,modificationId:n}})),console.log("BaseBoxesComponent.componentDidUpdate needProcessCreatedAfterRender==true timing",performance.now()-t)}}}],[{key:"markRemoved",value:function(e,t){var n=0,r={},i=e.gcModId;t&&(i=Math.max(i,t));var o,a=Dt(e.keyData.entries());try{for(a.s();!(o=a.n()).done;){var s=St(o.value,2),c=s[0],u=s[1];"removing"===u.status&&u.modId<=i&&(n++,r[c]={box:l.cloneElement(u.box,{status:"removed"}),status:"removed"})}}catch(e){a.e(e)}finally{a.f()}return n>0?{keyData:e.keyData.mergeDeep(r),needReflow:!0,gcModId:i}:null}},{key:"getDerivedStateFromProps",value:function(e,t){var r=performance.now();if(!t.firstRender){var i=n.markRemoved(t);i&&(t=Lt(Lt({},t),i))}var o=t.modificationId+1,a=t.gcModId,s=e.selectionClass,c=e.boxFactory,u=e.boxGeometry,h=e.boxFontSizeOverride,d=Lt({},u);if(h&&(d.fontSize=h),!t.firstRender&&u!==t.boxGeometry){var p,f={},m=Dt(t.keyData.entries());try{for(m.s();!(p=m.n()).done;){var y=St(p.value,2),g=y[0],b=y[1];f[g]={box:l.cloneElement(b.box,Lt({},d))}}}catch(e){m.e(e)}finally{m.f()}t=Lt(Lt({},t),{},{keyData:t.keyData.mergeDeep(f),boxGeometry:u})}var v,w=e.array,E=w,x=function(){if(dn(w)){performance.now();w=w.toJS()}},k=t.lastBoxId;performance.now();if(t.firstRender){x();for(var I={},M=e.getKeys(w),j=0;j<w.length;++j){var N,T=Dt(c(M[j],w[j]).entries());try{for(T.s();!(N=T.n()).done;){var O=St(N.value,2),S=O[0],D=St(O[1],2),C=D[0],P=D[1],A=P.value,z=(++k).toString(),L=l.createElement(sn,At({idx:j,key:z,status:"adding"},u,P));I[C]=new un({status:"adding",modId:o,box:L,id:z,group:S,value:A,someProps:P})}}catch(e){T.e(e)}finally{T.f()}}v={keyData:new It.b(I),removingValueToGroupToKeyToId:new It.b,firstRender:!1,needProcessCreatedAfterRender:!1,needGarbageCollection:!1,gcModId:-1,modificationId:o,lastBoxId:k,lastNextArray:w,epoch:e.epoch,boxGeometry:u}}else if(E!==t.lastNextArrayPreConversion){x(),w=w||[];var _,B=e.getKeys(w),R=t.removingValueToGroupToKeyToId.asMutable(),U={},H=new Set(Ie()(B)),Y=!1,W=Dt(t.keyData.entries());try{for(W.s();!(_=W.n()).done;){var Q=St(_.value,2),F=Q[0],V=Q[1];if(!H.has(F)){var G=V.status;if("removing"!==G&&"removed"!==G){var Z=V.group,K=V.value,X=l.cloneElement(V.box,{status:"removing"});U[F]={status:"removing",modId:o,box:X},R.setIn([Ke(K,!0),Z,F],{id:V.id,idx:V.idx}),Y=!0}}}}catch(e){W.e(e)}finally{W.f()}for(var J=function(e,t,n,r,i){q=!0,$=!0;var a=(++k).toString(),s=l.createElement(sn,At({idx:t,status:"created",key:a},d,n));U[e]=new un({status:"created",id:a,box:s,modId:o,group:r,value:i,idx:t,someProps:n})},q=!1,$=!1,ee={},te=0;te<w.length;++te){var ne,re=Dt(c(B[te],w[te]).entries());try{for(re.s();!(ne=re.n()).done;){var ie=St(ne.value,2),oe=ie[0],ae=St(ie[1],2),se=ae[0],le=ae[1],ce=le.value,ue=t.keyData.get(se);if(ue){var he=ue.status;if("adding"!==he||ue.idx!==te||ue.someProps.yOffset!==le.yOffset||ue.someProps.yRel!==le.yRel){var de=ue.box,pe="removed"===he?"created":"adding";"created"===pe&&(q=!0,$=!0);var fe=l.cloneElement(de,Lt({idx:te,status:pe},le));U[se]={box:fe,status:pe,modId:o,idx:te,someProps:le},n.notSoDeepDel(R,[Ke(ce,!0),oe,se])}}else null!=ce?ee[se]={value:ce,group:oe,idx:te,someProps:le}:J(se,te,le,oe,ce)}}catch(e){re.e(e)}finally{re.f()}}var me={},ye=[],ge=function(e,r,i,o,a){var s;if(a.size>1){var l,c=Dt(a.entries());try{for(c.s();!(l=c.n()).done;){var u=St(l.value,2),h=u[0];if(u[1].idx===r){s=h;break}}}catch(e){c.e(e)}finally{c.f()}}null==s&&(s=a.keySeq().first()),me[e]=t.keyData.get(s).box,n.notSoDeepDel(R,[Ke(i,!0),o,s]),ye.push(s)};for(var be in ee){var ve=ee[be],we=R.getIn([Ke(ve.value,!0),ve.group]);we&&ge(be,ve.idx,ve.value,ve.group,we)}for(var Ee in ee)if(!(Ee in me)){var xe=ee[Ee],ke=R.get(Ke(xe.value,!0));if(ke){var Me=ke.keySeq().first(),je=ke.get(Me);ge(Ee,xe.idx,xe.value,Me,je)}}for(var Ne in ee){var Te=ee[Ne];if(Ne in me){Te.someProps.value;var Oe=me[Ne],Se=Oe.props.status,De=Oe.key,Ce=Te.idx,Pe="removed"===Se?"created":"adding";"created"===Pe&&(q=!0,$=!0);var Ae=l.cloneElement(Oe,Lt({idx:Ce,status:Pe},Te.someProps));U[Ne]=new un({box:Ae,idx:Ce,id:De,status:Pe,modId:o,group:Te.group,value:Te.value,someProps:Te.someProps})}else J(Ne,Te.idx,Te.someProps,Te.group,Te.value)}var ze=t.keyData.mergeDeep(U);v={keyData:ze=ze.deleteAll(ye),removingValueToGroupToKeyToId:R.asImmutable(),firstRender:!1,needProcessCreatedAfterRender:q,needReflow:$,needGarbageCollection:Y,modificationId:o,gcModId:a,lastBoxId:k,lastNextArrayPreConversion:E,epoch:e.epoch,boxGeometry:u}}if(!t.firstRender&&t.epoch!=e.epoch){var Le=null!=v?v:t,_e=n.garbageCollect(Le,a);_e&&(v=Lt(Lt({},Le),_e))}null==v&&(v=Lt({},t));var Be=t.activeBoxSelection1,Re=t.activeBoxSelection2,Ue=t.activeBoxSelection1status,He=t.activeBoxSelection2status,Ye=function(t,n,r,i,o,a){null==i?o="removing":"created"!==o&&null==i||(o="adding");var c=null!=i?i:r;return t?[l.cloneElement(t,Lt({idx:c,status:o},u)),o]:[l.createElement(s,At({},e.selectionProps,{key:n,keyTemplate:n,extraClassName:n,idx:c,status:o,color:a},u)),o]};if(Be||null!=e.idx){var We=St(Ye(Be,"active-box-selection-1",t.lastIdx,e.idx,Ue,e.selection1color||"#FF4136"),2);Be=We[0],Ue=We[1]}if(Re||null!=e.idx2){var Qe=St(Ye(Re,"active-box-selection-2",t.lastIdx2,e.idx2,He,e.selection2color||"#0074D9"),2);Re=Qe[0],He=Qe[1]}null!=e.idx?v.lastIdx=e.idx:v.lastIdx=t.lastIdx,null!=e.idx2?v.lastIdx2=e.idx2:v.lastIdx2=t.lastIdx2,v.activeBoxSelection1status=Ue,v.activeBoxSelection2status=He,v.activeBoxSelection1=Be,v.activeBoxSelection2=Re;var Fe=performance.now()-r;return"undefined"!=typeof window&&("bbTiming"in window||(window.bbTiming=0),window.bbTiming+=Fe),v}},{key:"notSoDeepDel",value:function(e,t){var n=St(t,3),r=n[0],i=n[1],o=n[2],a=(e=e.deleteIn([r,i,o])).getIn([r,i]);void 0!==a&&0===a.size&&(0===(e=e.deleteIn([r,i])).get(r).size&&(e=e.delete(r)));return e}},{key:"garbageCollect",value:function(e,t){var r,i=performance.now(),o=[],a=e.removingValueToGroupToKeyToId.asMutable(),s=Dt(e.keyData.entries());try{for(s.s();!(r=s.n()).done;){var l=St(r.value,2),c=l[0],u=l[1];if(("removing"===u.status||"removed"===u.status)&&u.modId<=t){o.push(c);var h=u.value,d=u.group;n.notSoDeepDel(a,[Ke(h,!0),d,c])}}}catch(e){s.e(e)}finally{s.f()}var p=null;return o.length>0&&(p={keyData:e.keyData.deleteAll(o),removingValueToGroupToKeyToId:a.asImmutable(),needGarbageCollection:!1}),console.log("Boxes garbageCollect() collected",o.length),p&&console.log("Non-trivial garbageCollect timing",performance.now()-i),p}},{key:"staticDebugLogState",value:function(e){console.log("~~~~~~~~~~~~~~~"),console.log("debugLogState()");for(var t=0,n=Object.entries(e);t<n.length;t++){var r=St(n[t],2),i=r[0],o=r[1];console.log(i,null!=o&&"function"==typeof o.toJS?o.toJS():o),dn(o)&&o.size>200&&console.warn("debugLogState(): ".concat(i," size is too big: ").concat(o.size))}console.log("~~~~~~~~~~~~~~~")}}]),n}(l.PureComponent);function dn(e){return It.a.isList(e)||It.b.isMap(e)}function pn(e,t){var n,r=e,i=Dt(t.split("."));try{for(i.s();!(n=i.n()).done;){var o=n.value;r=dn(r)?r.get(o):r[o]}}catch(e){i.e(e)}finally{i.f()}return r}function fn(e,t){var n,r=null==t?void 0:t.fixedGeometry;return Bt(n=function(t){Wt(i,t);var n=Ft(i);function i(){return Rt(this,i),n.apply(this,arguments)}return Ht(i,[{key:"render",value:function(){return l.createElement(yn,At({lines:e},this.props,{innerRef:this.props.innerRef,fixedGeometry:r}))}}],[{key:"getExpectedHeight",value:function(t,n){return yn._getExpectedHeight(t,n,e,r)}}]),i}(l.PureComponent),"FULL_WIDTH",!0),Bt(n,"EXTRA_ERROR_BOUNDARY",!0),n}function mn(e,t,n){var r,i=!1,o=Dt(n);try{for(o.s();!(r=o.n()).done;){var a=r.value;i=i||a[1][0].maxBoxSizeIsDefault}}catch(e){o.e(e)}finally{o.f()}return e>1e3&&!i?$t:e>800?Jt:qt}Bt(hn,"ANIMATION_DURATION_TIMEOUT",500);var yn=function(e){Wt(n,e);var t=Ft(n);function n(){var e;return Rt(this,n),Bt(Gt(e=t.call(this)),"updateScrollbar",(function(){e.scrollbarRef.current.scrollbar.update()})),e.scrollbarRef=l.createRef(),e}return Ht(n,[{key:"render",value:function(){var e,t,r=this,i=this.props,o=[],a=[],s=!1,c=this.props.fixedGeometry||mn(i.windowWidth,i.windowHeight,this.props.lines),u=c.boxGeometry,h=c.labelFontSize,d=Dt(i.lines.entries());try{var p=function(){var t=St(e.value,2),c=t[0],d=St(t[1],2),p=d[0],f=St(d[1],5),m=f[0],y=f[1],g=f[2],b=f[3],v=f[4],w=l.createElement(p,At({onExpectedWidthChange:r.updateScrollbar,array:pn(i.bp,y),idx:i.bp[g],idx2:i.bp[b],epoch:i.epoch,boxGeometry:u},v)),E=m.marginBottom||n.VIS_MARGIN,x=p.getExpectedGeometry(Lt({boxGeometry:u},v)),k=x.rowMarginBottom,I=x.rowHeight,M=x.height,j=x.rowsNumber;s=s||!m.labels.every((function(e){return null==e})),a=a.concat(m.labels.map((function(e,t){var n=t===m.labels.length-1?E:k,r=j,i=m.labels.length;if(i!=r&&1!=i)throw new Error("Mismatched number of labels");return l.createElement("div",{className:"tetris-label-div",key:e,style:{fontSize:h,height:i===r?I:M,marginBottom:n}},l.createElement("span",{className:"tetris-label"},e||""))}))),o.push(l.createElement("div",{className:"tetris-row",key:"row-".concat(c),style:{marginBottom:E}},l.createElement("div",{className:"hash-vis-wrapper",style:{height:M}},w)))};for(d.s();!(e=d.n()).done;)p()}catch(e){d.e(e)}finally{d.f()}return this.props.compensateTopPadding&&this.props.compensateTopPadding>0&&(t={position:"relative",top:-this.props.compensateTopPadding}),l.createElement(ze.a,{alwaysShowTracks:!0,style:t,ref:this.scrollbarRef},l.createElement("div",{className:"fix-animation",ref:this.props.innerRef,style:{overflowX:this.props.overflow&&"scroll"}},l.createElement("div",{className:"tetris"},s&&l.createElement("div",{className:"tetris-labels"},a),l.createElement("div",{className:"tetris-rows"},o))))}},{key:"componentDidUpdate",value:function(){this.updateScrollbar()}},{key:"componentDidMount",value:function(){this.updateScrollbar()}}],[{key:"_getExpectedHeight",value:function(e,t,n,r){var i=(r||mn(e,0,n)).boxGeometry;return.75*i.boxSize+this.VIS_MARGIN*(n.length-1)+xe()(n.map((function(e){var t=St(e,2),n=t[0],r=St(t[1],5),o=(r[0],r[1],r[2],r[3],r[4]);return n.getExpectedGeometry(Lt({boxGeometry:i},o)).height})))}}]),n}(l.PureComponent);Bt(yn,"VIS_MARGIN",7);var gn=function(e){Wt(n,e);var t=Ft(n);function n(){var e;return Rt(this,n),Bt(Gt(e=t.call(this)),"_highlightLines",Object(Me.a)((function(e){for(var t=[],n=Math.max.apply(Math,Ot(e.map((function(e){var t=St(e,2),n=t[0];t[1];return n.length})))),r=0;r<e.length;++r){var i=e[r][0],o=Kt(we()(i,n));t.push(o)}return t}))),Bt(Gt(e),"updateScroll",(function(){var t=e.getScrollTopTarget(),n=t.scrollTopTarget,r=t.needsUpdating,i=e.ssRef.current.scrollbar;r&&i.scrollTo(i.offset.x,n,500)})),Bt(Gt(e),"updateScrollDebounced",ce()(e.updateScroll,ee().CODE_SCROLL_DEBOUNCE_TIME)),e.ssRef=l.createRef(),e}return Ht(n,[{key:"getCodeWithExplanationHtmlLines",value:function(e,t){performance.now();for(var n,r=this.props.code,i=this._highlightLines(r),o=[],a=!1,s=0;s<r.length;++s){var c=r[s][1],u="",h=c===t.point;if(a|=h,c in e){var d=e[c],p=d.bp,f=d.prevBp,m=null;if("function"==typeof this.props.formatBpDesc)m=this.props.formatBpDesc(p,f);else{var y,g=Dt(this.props.formatBpDesc);try{for(g.s();!(y=g.n()).done;){if(null!=(m=(0,y.value)(p,f)))break}}catch(e){g.e(e)}finally{g.f()}}if(null==m)throw new Error("Unknown bp type: "+c);m&&(u=l.createElement("span",{key:"explanation",className:"code-explanation",dangerouslySetInnerHTML:{__html:"     ".concat(m)}}),n=m)}var b=i[s],w=l.createElement("pre",{className:"code-line-container",key:"pre"},l.createElement("code",null,l.createElement("span",{dangerouslySetInnerHTML:{__html:b}})));o.push(l.createElement("div",{className:v()("line-with-annotation",h&&"current-line-highlight"),key:"line-".concat(s),style:{paddingTop:this.props.lineVerticalPadding,paddingBottom:this.props.lineVerticalPadding,lineHeight:1.15}},w,!this.props.withShortExplanation&&u))}if(!a)throw new Error('No line found corresponding to "'.concat(t.point));return{lines:o,highlightedExplanationContent:n}}},{key:"getVisibleBreakpoints",value:function(e){performance.now();var t,n={},r={},i=Dt(this.props.code);try{for(i.s();!(t=i.n()).done;){var o=St(t.value,3),a=o[0],s=o[1],l=o[2];if(""!==a&&""!==s){if(void 0===l){r=null;break}r[s]=l}}}catch(e){i.e(e)}finally{i.f()}var c,u=null,h=Dt(this.props.breakpoints.entries());try{for(h.s();!(c=h.n()).done;){var d=St(c.value,2),p=d[0],f=d[1];if(p>this.props.time)break;if(null==f.recursionLevel||f.recursionLevel===e.recursionLevel){if(f.point in n){var m=r[f.point];for(var y in n)r[y]>=m&&delete n[y]}n[f.point]={bp:f,prevBp:u},u=f}}}catch(e){h.e(e)}finally{h.f()}return n}},{key:"render",value:function(){var e=this.props.breakpoints[this.props.time],t=this.getVisibleBreakpoints(e),n=this.getCodeWithExplanationHtmlLines(t,e),r=n.lines,i=n.highlightedExplanationContent;return l.createElement(l.Fragment,null,l.createElement(ze.a,{ref:this.ssRef,alwaysShowTracks:!0,className:"code-block-with-annotations-scrollbar-container"},this.props.mobileHeaderTitle&&l.createElement("div",{className:"mobile-header-title"},this.props.mobileHeaderTitle),l.createElement("div",{style:{maxHeight:this.props.height,lineHeight:this.props.lineHeight,overflowX:this.props.overflow&&"scroll",fontSize:this.props.fontSize},className:"code-block-with-annotations fix-animation"},l.createElement("div",{className:"code-block-with-annotations-overlay"},r))),this.props.withShortExplanation&&l.createElement("div",{className:"mobile-short-explanation",dangerouslySetInnerHTML:{__html:i}}))}},{key:"getScrollTopTarget",value:function(){var e,t=this.ssRef.current.scrollbar,n=this.props.code.length,r=0,i=this.props.breakpoints[this.props.time],o=Dt(this.props.code.entries());try{for(o.s();!(e=o.n()).done;){var a=St(e.value,2),s=a[0],l=St(a[1],2);l[0];l[1]===i.point&&(r=s)}}catch(e){o.e(e)}finally{o.f()}if(!t.size)return{scrollTopTarget:null,needsUpdating:!1};var c=t.size.content.height,u=t.scrollTop,h=t.getSize().container.height,d=c/n,p=r/n*c,f=p-h/2;return f<0?f=0:f>c&&(f=c),{scrollTopTarget:f,needsUpdating:p<u+1.2*d||p>u+h-2*d}}},{key:"componentDidUpdate",value:function(){this.updateScrollDebounced()}}]),n}(l.PureComponent),bn=Object(p.a)(ft=function(e){Wt(n,e);var t=Ft(n);function n(){var e;return Rt(this,n),Bt(Gt(e=t.call(this)),"AUTOPLAY_BASE_TIMEOUT",1e3),Bt(Gt(e),"handleSliderValueChange",(function(t){e.stop(),e.handleTimeChange(t)})),Bt(Gt(e),"handleTimeChange",(function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.setState((function(e){return{time:t,autoPlaying:r,userInteracted:e.userInteracted||n}})),e.props.handleTimeChange(t)})),Bt(Gt(e),"prevStep",(function(){if(e.stop(),e.props.time>0){var t=e.props.time-1;e.handleTimeChange(t)}})),Bt(Gt(e),"nextStep",(function(){if(e.stop(),e.props.time<e.props.maxTime){var t=e.props.time+1;e.handleTimeChange(t)}})),Bt(Gt(e),"firstStep",(function(){e.stop(),e.handleTimeChange(0)})),Bt(Gt(e),"lastStep",(function(){e.stop(),e.handleTimeChange(e.props.maxTime)})),Bt(Gt(e),"getAutoplayTimeout",(function(t){return e.AUTOPLAY_BASE_TIMEOUT/(t||m.codePlaySpeed)})),Bt(Gt(e),"autoPlayNextStep",(function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e.state.time<e.props.maxTime){var n=e.state.time+1;n<e.props.maxTime?(e.timeoutId=setTimeout(e.autoPlayNextStep,e.getAutoplayTimeout()),e.timeoutStarted=e.unixtimestamp()):e.timeoutId=null,e.handleTimeChange(n,t,n<e.props.maxTime)}})),Bt(Gt(e),"repeatPlay",(function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e.handleTimeChange(0,t,!0),e.timeoutId=setTimeout(e.autoPlayNextStep,e.getAutoplayTimeout()),e.timeoutStarted=e.unixtimestamp()})),Bt(Gt(e),"autoPlay",(function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e.props.time<e.props.maxTime?e.autoPlayNextStep(t):e.repeatPlay(t)})),Bt(Gt(e),"stop",(function(){null!=e.timeoutId&&(clearTimeout(e.timeoutId),e.timeoutId=null,e.timeoutStarted=null),!e.state.autoPlaying&&e.state.userInteracted||e.setState({autoPlaying:!1,userInteracted:!0})})),Bt(Gt(e),"setSpeed",(function(t){t!==m.speed&&(e.state.autoPlaying&&e.getAutoplayTimeout()-(e.unixtimestamp()-e.timeoutStarted)>e.getAutoplayTimeout(t)&&(clearTimeout(e.timeoutId),e.timeoutId=setTimeout(e.autoPlayNextStep,e.getAutoplayTimeout(t))),m.setCodePlaySpeed(t))})),e.state={time:null,autoPlaying:!1,speed:1,userInteracted:!1},e.timeoutId=null,e.timeoutStarted=null,e}return Ht(n,[{key:"unixtimestamp",value:function(){return(new Date).getTime()}},{key:"componentDidUpdate",value:function(){!this.state.autoPlaying&&this.timeoutId&&this.stop();var e=this.props.autoplayByDefault&&!this.state.userInteracted;!this.state.autoPlaying&&e&&this.autoPlay(!1)}},{key:"componentDidMount",value:function(){this.props.autoplayByDefault&&this.autoPlay(!1)}},{key:"render",value:function(){var e=this,t={};if(this.props.maxTime<25)for(var n=0;n<=this.props.maxTime;++n)t[n]="";var r=this.props.time,i=function(e,t){return l.createElement("button",{key:t,type:"button",className:v()("btn","btn-outline-dark","slider-controls-button"),onClick:e},l.createElement(yt.a,{key:"font-awesome-".concat(t),icon:t}))},o=[];if(o.push(i(this.firstStep,"fast-backward")),o.push(i(this.prevStep,"step-backward")),this.state.autoPlaying)o.push(i(this.stop,"pause"));else{var a=this.props.time===this.props.maxTime?"redo-alt":"play";o.push(i(this.autoPlay,a))}o.push(i(this.nextStep,"step-forward")),o.push(i(this.lastStep,"fast-forward"));for(var s=[],c=[.5,1,2,4,8,16],u=function(){var t=c[h];if(t>m.maxCodePlaySpeed)return"break";var n=t===m.codePlaySpeed,r=0===h?"Autoplay speed ".concat(t,"x"):"".concat(t,"x");s.push(l.createElement("label",{key:r,className:v()("btn","btn-outline-dark",{active:n})},l.createElement("input",{type:"radio",checked:n,onChange:function(){return e.setSpeed(t)}})," ",r))},h=0;h<c.length;++h){if("break"===u())break}return l.createElement(l.Fragment,null,l.createElement("div",{className:"row"},l.createElement("div",{className:"col-sm-12 col-md-12"},l.createElement("div",{className:"btn-toolbar slider-controls"},l.createElement("div",{className:"btn-group btn-group-sm mr-2 mb-1"},o),l.createElement("div",{className:"btn-group btn-group-sm btn-group-toggle mr-2 mb-1"},s)))),l.createElement("div",{className:"row slider-row fix-animation"},l.createElement("div",{className:"col-md-6 col-sm-12"},l.createElement(pe.a,{marks:t,onChange:this.handleSliderValueChange,min:0,max:this.props.maxTime,value:r,dotStyle:{top:-1,height:12,width:12},handleStyle:{height:20,width:20,marginTop:-6},railStyle:{height:10},trackStyle:{height:10}}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.autoPlaying&&e.time===e.maxTime?Lt(Lt({},t),{},{autoPlaying:!1}):null}}]),n}(l.Component))||ft,vn=function(e){Wt(n,e);var t=Ft(n);function n(e){var r;Rt(this,n),Bt(Gt(r=t.call(this,e)),"handleTimeChange",(function(e){var t=e===r.props.breakpoints.length-1;r.setState({time:e,userAdjustedToMax:t})})),r.state={time:e.breakpoints.length-1,userAdjustedToMax:!0,breakpointsUpdatedCounter:0};var o=ee().TIME_SLIDER_THROTTLE_TIME;return r.handleTimeChangeThrottled=null!=o?i()(r.handleTimeChange,ee().TIME_SLIDER_THROTTLE_TIME):r.handleTimeChange,r}return Ht(n,[{key:"render",value:function(){var e=this.props.windowWidth,t=this.props.windowHeight,n=null==t,r=t&&t>450||n,i=this.props.breakpoints[this.state.time];console.log("VC time",this.state.time,i);var o,a=this.props.stateVisualization;if(t){var s=135+(this.props.windowHeight<850?50:0);(o=this.props.windowHeight-a.getExpectedHeight(e,t)-100-s)<225&&(o+=50),o=Math.max(o,r?125:90)}var c=this.props.keepTimeOnNewBreakpoints?this.state.userAdjustedToMax?this.props.breakpoints.length-1:Math.min(this.state.time,this.props.breakpoints.length-1):this.state.time;return l.createElement(Z,null,l.createElement("div",{className:"visualized-code hl-left"},l.createElement(bn,{handleTimeChange:this.handleTimeChangeThrottled,time:c,maxTime:this.props.breakpoints.length-1,autoplayByDefault:this.props.autoplayByDefault}),l.createElement(Q,{childProps:{bp:i,breakpoints:this.props.breakpoints,bpIdx:c,epoch:this.state.breakpointsUpdatedCounter},windowHeight:t,childFunc:function(r,i){return l.createElement(a,At({},r,{innerRef:i,windowWidth:e,windowHeight:t,overflow:n}))}}),this.props.comment,this.props.code&&l.createElement("div",{className:"row code-block-row fix-animation"},l.createElement("div",{className:"col"},l.createElement(gn,{height:o,time:c,code:this.props.code,overflow:n,fontSize:r?12:9,lineHeight:r?1.15:.8,breakpoints:this.props.breakpoints,formatBpDesc:this.props.formatBpDesc})))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.breakpoints!==t.breakpoints?e.keepTimeOnNewBreakpoints?Lt(Lt({},t),{},{breakpoints:e.breakpoints,breakpointsUpdatedCounter:t.breakpointsUpdatedCounter+1}):Lt(Lt({},t),{},{breakpoints:e.breakpoints,time:e.breakpoints.length-1,breakpointsUpdatedCounter:t.breakpointsUpdatedCounter+1}):null}}]),n}(l.Component);Bt(vn,"FULL_WIDTH",!0),Bt(vn,"EXTRA_ERROR_BOUNDARY",!0);l.Component;var wn=function(e){Wt(n,e);var t=Ft(n);function n(){return Rt(this,n),t.apply(this,arguments)}return Ht(n,[{key:"render",value:function(){var e=n.getExpectedGeometry(this.props).height;return l.createElement(hn,At({},this.props,{getKeys:n.getKeys,boxFactory:n.boxFactory,selectionClass:on,height:e}))}}],[{key:"getExpectedGeometry",value:function(e){var t=e.boxGeometry,n=t.boxSize;return{height:n,rowHeight:n,rowMarginBottom:t.spacingY,rowsNumber:1}}},{key:"getKeys",value:function(e){for(var t=[],n=new xn,r=0;r<e.length;++r){var i=e[r];if(null!=i){var o=tn(i),a=n.inc(0,o),s="".concat(o,"-").concat(a);t.push([s])}else t.push(["empty-".concat(r)])}return t}},{key:"boxFactory",value:function(e,t){return[[e[0],{value:t}]]}}]),n}(l.PureComponent),En=function(e){Wt(n,e);var t=Ft(n);function n(){return Rt(this,n),t.apply(this,arguments)}return Ht(n,[{key:"render",value:function(){var e=this.props.boxGeometry.boxSize,t=n.height(e);return l.createElement(hn,At({},this.props,{getKeys:n.getKeys,boxFactory:n.boxFactory,selectionClass:on,height:t}))}}],[{key:"height",value:function(e){return(n.MAX_BOXES-.5)*e}},{key:"getExpectedGeometry",value:function(e){var t=e.boxGeometry,r=t.boxSize,i=t.spacingY;return{height:n.height(r),rowHeight:r,rowMarginBottom:i,rowsNumber:1}}},{key:"getKeys",value:function(e){return e.map((function(e,t){return 0!=e.length?e.slice(0,n.MAX_BOXES).map((function(e){return tn(e)})):["empty-".concat(t)]}))}},{key:"boxFactory",value:function(e,t){return 0!=t.length?t.slice(0,n.MAX_BOXES).map((function(t,n){return[e[n],{value:t,yRel:.7*(n>0?1:0)+n,extraStyleWhenAdding:{opacity:1/Math.pow(2.5,n)},removedOffset:0===n?void 0:0,createdOffset:0===n?void 0:0}]})):[[e[0],{value:null}]]}}]),n}(l.PureComponent);Bt(En,"MAX_BOXES",5);l.PureComponent;var xn=function(){function e(){Rt(this,e),this.counters=[]}return Ht(e,[{key:"inc",value:function(e,t){e===this.counters.length&&this.counters.push(new Map);var n,r=this.counters[e];return r.has(t)?(n=r.get(t),n++,r.set(t,n+1)):(n=0,r.set(t,0)),n}}]),e}(),kn=function(e){Wt(n,e);var t=Ft(n);function n(){return Rt(this,n),t.apply(this,arguments)}return Ht(n,[{key:"render",value:function(){var e=n.getExpectedGeometry(this.props).height,t=this.props,r=t.kvHack,i=_t(t,Tt);return l.createElement(hn,At({},i,{getKeys:r?n.getKeysForKVPairs:n.getKeys,boxFactory:n.boxFactory,selectionClass:cn,selectionProps:{count:this.props.linesCount||1},height:e}))}}],[{key:"getKeys",value:function(e){var t,n=[],r=Dt(e.entries());try{for(r.s();!(t=r.n()).done;){var i=St(t.value,2),o=(i[0],i[1]);Array.isArray(o)||(o=[o]);var a,s=[],l=new xn,c=Dt(o.entries());try{for(c.s();!(a=c.n()).done;){var u=St(a.value,2),h=u[0],d=tn(u[1]),p=l.inc(h,d),f="".concat(d,"-").concat(h,"-").concat(p);s.push(f)}}catch(e){c.e(e)}finally{c.f()}n.push(s)}}catch(e){r.e(e)}finally{r.f()}return n}},{key:"getKeysForKVPairs",value:function(e){for(var t=[],n=new xn,r=0;r<e.length;++r){var i=St(e[r],2),o=i[0],a=i[1],s=tn(o),l=n.inc(0,s),c=tn(a);t.push(["".concat(s,"-").concat(l,"-key"),"".concat(s,"-").concat(l,"-").concat(c,"-value")])}return t}},{key:"boxFactory",value:function(e,t){return 1===e.length?[[e[0],{value:t}]]:be()(e,t).map((function(e,t){var n=St(e,2);return[n[0],{value:n[1],yRel:t}]}))}},{key:"getExpectedGeometry",value:function(e){var t=e.linesCount||1,n=e.boxGeometry,r=n.boxSize,i=n.spacingY;return{height:t*r+(t-1)*i,rowHeight:r,rowMarginBottom:i,rowsNumber:t}}}]),n}(l.PureComponent),In=n(153),Mn=n.n(In),jn=n(263),Nn=n.n(jn);function Tn(e){return(Tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function On(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Sn(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Sn(e,t){if(e){if("string"==typeof e)return Dn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dn(e,t):void 0}}function Dn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Cn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,o=void 0,o=function(e,t){if("object"!==Tn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Tn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===Tn(o)?o:String(o)),r)}var i,o}function Pn(e,t,n){return t&&Cn(e.prototype,t),n&&Cn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function An(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zn(e,t){if(t&&("object"===Tn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ln(e){var t="function"==typeof Map?new Map:void 0;return(Ln=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return _n(e,arguments,Un(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Rn(r,e)})(e)}function _n(e,t,n){return(_n=Bn()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&Rn(i,n.prototype),i}).apply(null,arguments)}function Bn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Rn(e,t){return(Rn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Un(e){return(Un=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Hn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rn(e,t)}(i,e);var t,n,r=(t=i,n=Bn(),function(){var e,r=Un(t);if(n){var i=Un(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return zn(this,e)});function i(e,t){var n;An(this,i);var o="string"==typeof e,a=o?e:e.en;return(n=r.call(this,a)).pos=t,n.text=o?{en:a}:e,n}return Pn(i)}(Ln(Error)),Yn=function(){function e(t){An(this,e),this.s=t,this.pos=0}return Pn(e,[{key:"skipWhitespace",value:function(){for(;this.pos<this.s.length&&/\s/.test(this.s[this.pos]);)this.pos++}},{key:"current",value:function(){return this.s[this.pos]}},{key:"next",value:function(){return this.s[this.pos+1]}},{key:"isWhiteSpaceOrEol",value:function(e){return null==e||/\s/.test(e)}},{key:"isCurrentWhitespaceOrEol",value:function(){return this.isWhiteSpaceOrEol(this.current())}},{key:"consume",value:function(e){var t=this.current();null==t&&this.throwErr("Encountered unexpected EOL, expected ".concat(e),"Неожиданный конец данных, ожидается ".concat(e)),t!==e&&this.throwErr("Expected `".concat(e,"`, got `").concat(t,"`"),"Ожидается `".concat(e,"` вместо `").concat(t,"`")),this.pos++}},{key:"consumeWS",value:function(e){this.skipWhitespace(),this.consume(e)}},{key:"maybeConsume",value:function(e){this.current()===e&&this.consume(e)}},{key:"maybeConsumeWS",value:function(e){this.skipWhitespace(),this.maybeConsume(e)}},{key:"throwErr",value:function(e,t,n){var r=null!=n?n:this.pos;throw(r=Math.min(r,this.s.length-1))<0&&(r=0),new Hn({en:e,ru:t},r)}},{key:"_parseStringOrNumberOrNone",value:function(e,t,n){return this.isNextNone(e)?this._parseNoneOrThrowUnknownIdentifier(e):this._parseStringOrNumber(e,t,n)}},{key:"_parseStringOrNumber",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.skipWhitespace();var r=this.pos,i=this.current();return t&&("{"!==i&&"["!==i||this.throwErr("Nested lists and dictionaries are not supported. Only strings and ints are.","Вложенные списки и словари не поддерживаются"),null==i&&this.throwErr("Dict literal added abruptly - expected value","Неожиданный конец словаря")),"-+0123456789".includes(i)?{res:this.parseNumber(e),startPos:r}:"\"'".includes(i)?{res:this.parseString(),startPos:r}:void this.throwErr("Expected value - string, integer".concat(n?" or None":"",". If you wanted a string, wrap it in quotes"),"Ожидается строка или целое".concat(n?" или None":"",". Строки должны быть в кавычках."))}},{key:"parseDict",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=",:}";this.current();this.consumeWS("{");var n=[];for(this.skipWhitespace();"}"!==this.current();){null==this.current()&&this.throwErr("Dict literal ended abruptly - no closing }","Неожиданный конец словаря, нет закрывающей }");var r=this._parseStringOrNumberOrNone(t).res;this.consumeWS(":");var i=this._parseStringOrNumberOrNone(t).res;n.push([r,i]),this.skipWhitespace(),"}"!==this.current()&&null!=this.current()&&this.consume(",")}return this.consumeWS("}"),null!=e&&n.length<e&&(e>1?this.throwErr("There should be at least ".concat(e," pairs"),"Должно быть не меньше ".concat(e," пар")):this.throwErr("The data cannot be empty","Пустые данные")),n}},{key:"parseList",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=",]";this.current();this.maybeConsumeWS("[");var i=[];for(this.skipWhitespace();"]"!==this.current()&&null!=this.current();){var o=this._parseStringOrNumberOrNone(r),a=o.res,s=o.startPos;if(!e){var l,c=On(i);try{for(c.s();!(l=c.n()).done;){var u=l.value;ht(a,u)&&this.throwErr("Duplicates are not allowed in this list","В списке не должно быть дублированных значений")}}catch(e){c.e(e)}finally{c.f()}}if(n){var h=n(a);h&&this.throwErr(h.en,h.ru,s)}i.push(a),this.skipWhitespace(),"]"!==this.current()&&null!=this.current()&&this.maybeConsume(","),this.skipWhitespace()}return this.maybeConsumeWS("]"),null!=t&&i.length<t&&(t>1?this.throwErr("In this chapter, the list need to have length at least ".concat(t),"Список должен быть длиной не меньше ".concat(t)):this.throwErr("In this chapter, the list cannot be empty","Список не может быть пустым")),i}},{key:"parseNumber",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.skipWhitespace(),null==this.current()&&this.throwErr("Number can't be empty","Число не может быть пустым");for(var t=this.pos;"-+0123456789".includes(this.current());)this.pos++;"."===this.current()&&this.throwErr("Floats are not supported","Флоаты пока не поддерживаются"),"e"===this.current()&&this.throwErr("Floats in scientific notation are not supported","Флоаты пока не поддерживаются");var n="Non-decimal bases are not supported",r="Поддерживаются только числа в десятичной системе счисления";"x"===this.current()&&this.throwErr(n,r),this.isCurrentWhitespaceOrEol()||e&&e.includes(this.current())||this.throwErr("Invalid syntax: number with non-digit characters","В числе должны быть только цифры");var i=this.s.slice(t,this.pos);return"0"===i[0]&&i.length>1&&this.throwErr(n,r),isNaN(+i)&&this.throwErr("Invalid number","Невалидное число",t),Object(ue.BigNumber)(i)}},{key:"parseString",value:function(){this.skipWhitespace();var e=this.current();"'"!==e&&'"'!==e&&this.throwErr("String must be wrapped in quotation characters (either `'` or `\"`)","Строки должны быть в кавычках");var t=e;this.consume(t);this.pos;for(var n=[];null!=this.current()&&this.current()!==t;)"\\"===this.current()?("\\"!==this.next()&&'"'!==this.next()&&this.throwErr('The only supported escape sequences are for \\\\ and \\"',"Такие escape-последовательности не поддерживаются",this.pos+1),n.push(this.next()),this.pos+=2):(n.push(this.current()),this.pos++);return this.consume(t),n.join("")}},{key:"isNextNone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.skipWhitespace(),"None"===this.s.slice(this.pos,this.pos+4)&&(this.isWhiteSpaceOrEol(this.s[this.pos+4])||e.includes(this.s[this.pos+4]))}},{key:"_parseNoneOrThrowUnknownIdentifier",value:function(e){if(this.skipWhitespace(),this.isNextNone(e)){var t=this.pos;return this.pos+=4,{res:lt,startPos:t}}this.throwErr("Unknown identifier (if you wanted a string, wrap it in quotation marks - `\"` or `'`)","Строки должны быть в кавычках")}},{key:"checkTrailingChars",value:function(){this.skipWhitespace(),this.pos<this.s.length&&this.throwErr("Trailing characters","Лишние символы")}}]),e}();function Wn(e,t){var n=t();return e.checkTrailingChars(),n}function Qn(e){var t=new Yn(e);return Wn(t,(function(){return t.parseString()}))}function Fn(e){var t=new Yn(e);return Wn(t,(function(){return t.parseNumber()}))}function Vn(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0,i=new Yn(e);return Wn(i,(function(){return i.parseList(t,n,r)}))}function Gn(e){var t=new Yn(e);return Wn(t,(function(){return t._parseStringOrNumberOrNone(null,!1,!0).res}))}function Zn(e){return ct(e)?"None":ue.BigNumber.isBigNumber(e)?e.toString():JSON.stringify(e)}function Kn(e){var t,n=[],r=On(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n.push(Zn(i))}}catch(e){r.e(e)}finally{r.f()}return"["+n.join(", ")+"]"}var Xn=n(268),Jn=n.n(Xn),qn=n(101),$n=n(512),er=n(513),tr=n(269),nr=["inputComponentRef"],rr=["inputComponentRef","extraValueValidator","allowDuplicates","minSize"],ir=["inputComponentRef"],or=["inputComponentRef"],ar=["inputComponentRef"],sr=["bottomBoundary"];function lr(e){return(lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||ur(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ur(e,t){if(e){if("string"==typeof e)return hr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hr(e,t):void 0}}function hr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function dr(){return(dr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function pr(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function fr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fr(Object(n),!0).forEach((function(t){Mr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,jr(r.key),r)}}function br(e,t,n){return t&&gr(e.prototype,t),n&&gr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function vr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wr(e,t)}function wr(e,t){return(wr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Er(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ir(e);if(t){var i=Ir(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return xr(this,n)}}function xr(e,t){if(t&&("object"===lr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return kr(e)}function kr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ir(e){return(Ir=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mr(e,t,n){return(t=jr(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jr(e){var t=function(e,t){if("object"!==lr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==lr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===lr(t)?t:String(t)}mt.b.add(tr.faUndoAlt),mt.b.add(kt.faRedoAlt);var Nr=function(e){vr(n,e);var t=Er(n);function n(e){var r;return yr(this,n),Mr(kr(r=t.call(this,e)),"handleChange",(function(e){try{var t={valueRaw:e.target.value,lastError:r.state.error||r.state.lastError,error:null,value:r.props.parseValue(e.target.value),valueId:null!=r.props.valueId?r.props.valueId+1:null};r.setState(t),r.props.onChange(t.value,t.valueRaw)}catch(t){r.setState({valueRaw:e.target.value,lastError:t,error:t})}})),r.state={valueRaw:r.props.valueRaw||r.props.dumpValue(r.props.value),value:r.props.value,error:null,lastError:null},r.inputComponentRef=l.createRef(),r.lastScrollLeft=null,r}return br(n,[{key:"forceSetValue",value:function(e){this.setState({valueRaw:this.props.dumpValue(e),value:e,valueId:null!=this.props.valueId?this.props.valueId+1:null})}}]),n}(l.Component),Tr=function(e){vr(n,e);var t=Er(n);function n(){var e;yr(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Mr(kr(e=t.call.apply(t,[this].concat(i))),"handleSelect",(function(){e.inputComponentRef.current.scrollLeft!==e.lastScrollLeft&&e.forceUpdate()})),Mr(kr(e),"measureCharWidth",(function(){for(var t=document.createElement("canvas").getContext("2d"),n="",r=0,i=["font-style","font-variant","font-weight","font-size","font-family"];r<i.length;r++){var o=i[r];n+=window.getComputedStyle(e.inputComponentRef.current,null).getPropertyValue(o)+" "}return t.font=n,t.measureText("qwerty1234567890asdfghzxcb").width/"qwerty1234567890asdfghzxcb".length})),e}return br(n,[{key:"formatErrorMessage",value:function(e){var t=this.inputComponentRef.current,n=t.scrollLeft,r=t.clientWidth,i=this.charWidth,o=Math.ceil(n/i),a=Math.floor((n+r)/i),s=a-o,c=e.message,u=e.pos;this.lastScrollLeft=n;var h=u-o;return o<=u&&u<=a?c.length<h-1?we()(c+" ",h,"-")+"^":c.length+h+5<s?Mn()("",h," ")+"^--- "+c:[Mn()("",h," ")+"^",l.createElement("br",{key:"br-sep"}),c]:u<o?"<--- "+c:we()(c+" ",s-4,"-")+">"}},{key:"render",value:function(){var e;if(this.state.error){var t=this.inputComponentRef.current.offsetWidth-1,n=this.formatErrorMessage(this.state.error);e=l.createElement("div",{className:"invalid-feedback invalid-feedback-block-parsable-input",style:{width:t},key:"error-text"},n)}var r=v()("parsable-input","form-control","form-control-sm",{"is-invalid":!!e}),i=v()("parsable-input-with-error-div","parsable-input-block");return l.createElement("div",{className:i},l.createElement("input",{type:"text",className:r,value:this.state.valueRaw,onChange:this.handleChange,ref:this.inputComponentRef,onSelect:this.handleSelect,key:"input"}),e)}},{key:"componentDidMount",value:function(){this.charWidth=this.measureCharWidth()}}]),n}(Nr),Or=function(e){vr(n,e);var t=Er(n);function n(){var e;yr(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Mr(kr(e=t.call.apply(t,[this].concat(i))),"tryAnotherClick",(function(){var t,n,r=null===(t=e.state.anotherValue)||void 0===t?void 0:t.last;do{n=e.props.anotherValue(e.state,e.setState.bind(kr(e)))}while(n===r||n===e.state.valueRaw);e.setState({anotherValue:{last:n},valueRaw:e.props.dumpValue(n),valueId:e.props.valueId+1,value:n,error:null,lastError:e.state.error||e.state.lastError}),e.props.onChange(n)})),e}return br(n,[{key:"render",value:function(){var e,t;return this.state.error&&(e=this.state.error.message),this.state.lastError&&(t=this.state.lastError.message),l.createElement(Sr,{anotherValue:this.props.anotherValue,tryAnotherClick:this.tryAnotherClick,onChange:this.handleChange,errorText:e,lastErrorText:t,value:this.state.valueRaw})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return null!=e.valueId&&(null==t.valueId||t.valueId<e.valueId)?mr(mr({},t),{},{valueId:e.valueId,value:e.value,valueRaw:e.dumpValue(e.value),lastError:t.error||t.lastError,error:null}):null}}]),n}(Nr),Sr=function(e){vr(n,e);var t=Er(n);function n(){return yr(this,n),t.apply(this,arguments)}return br(n,[{key:"render",value:function(){var e,t=this,n=this.props.errorText,r=this.props.lastErrorText;this.props.anotherValue&&(e=l.createElement("div",{className:"input-group-append",key:"try-another-button-div"},l.createElement("button",{className:"btn btn-secondary",type:"button",onClick:this.props.tryAnotherClick},"Try another")));var i=v()("parsable-input","form-control","form-control-sm","fc-inline",{"mr-0":!!this.props.tryAnotherClick,"is-invalid":!!n}),o=v()("parsable-input-with-error-div","inline-block","parsable-input-inline");return l.createElement("div",{className:o},l.createElement(qn.c,null,l.createElement($n.a,null,(function(n){var r=n.ref;return l.createElement("div",{className:"input-group input-group-sm"},l.createElement("input",{ref:r,type:"text",className:i,value:t.props.value,onChange:t.props.onChange,key:"input"}),e)})),l.createElement(er.a,{placement:"bottom"},(function(e){var t=e.ref,i=e.style,o=e.placement,a=e.arrowProps;return l.createElement("div",{ref:t,style:i,"data-placement":o,className:v()("popover","bs-popover-bottom",n?"show":"hide","fade")},l.createElement("div",{className:"arrow",ref:a.ref,style:a.style}),l.createElement("div",{className:"popover-body"},n||r))}))))}}]),n}(l.Component),Dr=function(e){vr(n,e);var t=Er(n);function n(){return yr(this,n),t.apply(this,arguments)}return br(n,[{key:"render",value:function(){return l.createElement(Jn.a,{minWidth:140,type:"text",className:"parsable-input-autosize",value:this.state.valueRaw,onChange:this.handleChange})}}]),n}(Nr);function Cr(e){var t=e.inputComponentRef,n=pr(e,nr);return e.autogrowing?l.createElement(Dr,dr({ref:t},n)):e.inline?l.createElement(Or,dr({ref:t},n)):l.createElement(Tr,dr({ref:t},n))}function Pr(e){var t=e.inputComponentRef,n=e.extraValueValidator,r=e.allowDuplicates,i=e.minSize,o=pr(e,rr);return l.createElement(Cr,dr({},o,{dumpValue:Kn,parseValue:function(e){return Vn(e,r,i,n)},inputComponentRef:t}))}function Ar(e){return ue.BigNumber.isBigNumber(e)||"number"==typeof e||ct(e)?e.toString():JSON.stringify(e)}function zr(e){var t=e.inputComponentRef,n=pr(e,ir);return l.createElement(Cr,dr({},n,{dumpValue:Ar,parseValue:Fn,inputComponentRef:t}))}function Lr(e){var t=e.inputComponentRef,n=pr(e,or);return l.createElement(Cr,dr({},n,{dumpValue:Ar,parseValue:Qn,inputComponentRef:t}))}function _r(e){var t=e.inputComponentRef,n=pr(e,ar);return l.createElement(Cr,dr({},n,{dumpValue:Ar,parseValue:Gn,inputComponentRef:t}))}var Br=function(e){vr(n,e);var t=Er(n);function n(){var e;return yr(this,n),(e=t.call(this)).wrapperRef=l.createRef(),e.state={height:null},e}return br(n,[{key:"render",value:function(){var e=this.props,t=e.bottomBoundary,n=pr(e,sr),r=(this.props.windowWidth&&this.props.windowWidth,this.props.windowHeight&&this.props.windowHeight>450),i=this.props.windowWidth&&this.props.windowHeight&&1.7*this.props.windowHeight>this.props.windowWidth;return l.createElement("div",{className:"my-sticky-outer-outer-wrapper-this-time-really"},l.createElement("div",{style:{height:this.state.height?this.state.height+10:void 0,paddingBottom:this.state.height?void 0:10}},l.createElement(Nn.a,{innerZ:10,bottomBoundary:t,enabled:r||i},l.createElement("div",{className:"my-sticky-wrapper",ref:this.wrapperRef},l.createElement(Rr,n)))))}},{key:"updateHeight",value:function(){var e=this.wrapperRef.current.offsetHeight;e!==this.state.height&&this.setState({height:e})}},{key:"componentDidMount",value:function(){this.updateHeight()}},{key:"componentDidUpdate",value:function(){this.updateHeight()}}]),n}(l.Component);Mr(Br,"FULL_WIDTH",!0),Mr(Br,"EXTRA_ERROR_BOUNDARY",!0);var Rr=function(e){vr(n,e);var t=Er(n);function n(){var e;return yr(this,n),Mr(kr(e=t.call(this)),"setInputComponentRef",(function(t){e.inputComponentRef=t})),Mr(kr(e),"handleChange",(function(t){e.state.instantUpdates?e._updateStack(t)&&e.props.onChange(t):e.setState({value:t})})),Mr(kr(e),"commitValueIfNecessary",(function(){e.state.value&&e.state.valuesStack.get(e.state.valuesStackIndex)!==e.state.value&&(e._updateStack(e.state.value),e.props.onChange(e.state.value))})),Mr(kr(e),"handleUpdateClick",(function(){e.commitValueIfNecessary()})),Mr(kr(e),"handleIUChange",(function(){e.setState({instantUpdates:!e.state.instantUpdates}),e.commitValueIfNecessary()})),Mr(kr(e),"handleUndoClick",(function(){var t=e.state.valuesStackIndex;if(t>0){t--;var n=e.state.valuesStack.get(t);e.props.onChange(n),e.inputComponentRef.forceSetValue(n),e.setState({valuesStackIndex:t,value:n})}})),Mr(kr(e),"handleRedoClick",(function(){var t=e.state.valuesStackIndex;if(t<e.state.valuesStack.size-1){t++;var n=e.state.valuesStack.get(t);e.props.onChange(n),e.inputComponentRef.forceSetValue(n),e.setState({valuesStackIndex:t,value:n})}})),e.state={valuesStack:new It.a,valuesStackIndex:0,value:null,instantUpdates:!0},e.inputComponentRef=null,e}return br(n,[{key:"hackyPossibleWorkingDeepEqual",value:function(e,t){if(e===t)return!0;if(ue.BigNumber.isBigNumber(e))return e.eq(t);if(Array.isArray(e)&&Array.isArray(t)){if(e.length!=t.length)return!1;var n,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ur(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(be()(e,t));try{for(r.s();!(n=r.n()).done;){var i=cr(n.value,2),o=i[0],a=i[1];if(!this.hackyPossibleWorkingDeepEqual(o,a))return!1}}catch(e){r.e(e)}finally{r.f()}return!0}return!1}},{key:"_updateStack",value:function(e){var t=this.state.valuesStack,n=this.state.valuesStackIndex;return!(!t.isEmpty()&&t.get(n)===e)&&(!this.hackyPossibleWorkingDeepEqual(t.get(n),e)&&(n=(t=t.slice(0,n+1).push(e)).size-1,this.setState({valuesStack:t,valuesStackIndex:n,value:e}),!0))}},{key:"render",value:function(){var e=this.props.input,t=this.state.valuesStack,n=this.state.valuesStackIndex,r=n,i=t.size-n-1,o=null==this.state.value||this.state.value===t.get(n)||this.hackyPossibleWorkingDeepEqual(this.state.value,t.get(n));return l.createElement("div",{className:"row row-block-input-toolbar"},l.createElement("div",{className:"col col-input"},l.createElement(e,dr({},this.props.inputProps,{inputComponentRef:this.setInputComponentRef,value:this.props.initialValue,onChange:this.handleChange}))),l.createElement("div",{className:"col-auto col-buttons"},l.createElement("div",{className:"btn-toolbar"},l.createElement("div",{className:"form-check-inline form-check mr-2"},l.createElement("label",{className:"form-check-label"},l.createElement("input",{type:"checkbox",className:"form-check-input",checked:this.state.instantUpdates,onChange:this.handleIUChange}),"Instant updates")),l.createElement("div",{className:"btn-group btn-group-sm"},l.createElement("button",{type:"button",className:v()("btn","btn-primary",{invisible:this.state.instantUpdates}),onClick:this.handleUpdateClick,disabled:o},"Update")),l.createElement("div",{className:"btn-group btn-group-sm ml-3"},l.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.handleUndoClick,disabled:0===r},l.createElement(yt.a,{icon:"undo-alt"}),l.createElement("span",{className:"input-toolbar-button-label"}," Undo")," ",l.createElement("span",{className:"badge badge-light badge-undo-redo-count"},r)),l.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.handleRedoClick,disabled:0===i},l.createElement(yt.a,{icon:"redo-alt"}),l.createElement("span",{className:"input-toolbar-button-label"}," Redo")," ",l.createElement("span",{className:"badge badge-light badge-undo-redo-count"},i))))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.valuesStack.isEmpty()?{valuesStack:t.valuesStack.push(e.initialValue)}:null}}]),n}(l.Component);function Ur(e){return(Ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hr(Object(n),!0).forEach((function(t){ni(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wr(e){return function(e){if(Array.isArray(e))return Vr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Fr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||Fr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fr(e,t){if(e){if("string"==typeof e)return Vr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vr(e,t):void 0}}function Vr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Gr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ri(r.key),r)}}function Kr(e,t,n){return t&&Zr(e.prototype,t),n&&Zr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Xr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jr(e,t)}function Jr(e,t){return(Jr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function qr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ti(e);if(t){var i=ti(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return $r(this,n)}}function $r(e,t){if(t&&("object"===Ur(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ei(e)}function ei(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ti(e){return(ti=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ni(e,t,n){return(t=ri(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ri(e){var t=function(e,t){if("object"!==Ur(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ur(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ur(t)?t:String(t)}var ii=function(e){Xr(n,e);var t=qr(n);function n(){var e;Gr(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return ni(ei(e=t.call.apply(t,[this].concat(i))),"ERROR_COLOR","rgb(222, 39, 22)"),e}return Kr(n,[{key:"getPattern",value:function(){return"array_int"===this.props.type?"[0-9 ,]*":"int"===this.props.type?"[0-9]*":null}},{key:"render",value:function(){var e;this.state.error&&(e=this.state.error.text&&this.state.error.text.ru?this.state.error.text.ru:this.state.error.message);var t={borderColor:e?this.ERROR_COLOR:"#000"};return"int"!==this.props.type&&"int_str_none"!==this.props.type||(t.width=50),l.createElement("div",{className:"player-input-wrapper"},this.props.label&&l.createElement("span",{className:"player-input-label"},this.props.label),l.createElement("input",{pattern:this.getPattern(),type:"int"===this.props.type?"number":void 0,style:t,className:v()("player-input",e?"player-input-error":null),onChange:this.handleChange,value:this.state.valueRaw}),e&&l.createElement("span",{className:"player-input-comment",style:{color:this.ERROR_COLOR}},e))}}]),n}(Nr);function oi(e){if(!ue.BigNumber.isBigNumber(e)&&"number"!=typeof e)return{en:"Expected an integer",ru:"Допустимы только числа"}}function ai(e,t){return"array_int"===t||"array"===t?Kn(e):"int"===t||"int_str_none"===t?Zn(e):void 0}function si(e,t){return"array_int"===t?Vn(e,!1,1,oi):"array"===t?Vn(e,!0,1):"int"===t?Fn(e):"int_str_none"===t?Gn(e):void 0}var li=function(e){var t=e.text;if(!e.isAi){var n=Object(l.useRef)(null);return Object(l.useEffect)((function(){if(n){!function e(t,n,r){t.length>0&&(n.innerHTML+=t[0],setTimeout((function(){e(t.slice(1),n,r)}),r))}(t,n.current,20)}}),[n]),l.createElement("div",{className:"pre-chat"},l.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiByeD0iNiIgZmlsbD0iIzE5QzM3RCIvPgo8cGF0aCBkPSJNMjMuNzEwNiAxMS40ODM1TDIyLjU3NSAxMi4zNjA0QzIxLjgwNTkgMTEuMzY5OSAyMC42MjU3IDEwLjgyMjcgMTkuMzY2IDEwLjg3ODhDMTcuMjk2IDEwLjk3MDggMTUuNzA4NSAxMi43NjkxIDE1LjcwODUgMTQuODQxVjE5LjIyMjFMMjAuNzM5NyAyMi4xNTQ2TDIwLjI2MDYgMjIuOTc4N0wxNC42NTE1IDE5LjcwNzRDMTQuNDE1NyAxOS41Njk5IDE0LjI3MSAxOS4zMTc5IDE0LjI3MSAxOS4wNDUyVjE0Ljg4MjdDMTQuMjcxIDExLjg4MTIgMTYuNzI4NiA5LjMzNjg0IDE5LjcyODcgOS40NDA4MkMyMS4yOTk5IDkuNDk0OTcgMjIuNzQyNyAxMC4yMzQzIDIzLjcxMDYgMTEuNDgzNVoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0xNS4xNjI3IDEyLjcxMTdMMTUuMzU0NCAxNC4xMzM0QzE0LjExMjQgMTQuMzA0NCAxMy4wNDgyIDE1LjA1MjkgMTIuNDY2OSAxNi4xNzE3QzExLjUxMTUgMTguMDEwMyAxMi4yNzUzIDIwLjI4MzkgMTQuMDY5OCAyMS4zMjA0TDE3Ljg2MzggMjMuNTEwNkwyMi45MTkgMjAuNjE5OEwyMy4zOTM0IDIxLjQ0NjlMMTcuNzU2IDI0LjY2ODhDMTcuNTE5MyAyNC44MDM5IDE3LjIyODQgMjQuODAzNCAxNi45OTIyIDI0LjY2NzRMMTMuMzg3NCAyMi41ODYzQzEwLjc4NzUgMjEuMDg1MSA5LjgxMjg0IDE3LjY4NDUgMTEuNDAyNyAxNS4xMzg2QzEyLjIzNTUgMTMuODA0NiAxMy41OTczIDEyLjkyNTQgMTUuMTYyNyAxMi43MTE3WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTExLjk1MjEgMjAuNzI4MUwxMy4yNzk0IDIxLjI3MjlDMTIuODA2NSAyMi40MzM5IDEyLjkyMjUgMjMuNzMwMSAxMy42MDEgMjQuNzkyOUMxNC43MTU1IDI2LjUzOTQgMTcuMDY2OCAyNy4wMTUyIDE4Ljg2MDggMjUuOTc5M0wyMi42NTQ4IDIzLjc4ODVMMjIuNjc4OCAxNy45NjUyTDIzLjYzMjMgMTcuOTY4MUwyMy42MDQgMjQuNDYxM0MyMy42MDMxIDI0LjczMzkgMjMuNDU2OSAyNC45ODU1IDIzLjIyMDcgMjUuMTIyTDE5LjYxNTkgMjcuMjAzMUMxNy4wMTY1IDI4LjcwMzggMTMuNTg0MiAyNy44NDc1IDEyLjE3NCAyNS4xOTc4QzExLjQzNTYgMjMuODA5NiAxMS4zNTQ2IDIyLjE5MSAxMS45NTIxIDIwLjcyODFaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTcuMjg5NiAyNy41MTY0TDE4LjQyNTIgMjYuNjM5NkMxOS4xOTQyIDI3LjYzIDIwLjM3NDQgMjguMTc3MiAyMS42MzQyIDI4LjEyMTJDMjMuNzA0MiAyOC4wMjkyIDI1LjI5MTYgMjYuMjMwOCAyNS4yOTE2IDI0LjE1ODlWMTkuNzc3OUwyMC4yNjA0IDE2Ljg0NTRMMjAuNzM5NiAxNi4wMjEyTDI2LjM0ODcgMTkuMjkyNUMyNi41ODQ0IDE5LjQzIDI2LjcyOTEgMTkuNjgyMSAyNi43MjkxIDE5Ljk1NDdWMjQuMTE3MkMyNi43MjkxIDI3LjExODcgMjQuMjcxIDI5LjY2MzEgMjEuMjcxNCAyOS41NTk2QzE5LjcwMDIgMjkuNTA1IDE4LjI1NzUgMjguNzY1NiAxNy4yODk2IDI3LjUxNjRaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMjUuODM3NiAyNi4yODgzTDI1LjY0NTkgMjQuODY2NkMyNi44ODc5IDI0LjY5NTYgMjcuOTUyMSAyMy45NDcxIDI4LjUzMzQgMjIuODI4M0MyOS40ODg4IDIwLjk4OTcgMjguNzI1IDE4LjcxNjEgMjYuOTMwNiAxNy42Nzk2TDIzLjEzNjUgMTUuNDg5NEwxOC4wODEzIDE4LjM4MDJMMTcuNjA2OSAxNy41NTMxTDIzLjI0NDMgMTQuMzMxMkMyMy40ODEgMTQuMTk2MSAyMy43NzE5IDE0LjE5NjYgMjQuMDA4MSAxNC4zMzI2TDI3LjYxMjkgMTYuNDEzN0MzMC4yMTI0IDE3LjkxNDQgMzEuMTg3IDIxLjMxNTEgMjkuNTk3MSAyMy44NjE0QzI4Ljc2NDggMjUuMTk1NCAyNy40MDMgMjYuMDc0NiAyNS44Mzc2IDI2LjI4ODNaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMjkuMDQ3OCAxOC4yNzE5TDI3LjcyMDYgMTcuNzI3QzI4LjE5MzUgMTYuNTY2IDI4LjA3NzUgMTUuMjY5OSAyNy4zOTkgMTQuMjA3MUMyNi4yODQ1IDEyLjQ2MDUgMjMuOTMzMiAxMS45ODQ3IDIyLjEzOTIgMTMuMDIwN0wxOC4zNDUyIDE1LjIxMTRMMTguMzIxMiAyMS4wMzQ3TDE3LjM2NzcgMjEuMDMxOUwxNy4zOTU5IDE0LjUzODdDMTcuMzk2OSAxNC4yNjYgMTcuNTQzMSAxNC4wMTQ1IDE3Ljc3OTMgMTMuODc3OUwyMS4zODQxIDExLjc5NjlDMjMuOTgzNSAxMC4yOTYxIDI3LjQxNTggMTEuMTUyNCAyOC44MjYgMTMuODAyMkMyOS41NjQ0IDE1LjE5MDMgMjkuNjQ1NCAxNi44MDkgMjkuMDQ3OCAxOC4yNzE5WiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+Cg==",width:"40",height:"40"}),l.createElement("pre",{ref:n,style:{marginTop:"10px"}}))}return l.createElement("div",{className:"pre-chat",style:{alignItems:"center"}},l.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiByeD0iNiIgZmlsbD0iI0VCRUNFQyIvPgo8cGF0aCBkPSJNMTcuODIwOCAyNi41MjI5QzE3LjgyMDggMjYuMDQyOCAxNy45NzU0IDI1LjYzMTggMTguMjg0NyAyNS4yOUMxOC42MDIxIDI0Ljk0ODIgMTkuMDUzNyAyNC43NzczIDE5LjYzOTYgMjQuNzc3M0MyMC4yMzM3IDI0Ljc3NzMgMjAuNjg1NCAyNC45NDgyIDIwLjk5NDYgMjUuMjlDMjEuMzEyIDI1LjYzMTggMjEuNDcwNyAyNi4wNDI4IDIxLjQ3MDcgMjYuNTIyOUMyMS40NzA3IDI3LjAwMzEgMjEuMzEyIDI3LjQxNDEgMjAuOTk0NiAyNy43NTU5QzIwLjY4NTQgMjguMDg5NSAyMC4yMzM3IDI4LjI1NjMgMTkuNjM5NiAyOC4yNTYzQzE5LjA1MzcgMjguMjU2MyAxOC42MDIxIDI4LjA4OTUgMTguMjg0NyAyNy43NTU5QzE3Ljk3NTQgMjcuNDE0MSAxNy44MjA4IDI3LjAwMzEgMTcuODIwOCAyNi41MjI5Wk0xNC43MDggMTUuMDIzOVYxNC42MzMzQzE0LjcwOCAxMy4xNjg1IDE1LjE5MjIgMTIuMDI5MSAxNi4xNjA2IDExLjIxNTNDMTcuMTM3MiAxMC4zOTM0IDE4LjQxNDkgOS45ODI0MiAxOS45OTM3IDkuOTgyNDJDMjEuNjUzOCA5Ljk4MjQyIDIyLjk2IDEwLjM4NTMgMjMuOTEyMSAxMS4xOTA5QzI0Ljg2NDMgMTEuOTg4NCAyNS4zNDAzIDEzLjAwOTggMjUuMzQwMyAxNC4yNTQ5QzI1LjM0MDMgMTUuMzg2MSAyNS4wNTU1IDE2LjMwNTcgMjQuNDg1OCAxNy4wMTM3QzIzLjkxNjIgMTcuNzIxNyAyMy4yNDA3IDE4LjQwMTIgMjIuNDU5NSAxOS4wNTIyQzIxLjc5MjIgMTkuNjA1NiAyMS4zNDg2IDIwLjE3NTMgMjEuMTI4OSAyMC43NjEyQzIwLjkxNzMgMjEuMzQ3MiAyMC44MTE1IDIxLjk5ODIgMjAuODExNSAyMi43MTQ0VjIyLjg3M0gxOC4zMzM1VjIyLjY4OTlDMTguMzMzNSAyMS42ODA4IDE4LjQ4IDIwLjgxODIgMTguNzcyOSAyMC4xMDIxQzE5LjA2NTkgMTkuMzg1OSAxOS41Nzg2IDE4LjY5NDIgMjAuMzExIDE4LjAyNjlDMjAuOTYyMSAxNy40NDA5IDIxLjQ2NjYgMTYuOTAzOCAyMS44MjQ3IDE2LjQxNTVDMjIuMTkwOSAxNS45MTkxIDIyLjM3NCAxNS4yNTU5IDIyLjM3NCAxNC40MjU4QzIyLjM3NCAxMy42MjAxIDIyLjE3MDYgMTIuOTg1NCAyMS43NjM3IDEyLjUyMTVDMjEuMzY0OSAxMi4wNTc2IDIwLjc3NDkgMTEuODI1NyAxOS45OTM3IDExLjgyNTdDMTkuMjI4NyAxMS44MjU3IDE4LjYyNjUgMTIuMDY5OCAxOC4xODcgMTIuNTU4MUMxNy43NDc2IDEzLjA0NjQgMTcuNTI3OCAxMy43NTg1IDE3LjUyNzggMTQuNjk0M1YxNS4wMjM5SDE0LjcwOFoiIGZpbGw9ImJsYWNrIi8+Cjwvc3ZnPgo=",width:"40",height:"40"}),l.createElement("pre",{children:t}))};function ci(){var e=Object(l.useRef)(null),t=Qr(Object(l.useState)([]),2),n=t[0],r=t[1],i=Qr(Object(l.useState)(""),2),o=i[0],a=i[1],s=Qr(Object(l.useState)(!1),2),c=s[0],u=s[1],h=Object(l.useCallback)((function(e){e.preventDefault(),o.length>10&&(r((function(e){return[].concat(Wr(e),[o])})),u(!0),a(""),Object(he.a)({url:"https://api.openai.com/v1/chat/completions",method:"post",headers:{Authorization:"Bearer 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"},data:{model:"gpt-3.5-turbo",messages:[{role:"user",content:o}]}}).then((function(e){var t=e.data.choices[0].message.content;u(!1),r((function(e){return[].concat(Wr(e),[t])}))})).catch((function(e){console.log(e)})))}),[r,o]),d=Object(l.useCallback)((function(){e.current&&(e.current.open?e.current.close():e.current.showModal())}),[e]);return l.createElement(l.Fragment,null,l.createElement("div",{className:"player-button player-next",onClick:d,children:l.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiByeD0iNiIgZmlsbD0iIzIzMzk0MCIgZmlsbC1vcGFjaXR5PSIwLjA1Ii8+CjxwYXRoIGQ9Ik0xNy4xMTQ0IDI2LjM4NzVIMTcuODczN1YyMC45MDI2SDE3LjExNDRDMTYuNjk1IDIwLjkwMjYgMTYuMzU1IDIwLjU2MjYgMTYuMzU1IDIwLjE0MzJWMTguMzI5NEMxNi4zNTUgMTcuOTEgMTYuNjk1IDE3LjU3IDE3LjExNDQgMTcuNTdIMjEuMzY2OUMyMS43ODYzIDE3LjU3IDIyLjEyNjIgMTcuOTEgMjIuMTI2MiAxOC4zMjk0VjI2LjM4NzVIMjIuODg1NkMyMy4zMDUgMjYuMzg3NSAyMy42NDUgMjYuNzI3NSAyMy42NDUgMjcuMTQ2OVYyOC45NjA3QzIzLjY0NSAyOS4zODAxIDIzLjMwNSAyOS43MjAxIDIyLjg4NTYgMjkuNzIwMUgxNy4xMTQ0QzE2LjY5NSAyOS43MjAxIDE2LjM1NSAyOS4zODAxIDE2LjM1NSAyOC45NjA3VjI3LjE0NjlDMTYuMzU1IDI2LjcyNzUgMTYuNjk1IDI2LjM4NzUgMTcuMTE0NCAyNi4zODc1Wk0yMCAxMC4yOEMxOC40OTAyIDEwLjI4IDE3LjI2NjIgMTEuNTA0IDE3LjI2NjIgMTMuMDEzOEMxNy4yNjYyIDE0LjUyMzYgMTguNDkwMiAxNS43NDc1IDIwIDE1Ljc0NzVDMjEuNTA5OCAxNS43NDc1IDIyLjczMzcgMTQuNTIzNiAyMi43MzM3IDEzLjAxMzhDMjIuNzMzNyAxMS41MDQgMjEuNTA5OCAxMC4yOCAyMCAxMC4yOFoiIGZpbGw9ImJsYWNrIi8+Cjwvc3ZnPgo="})}),l.createElement("dialog",{ref:e,className:"chat-overlay"},l.createElement("form",{onSubmit:h,className:"modal-span"},l.createElement("div",{className:"modal-header"},l.createElement("button",{onClick:d,children:l.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiByeD0iNiIgZmlsbD0iIzIzMzk0MCIgZmlsbC1vcGFjaXR5PSIwLjA1Ii8+CjxwYXRoIGQ9Ik0yMi42NTM2IDIwTDI2LjYzMzcgMTYuMDE5OUMyNy4xMjIxIDE1LjUzMTUgMjcuMTIyMSAxNC43Mzk3IDI2LjYzMzcgMTQuMjUwOUwyNS43NDkxIDEzLjM2NjNDMjUuMjYwNyAxMi44Nzc5IDI0LjQ2ODkgMTIuODc3OSAyMy45ODAxIDEzLjM2NjNMMjAgMTcuMzQ2NEwxNi4wMTk5IDEzLjM2NjNDMTUuNTMxNSAxMi44Nzc5IDE0LjczOTcgMTIuODc3OSAxNC4yNTA5IDEzLjM2NjNMMTMuMzY2MyAxNC4yNTA5QzEyLjg3NzkgMTQuNzM5MyAxMi44Nzc5IDE1LjUzMTEgMTMuMzY2MyAxNi4wMTk5TDE3LjM0NjQgMjBMMTMuMzY2MyAyMy45ODAxQzEyLjg3NzkgMjQuNDY4NSAxMi44Nzc5IDI1LjI2MDMgMTMuMzY2MyAyNS43NDkxTDE0LjI1MDkgMjYuNjMzN0MxNC43MzkzIDI3LjEyMjEgMTUuNTMxNSAyNy4xMjIxIDE2LjAxOTkgMjYuNjMzN0wyMCAyMi42NTM2TDIzLjk4MDEgMjYuNjMzN0MyNC40Njg1IDI3LjEyMjEgMjUuMjYwNyAyNy4xMjIxIDI1Ljc0OTEgMjYuNjMzN0wyNi42MzM3IDI1Ljc0OTFDMjcuMTIyMSAyNS4yNjA3IDI3LjEyMjEgMjQuNDY4OSAyNi42MzM3IDIzLjk4MDFMMjIuNjUzNiAyMFoiIGZpbGw9ImJsYWNrIi8+Cjwvc3ZnPgo=",alt:"X"})})),l.createElement("div",{className:"modal-body"},n.map((function(e,t){return l.createElement(li,{text:e,key:e,isAi:!(t%2)})})),c&&l.createElement("img",{src:ye,alt:"Загрузка",className:"preloader"}),n.length>0?"":l.createElement("div",{className:"message",children:"Спросите ИИ как работает алгоритм"})),l.createElement("div",{className:"modal-footer"},l.createElement("textarea",{placeholder:"Введите ваше сообщение",value:o,onChange:function(e){return a(e.target.value)}}),l.createElement("button",{type:"submit",className:"chat-message-send",disabled:!(o.length>10)},l.createElement("img",{src:me}))))))}var ui=function(e){Xr(n,e);var t=qr(n);function n(e){var r,o;Gr(this,n),ni(ei(o=t.call(this,e)),"SLIDER_MULTIPLIER",1e3),ni(ei(o),"SLIDER_AUTOPLAY_UPDATE_MS",5),ni(ei(o),"SLIDER_AUTOPLAY_BASE_MS",750),ni(ei(o),"MAX_WIDTH",1300),ni(ei(o),"INPUTS_LS_PREFIX","player-v1-1-"),ni(ei(o),"removeHackTransition",ce()((function(){var e=document.getElementsByClassName("rc-slider-track")[0],t=document.getElementsByClassName("rc-slider-handle")[0];e&&t&&performance.now()-o._transitionHackStarted>150&&(e.classList.remove("slider-transition"),t.classList.remove("slider-transition"))}),250)),ni(ei(o),"navigateHome",(function(){o.setState({navigatingHome:!0})})),ni(ei(o),"maxTime",(function(){return o.state.breakpoints.length-1})),ni(ei(o),"handleSliderValueChange",(function(e){o.stop();var t=e/o.SLIDER_MULTIPLIER;o.handleTimeChange(t)})),ni(ei(o),"saveSliderTimeToLS",(function(e){localStorage.setItem(o.props.lessonId+"_time",e.toString())})),ni(ei(o),"handleTimeChange",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=Math.round(e);o.setState((function(){return{time:r,sliderTime:e,autoPlaying:t}}),n),setTimeout(i()((function(){return o.saveSliderTimeToLS(e)}),500),0)})),ni(ei(o),"prevStep",(function(){if(o.stop(),o.state.time>0){var e=o.state.time-1;o.handleTimeChange(e)}})),ni(ei(o),"nextStep",(function(){if(o.stop(),o.state.time<o.maxTime()){var e=o.state.time+1;o.handleTimeChange(e)}})),ni(ei(o),"singleAutoPlayIteration",(function(){o.state.autoPlaying&&(o.timeoutId=setTimeout(o.autoPlay,o.SLIDER_AUTOPLAY_UPDATE_MS))})),ni(ei(o),"autoPlay",(function(){if(o.state.sliderTime<o.maxTime()){var e=1/o.SLIDER_AUTOPLAY_BASE_MS*(performance.now()-(o.lastTimeChange?o.lastTimeChange:performance.now())),t=Math.min(o.maxTime(),o.state.sliderTime+e);t<o.maxTime()?(o.timeoutId&&clearTimeout(o.timeoutId),o.lastTimeChange=performance.now(),o.handleTimeChange(t,!0,o.singleAutoPlayIteration)):(o.resetTimer(),o.handleTimeChange(t,!1))}})),ni(ei(o),"repeatPlay",(function(){o.handleTimeChange(0,!0),o.timeoutId=setTimeout(o.autoPlay,o.SLIDER_AUTOPLAY_UPDATE_MS)})),ni(ei(o),"forceAutoPlay",(function(){o.state.time<o.maxTime()?o.autoPlay():o.repeatPlay()})),ni(ei(o),"toggleAutoPlay",(function(){o.state.autoPlaying?o.stop():o.forceAutoPlay()})),ni(ei(o),"resetTimer",(function(){clearTimeout(o.timeoutId),o.timeoutId=null,o.lastTimeChange=null})),ni(ei(o),"stop",(function(){null!=o.timeoutId&&o.resetTimer(),o.state.autoPlaying&&o.setState({autoPlaying:!1})})),ni(ei(o),"hackTransition",(function(){var e=document.getElementsByClassName("rc-slider-track")[0],t=document.getElementsByClassName("rc-slider-handle")[0];e&&t&&(e.classList.add("slider-transition"),t.classList.add("slider-transition")),o._transitionHackStarted=performance.now()})),ni(ei(o),"handleKeyboard",(function(e){if("INPUT"!==e.target.nodeName){var t=e.keyCode,n=40===t||39===t,r=38===t||37===t,i=32===t;(n||r||i)&&(e.preventDefault(),o.hackTransition(),n?o.nextStep():r?o.prevStep():i&&o.toggleAutoPlay())}})),ni(ei(o),"toggleTheory",(function(){o.state.showingTheory||o.stop(),o.setState({showingTheory:!o.state.showingTheory})})),ni(ei(o),"isMobile",(function(){return o.props.windowWidth<=480}));for(var a=localStorage.getItem(e.lessonId+"_time"),s=o.props.inputs||[],c=e.resetToZero,u=[],h=[],d=[],p=function(e){var t=s[e],n=localStorage.getItem(o.INPUTS_LS_PREFIX+t.id),r=n||t.default;u.push(si(r,t.type)),h.push(r),d.push((function(n,r){if(ai(u[e],t.type)!==ai(n,t.type)){var i,a=Wr(o.state.programInputs);a[e]=n;var s=(i=o.props).getBreakpoints.apply(i,Wr(a)),l=!c&&o.state.time>0?s.length-1:0;o.setState({programInputs:a,breakpoints:s,time:l,sliderTime:l}),o.saveSliderTimeToLS(l),localStorage.setItem(o.INPUTS_LS_PREFIX+t.id,r)}}))},f=0;f<s.length;++f)p(f);o.onInputChangeHandlers=d;var m=(r=o.props).getBreakpoints.apply(r,u),y=Math.min(+a||0,m.length-1);return o.state={time:Math.round(y),sliderTime:y,autoPlaying:!1,showingTheory:!1,navigatingHome:!1,breakpoints:m,programInputs:u,originalRawInputs:h},o.componentRef=l.createRef(),o}return Kr(n,[{key:"unixtimestamp",value:function(){return(new Date).getTime()}},{key:"componentDidUpdate",value:function(){var e=this;setTimeout((function(){return e.removeHackTransition()}),200),!this.state.autoPlaying&&this.timeoutId&&this.stop()}},{key:"render",value:function(){var e=this;if(this.state.navigatingHome)return l.createElement(d.a,{push:!0,to:"/"});var t,n,r,i,o,a,s,c=this.state.breakpoints,u=c.length,p=this.props.stateVisualization,f=this.props,m=f.windowHeight,y=f.windowWidth,g=Math.min(this.MAX_WIDTH,y),b=this.state.time,w=c[b],E=(x?45:35)+16,x=!1;if(m){var k=1.1*p.getExpectedHeight(g,m);n=g-24,this.isMobile()?(x=!0,y-1):Math.max(.3*g,300),m-E-15,E-4,r=this.props.inputs&&!x?7+38*this.props.inputs.length:0,t=this.props.windowHeight-k-E-r}x&&(i={position:"absolute",bottom:0},o={position:"absolute",bottom:80,width:"100%"},a=(a=this.props.mobileHeaderTitle||this.props.playerHeaderTitle).charAt(0).toUpperCase()+a.slice(1),s={paddingBottom:15,paddingTop:20});var I=this.props.inputs;return l.createElement("div",{className:"fluid-body"},l.createElement("div",{className:"player"},l.createElement("div",{className:v()("player-header",!x&&"player-header-desktop"),style:i},l.createElement("div",{style:{display:"flex",alignItems:"center"}},(!this.state.showingTheory||!x)&&l.createElement(h.b,{to:"/",className:"player-title",children:l.createElement("img",{src:fe})}),!x&&l.createElement("div",{className:"player-lesson-name"}," ",this.props.playerHeaderTitle)),(!this.state.showingTheory||!x)&&l.createElement("div",{className:v()("player-buttons",x?"player-buttons-mobile":"")},l.createElement("div",{className:"player-button player-prev",onClick:this.prevStep},l.createElement("img",{src:fe})),l.createElement("div",{className:"player-counters"},l.createElement("span",{children:"Шаг ".concat(b+1," из ").concat(u)})),l.createElement("div",{className:"player-button player-next",onClick:this.nextStep},l.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiByeD0iNC44IiB0cmFuc2Zvcm09Im1hdHJpeCgtMSAwIDAgMSAzMiAwKSIgZmlsbD0iIzIzMzk0MCIgZmlsbC1vcGFjaXR5PSIwLjA1Ii8+CjxwYXRoIGQ9Ik0yMC4zMTM1IDE1LjkwMjZMMTQuNjE2OCAxMC4yMDYxQzE0LjM0MjEgOS45MzE0NiAxMy44OTY2IDkuOTMxNDYgMTMuNjIxOSAxMC4yMDYxTDEyLjk1NzQgMTAuODcwNkMxMi42ODMxIDExLjE0NSAxMi42ODI4IDExLjU4OTMgMTIuOTU2MyAxMS44NjQzTDE3LjQ3MTIgMTYuNEwxMi45NTY2IDIwLjkzNkMxMi42ODI4IDIxLjIxMDkgMTIuNjgzNCAyMS42NTUzIDEyLjk1NzcgMjEuOTI5N0wxMy42MjIyIDIyLjU5NDJDMTMuODk2OSAyMi44Njg4IDE0LjM0MjQgMjIuODY4OCAxNC42MTcxIDIyLjU5NDJMMjAuMzEzNSAxNi44OTc0QzIwLjU4ODIgMTYuNjIyOCAyMC41ODgyIDE2LjE3NzIgMjAuMzEzNSAxNS45MDI2WiIgZmlsbD0iIzI0MjQyNCIvPgo8L3N2Zz4K"})),l.createElement("div",{className:"player-button player-play-button",onClick:this.toggleAutoPlay},l.createElement("img",{src:this.state.autoPlaying?"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxMiAxNCIgZmlsbD0ibm9uZSINCiAgICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNMCAxNEg0VjBIMFYxNFpNOCAwVjE0SDEyVjBIOFoiIGZpbGw9IiMzMjMyMzIiLz4NCjwvc3ZnPg0K":me})),l.createElement(ci,null))),!x&&I&&I.length&&l.createElement("div",{className:"player-inputs-outer"},l.createElement("div",{className:"player-inputs-inner"},I.map((function(t,n){return l.createElement(ii,{value:e.state.programInputs[n],valueRaw:e.state.originalRawInputs[n],key:t.id,label:t.label,type:t.type,onChange:e.onInputChangeHandlers[n],dumpValue:function(e){return ai(e,t.type)},parseValue:function(e){return si(e,t.type)}})})))),l.createElement("div",{className:"player-main"},l.createElement("div",{className:"player-code-and-visualisation",style:{width:n}},l.createElement("div",{className:"player-slider-wrapper"},l.createElement(pe.a,{onChange:this.handleSliderValueChange,min:0,max:this.maxTime()*this.SLIDER_MULTIPLIER,value:this.state.sliderTime*this.SLIDER_MULTIPLIER,style:s,dotStyle:{top:0,height:3,width:3,borderRadius:0,backgroundColor:"white",border:"none"},handleStyle:{height:12,width:12,marginTop:-4.5,backgroundColor:"rgb(255 0 0)",border:"none"},railStyle:{height:2,cursor:"pointer",backgroundColor:"#ad9d95"},trackStyle:{height:2,cursor:"pointer",backgroundColor:"rgb(255 0 0)"},className:v()(x&&"slider-mobile-extra")})),l.createElement(gn,{height:t,time:b,code:this.props.code,overflow:!1,fontSize:15,lineVerticalPadding:2,breakpoints:c,formatBpDesc:this.props.formatBpDesc,withShortExplanation:x,mobileHeaderTitle:a}),l.createElement("div",{className:"player-state-vis-wrapper",style:o},l.createElement("div",{className:"player-state-vis-wrapper-overlay"},l.createElement(p,{bp:w,epoch:this.state.breakpointsUpdatedCounter,innerRef:this.componentRef,windowWidth:y,windowHeight:m,overflow:!1})))))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.autoPlaying&&e.time===t.breakpoints.length-1?Yr(Yr({},t),{},{autoPlaying:!1}):null}}]),n}(l.Component);function hi(e,t,n){return null==e.get(t)?function(e,t){return t>0?"После ".concat(t," ").concat(te(t,"коллизии","коллизий","коллизий"),", пустая ячейка (индекс <code>").concat(e,"</code>) найдена: ").concat(te(t,"коллизия","коллизии","коллизий")," успешно разрешена"):"Ячейка с индексом <code>".concat(e,"</code> пуста: разрешать коллизии не требуется")}(t,n):"[Попытка №".concat(n+1,"] Ячейка с индексом <code>").concat(t,"</code> занята: произошла коллизия")}var di=function(e,t){return null==e.get(t)};function pi(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:di,i=n+1;return r(e,t)?0==n?"[Попытка №".concat(i,"] Ячейка с индексом <code>").concat(t,"</code> пуста, поэтому не входим в цикл"):"[Попытка №".concat(i,"] Ячейка с индексом <code>").concat(t,"</code> пуста, прекращаем цикл"):"[Попытка №".concat(i,"] Ячейка с индексом <code>").concat(t,"</code> занята, проверим ее")}var fi=n(272);function mi(e){return(mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yi(){return(yi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function gi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gi(Object(n),!0).forEach((function(t){vi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vi(e,t,n){return(t=Ni(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||xi(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ei(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=xi(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function xi(e,t){if(e){if("string"==typeof e)return ki(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ki(e,t):void 0}}function ki(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ii(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ni(r.key),r)}}function ji(e,t,n){return t&&Mi(e.prototype,t),n&&Mi(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ni(e){var t=function(e,t){if("object"!==mi(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==mi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===mi(t)?t:String(t)}function Ti(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Oi(e,t)}function Oi(e,t){return(Oi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Si(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Pi(e);if(t){var i=Pi(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Di(this,n)}}function Di(e,t){if(t&&("object"===mi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ci(e)}function Ci(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pi(e){return(Pi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}mt.b.add(fi.faTrashAlt);var Ai=[["def create_new(from_keys):","start-execution",0],["    hash_codes = [EMPTY] * (2 * len(from_keys))","create-new-empty-hashes",1],["    keys = [EMPTY] * (2 * len(from_keys))","create-new-empty-keys",1],["","",-1],["    for key in from_keys:","for-loop",2],["        hash_code = hash(key)","compute-hash",2],["        idx = hash_code % len(keys)","compute-idx",2],["        while hash_codes[idx] is not EMPTY:","check-collision",3],["            if hash_codes[idx] == hash_code and \\","check-dup-hash",3],["               keys[idx] == key:","check-dup-key",3],["                break","check-dup-break",4],["            idx = (idx + 1) % len(keys)","next-idx",3],["","",-1],["        hash_codes[idx], keys[idx] = hash_code, key","assign-elem",2],["","",-1],["    return hash_codes, keys","return-lists",1]];function zi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.25,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.2,i=Math.random();return i<t?re(e):i<t+n?ie():i<t+n+r?Object(ue.BigNumber)(ne(-100,100)):ae()}var Li=function(e){Ti(n,e);var t=Si(n);function n(){return Ii(this,n),t.apply(this,arguments)}return ji(n,[{key:"run",value:function(e,t){this.fromKeys=new It.a(e);var n=t||2*this.fromKeys.size;this.hashCodes=new It.a,this.keys=new It.a;for(var r=0;r<n;++r)this.hashCodes=this.hashCodes.push(null);this.addBP("create-new-empty-hashes");for(var i=0;i<n;++i)this.keys=this.keys.push(null);this.addBP("create-new-empty-keys");var o,a=Ei(this.fromKeys.entries());try{for(a.s();!(o=a.n()).done;){var s=wi(o.value,2);for(this.fromKeysIdx=s[0],this.key=s[1],this.addBP("for-loop"),this.hashCode=tt(this.key),this.addBP("compute-hash"),this.idx=this.computeIdx(this.hashCode,this.keys.size),this.addBP("compute-idx"),this.fmtCollisionCount=0;this.addBP("check-collision"),null!==this.keys.get(this.idx);){if(this.addBP("check-dup-hash"),this.hashCodes.get(this.idx).eq(this.hashCode)&&(this.addBP("check-dup-key"),ht(this.keys.get(this.idx),this.key))){this.addBP("check-dup-break");break}this.fmtCollisionCount+=1,this.idx=(this.idx+1)%this.keys.size,this.addBP("next-idx")}this.hashCodes=this.hashCodes.set(this.idx,this.hashCode),this.keys=this.keys.set(this.idx,this.key),this.addBP("assign-elem")}}catch(e){a.e(e)}finally{a.f()}return this.fromKeysIdx=null,this.key=null,this.addBP("return-lists"),[this.hashCodes,this.keys]}}]),n}(it),_i=fn([[kn,[{labels:["from_keys"],marginBottom:10},"fromKeys","fromKeysIdx",void 0,{selection1color:"#13920b"}]],[wn,[{labels:["keys"],marginBottom:5},"keys","idx"]],[wn,[{labels:["hash_codes"]},"hashCodes","idx"]]]);function Bi(e,t){switch(e.point){case"create-new-empty-hashes":return"Создаем новый массив размером <code>".concat(e.hashCodes.size,"</code> для хеш-кодов");case"create-new-empty-keys":return"Создаем новый массив размером <code>".concat(e.keys.size,"</code> для ключей");case"for-loop":return"[".concat(e.fromKeysIdx+1,"/").concat(e.fromKeys.size,"] Ключ для вставки <code>").concat(Xe(e.key),"</code>");case"compute-hash":return"Вычисляем хеш-код: <code>".concat(e.hashCode,"</code>");case"compute-idx":return"Вычисляем индекс начальной ячейки: <code>".concat(e.idx,"</code> == <code>").concat(e.hashCode," % ").concat(e.keys.size,"</code>");case"check-collision":return hi(e.keys,e.idx,e.fmtCollisionCount);case"check-dup-hash":return ht(e.hashCodes.get(e.idx),e.hashCode)?"<code>".concat(e.hashCodes.get(e.idx)," == ").concat(e.hashCode,"</code>, мы не можем исключить, что ячейка занята тем же ключом"):"<code>".concat(e.hashCodes.get(e.idx)," != ").concat(e.hashCode,"</code>, значит, возникла коллизия с другим ключом");case"check-dup-key":return ht(e.keys[e.idx],e.key)?"<code>".concat(Xe(e.keys.get(e.idx))," == ").concat(Xe(e.key),"</code>, значит, ключ уже в таблице"):"<code>".concat(Xe(e.keys.get(e.idx))," != ").concat(Xe(e.key),"</code>, значит, это коллизия");case"check-dup-break":case"check-dup-return":return"Потому что ключ найден, стоп";case"next-idx":return"Продолжаем, индекс следующего элемента <code>".concat(e.idx,"</code> == <code>(").concat(t.idx," + 1) % ").concat(e.keys.size,"</code>");case"assign-elem":return null===t.keys.get(e.idx)?"Поместим элемент <code>".concat(Xe(e.key),"</code> и его хеш-код <code>").concat(e.hashCode,"</code> в пустую ячейку <code>").concat(e.idx,"</code>"):"<code>".concat(Xe(e.key),"</code> и его хеш-код <code>").concat(e.hashCode,"</code> уже в ячейке, в любом случае перезаписываем");case"return-lists":return"Хеш-таблица создана, возвращаем массивы"}}var Ri=[["def has_key(hash_codes, keys, key):","start-execution",0],["    hash_code = hash(key)","compute-hash",1],["    idx = hash_code % len(keys)","compute-idx",1],["    while hash_codes[idx] is not EMPTY:","check-not-found",2],["        if hash_codes[idx] == hash_code and \\","check-hash",2],["           keys[idx] == key:","check-key",2],["            return True","return-true",3],["        idx = (idx + 1) % len(keys)","next-idx",2],["    return False","return-false",1]];function Ui(e,t){switch(e.point){case"start-execution":return"".concat(e.fmtIsRemove?"Удаляем":"Ищем"," ключ: <code>").concat(e.key,"</code>");case"compute-hash":return"Вычисляем хеш-код: <code>".concat(e.hashCode,"</code>");case"compute-idx":return"Вычисляем индекс начальной ячейки: <code>".concat(e.hashCode," % ").concat(e.keys.size,"</code> == <code>").concat(e.idx,"</code>");case"check-not-found":return pi(e.keys,e.idx,e.fmtCollisionCount);case"check-hash":return e.hashCodes.get(e.idx).eq(e.hashCode)?"<code>".concat(e.hashCodes.get(e.idx)," == ").concat(e.hashCode,"</code>, поэтому ячейка может содержать тот же ключ"):"<code>".concat(e.hashCodes.get(e.idx)," != ").concat(e.hashCode,"</code>, поэтому ячейка определенно содержит другой ключ");case"check-key":return ht(e.keys.get(e.idx),e.key)?"<code>".concat(Xe(e.keys.get(e.idx))," == ").concat(Xe(e.key),"</code>, ключ найден"):"<code>".concat(Xe(e.keys.get(e.idx))," != ").concat(e.key,"</code>, это другой ключ с тем же хеш-кодом");case"assign-dummy":return"Перемещаем в ячейку <code>".concat(e.idx,"</code> с <code>фиктивным</code> объектом");case"return":return"Ключ удален";case"next-idx":return"Продолжаем, индекс следующего элемента <code>".concat(e.idx,"</code> == <code>(").concat(t.idx," + 1) % ").concat(e.keys.size,"</code>");case"throw-key-error":return"Бросаем исключение, потому что ключ не найден";case"return-true":return"Возвращаем значение <code>True</code>";case"return-false":return"Мы попали в пустую ячейку, значит ключ не здесь. Возвращаем значение <code>False</code>"}}var Hi=fn([[wn,[{labels:["keys"],marginBottom:5},"keys","idx"]],[wn,[{labels:["hash_codes"]},"hashCodes","idx"]]]),Yi=fn([[wn,[{labels:["keys"],marginBottom:5},"keys","idx"]],[wn,[{labels:["hash_codes"]},"hashCodes","idx"]]],{fixedGeometry:qt}),Wi=[["def remove(hash_codes, keys, key):","start-execution",0],["    hash_code = hash(key)","compute-hash",1],["    idx = hash_code % len(keys)","compute-idx",1],["","",-1],["    while hash_codes[idx] is not EMPTY:","check-not-found",2],["        if hash_codes[idx] == hash_code and \\","check-hash",2],["           keys[idx] == key:","check-key",2],["            keys[idx] = DUMMY","assign-dummy",2],["            return","return",3],["        idx = (idx + 1) % len(keys)","next-idx",2],["",""],["    raise KeyError()","throw-key-error",1]],Qi=function(e){Ti(n,e);var t=Si(n);function n(){return Ii(this,n),t.apply(this,arguments)}return ji(n,[{key:"run",value:function(e,t,n,r){for(this.fmtIsRemove=r,this.hashCodes=new It.a(e),this.keys=new It.a(t),this.key=n,this.addBP("start-execution"),this.fmtCollisionCount=0,this.hashCode=tt(this.key),this.addBP("compute-hash"),this.idx=this.computeIdx(this.hashCode,this.keys.size),this.addBP("compute-idx");this.addBP("check-not-found"),null!==this.keys.get(this.idx);){if(this.addBP("check-hash"),this.hashCodes.get(this.idx).eq(this.hashCode)&&(this.addBP("check-key"),ht(this.keys.get(this.idx),this.key)))return r?(this.keys=this.keys.set(this.idx,st),this.addBP("assign-dummy"),this.addBP("return"),{hashCodes:this.hashCodes,keys:this.keys,isException:!1,result:null}):(this.addBP("return-true"),{hashCodes:this.hashCodes,keys:this.keys,isException:!1,result:!0});this.fmtCollisionCount+=1,this.idx=(this.idx+1)%this.keys.size,this.addBP("next-idx")}var i,o;return r?(this.addBP("throw-key-error"),o=!0):(this.addBP("return-false"),o=!1,i=!1),{hashCodes:this.hashCodes,keys:this.keys,isException:o,result:i}}}]),n}(it),Fi=[["def resize(hash_codes, keys):","start-execution",0],["    new_hash_codes = [EMPTY] * (2 * len(hash_codes))","create-new-empty-hashes",1],["    new_keys = [EMPTY] * (2 * len(keys))","create-new-empty-keys",1],["    for hash_code, key in zip(hash_codes, keys):","for-loop",2],["        if key is EMPTY or key is DUMMY:","check-skip-empty-dummy",2],["            continue","continue",3],["        idx = hash_code % len(new_keys)","compute-idx",2],["        while new_hash_codes[idx] is not EMPTY:","check-collision",3],["            idx = (idx + 1) % len(new_keys)","next-idx",3],["        new_hash_codes[idx], new_keys[idx] = hash_code, key","assign-elem",2],["",""],["    return new_hash_codes, new_keys","return-lists",1]],Vi=function(e){Ti(n,e);var t=Si(n);function n(){return Ii(this,n),t.apply(this,arguments)}return ji(n,[{key:"run",value:function(e,t){this.hashCodes=e,this.keys=t,this.newHashCodes=new It.a,this.newKeys=new It.a;for(var n=0;n<2*this.hashCodes.size;++n)this.newHashCodes=this.newHashCodes.push(null);this.addBP("create-new-empty-hashes");for(var r=0;r<2*this.hashCodes.size;++r)this.newKeys=this.newKeys.push(null);this.addBP("create-new-empty-keys");var i,o=Ei(this.hashCodes.zip(this.keys).entries());try{for(o.s();!(i=o.n()).done;){var a=wi(i.value,2);this.oldIdx=a[0];var s=wi(a[1],2);if(this.hashCode=s[0],this.key=s[1],this.addBP("for-loop"),this.addBP("check-skip-empty-dummy"),null!==this.key&&this.key!==st){for(this.fmtCollisionCount=0,this.idx=this.computeIdx(this.hashCode,this.newKeys.size),this.addBP("compute-idx");this.addBP("check-collision"),null!==this.newKeys.get(this.idx);)this.fmtCollisionCount+=1,this.idx=(this.idx+1)%this.newKeys.size,this.addBP("next-idx");this.newHashCodes=this.newHashCodes.set(this.idx,this.hashCode),this.newKeys=this.newKeys.set(this.idx,this.key),this.addBP("assign-elem")}else this.addBP("continue")}}catch(e){o.e(e)}finally{o.f()}return this.addBP("return-lists"),[this.newHashCodes,this.newKeys]}}]),n}(it);function Gi(e,t){switch(e.point){case"create-new-empty-hashes":return"Создаем новый массив размером <code>".concat(e.newHashCodes.size,"</code> для хеш-кодов");case"create-new-empty-keys":return"Создаем новый массив размером <code>".concat(e.newKeys.size,"</code> для ключей");case"for-loop":return"[".concat(e.oldIdx+1,"/").concat(e.keys.size,"] Ключ для вставки <code>").concat(null===e.key?"EMPTY":e.key,"</code>, хеш-код <code>").concat(null===e.hashCode?"EMPTY":e.hashCode,"</code>");case"compute-idx":return"Вычисляем индекс начальной ячейки: <code>".concat(e.idx," == ").concat(e.hashCode," % ").concat(e.newKeys.size,"</code>");case"check-skip-empty-dummy":return null===e.keys.get(e.oldIdx)?"Текущяя ячейка пуста":e.keys.get(e.oldIdx)===st?"Текущая ячейка содержит <code>DUMMY</code>-плейсхолдер":"Текущая ячейка занята реально существующим ключом";case"continue":return"Пропустим ее";case"check-collision":return hi(e.newKeys,e.idx,e.fmtCollisionCount);case"next-idx":return"Продолжаем, индекс следующего элемента <code>".concat(e.idx,"</code> == <code>(").concat(t.idx," + 1) % ").concat(e.keys.size,"</code>");case"assign-elem":return"Поместим <code>".concat(Xe(e.key),"</code> и его хеш-код <code>").concat(e.hashCode,"</code> в пустую ячейку ").concat(e.idx);case"return-lists":return"Хеш-таблица была перестроена, вернем массивы"}}var Zi=fn([[wn,[{labels:["keys"],marginBottom:5},"keys","oldIdx",void 0,{selection1color:"#13920b"}]],[wn,[{labels:["hash_codes"],marginBottom:10,maxBoxSizeIsDefault:!0},"hashCodes","oldIdx",void 0,{selection1color:"#13920b"}]],[wn,[{labels:["new_keys"],marginBottom:5},"newKeys","idx"]],[wn,[{labels:["new_hash_codes"]},"newHashCodes","idx"]]]),Ki=function(e){Ti(n,e);var t=Si(n);function n(){return Ii(this,n),t.apply(this,arguments)}return ji(n,[{key:"run",value:function(e,t,n){for(this.hashCodes=new It.a(e),this.keys=new It.a(t),this.key=n,this.hashCode=tt(this.key),this.addBP("compute-hash"),this.idx=this.computeIdx(this.hashCode,this.keys.size),this.addBP("compute-idx");this.addBP("check-collision"),null!==this.keys.get(this.idx);){if(this.addBP("check-dup-hash"),this.hashCodes.get(this.idx).eq(this.hashCode)&&(this.addBP("check-dup-key"),ht(this.keys.get(this.idx),this.key))){this.addBP("check-dup-break");break}this.idx=(this.idx+1)%this.keys.size,this.addBP("next-idx")}return this.hashCodes=this.hashCodes.set(this.idx,this.hashCode),this.keys=this.keys.set(this.idx,this.key),this.addBP("assign-elem"),[this.hashCodes,this.keys]}}]),n}(it),Xi=function(e){Ti(n,e);var t=Si(n);function n(e){var r;return Ii(this,n),(r=t.call(this,e)).state={string:"Hello",integer:42},r}return ji(n,[{key:"render",value:function(){var e=this;return l.createElement("div",{className:"hash-examples"},l.createElement("div",{className:"div-p"},l.createElement("code",null,"hash("),l.createElement(Lr,{inline:!0,value:this.state.string,onChange:function(t){return e.setState({string:t})}}),l.createElement("code",null,")")," = ",l.createElement("code",null,$e(this.state.string))),l.createElement("div",{className:"div-p"},l.createElement("code",null,"hash("),l.createElement(zr,{inline:!0,value:this.state.integer,onChange:function(t){return e.setState({integer:t})}}),l.createElement("code",null,")")," = ",l.createElement("code",null,et(Object(ue.BigNumber)(this.state.integer)).toFixed())),l.createElement("p",null,l.createElement("code",null,"hash(42.5)")," = ",l.createElement("code",null,"1426259968")),l.createElement("p",null,l.createElement("code",null,'hash(("Hi", 11))')," = ",l.createElement("code",null,"4421265786515608844")),l.createElement("p",null,l.createElement("code",null,"hash(None)")," = ",l.createElement("code",null,"-9223372036581563745")))}}]),n}(l.Component),Ji=function(){function e(){Ii(this,e)}return ji(e,null,[{key:"createNew",value:function(e,t){var n=new Li,r=wi(n.run(e,t),2);return{hashCodes:r[0],keys:r[1],bp:n.getBreakpoints()}}},{key:"hasKey",value:function(e,t,n){var r=new Qi,i=r.run(e,t,n,!1),o=i.result,a=i.hashCodes,s=i.keys;return{result:o,bp:r.getBreakpoints(),hashCodes:a,keys:s}}},{key:"remove",value:function(e,t,n){var r=new Qi,i=r.run(e,t,n,!0),o=i.isException,a=i.hashCodes,s=i.keys;return{isException:o,bp:r.getBreakpoints(),hashCodes:a,keys:s}}},{key:"resize",value:function(e,t){var n=new Vi,r=wi(n.run(e,t),2),i=r[0],o=r[1];return{bp:n.getBreakpoints(),hashCodes:i,keys:o}}},{key:"insert",value:function(e,t,n){var r=new Ki,i=wi(r.run(e,t,n),2),o=i[0],a=i[1];return{bp:r.getBreakpoints(),hashCodes:o,keys:a}}}]),e}();function qi(e){var t=e.array,n=t.filter((function(e){return"string"==typeof e})).length,r=t.length-n;return n>0&&r>0?"a mixed list of integers and strings":n>0?"a list of strings":"a list of integers"}var $i=function(e){Ti(n,e);var t=Si(n);function n(){var e;return Ii(this,n),vi(Ci(e=t.call(this)),"runAnimation",(function(){e.setState((function(e){return{isStart:!e.isStart}}))})),e.state={isStart:!0,breakpointsUpdatedCounter:0},e}return ji(n,[{key:"render",value:function(){var e,t,n,r;if(this.state.isStart){var i=this.state.breakpoints[0];e=i.hashCodes,t=i.keys,r="Throw away the old table",n=l.createElement(yt.a,{icon:"trash-alt"})}else{var o=this.state.breakpoints[this.state.breakpoints.length-1];e=o.newHashCodes,t=o.newKeys,r="Reset",n=l.createElement(yt.a,{icon:"redo-alt"})}return l.createElement("div",{className:"hl-left",style:{paddingLeft:20}},l.createElement("button",{type:"button",className:"btn btn-primary btn-sm",onClick:this.runAnimation,style:{minWidth:180}},n," ",r),l.createElement(Yi,{bp:{hashCodes:e,keys:t},epoch:this.state.breakpointsUpdatedCounter,fixedGeometry:qt}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.breakpoints!==t.breakpoints?bi(bi({},t),{},{breakpoints:e.breakpoints,breakpointsUpdatedCounter:t.breakpointsUpdatedCounter+1}):null}}]),n}(l.PureComponent);vi($i,"FULL_WIDTH",!0),vi($i,"EXTRA_ERROR_BOUNDARY",!0);var eo=function(e){Ti(n,e);var t=Si(n);function n(){var e;return Ii(this,n),vi(Ci(e=t.call(this)),"runCreateNew",Object(Me.a)((function(e,t){return Ji.createNew(e,t)}))),vi(Ci(e),"runSearch",Object(Me.a)((function(e,t,n){return{bp:Ji.hasKey(e,t,n).bp}}))),vi(Ci(e),"runRemove",Object(Me.a)((function(e,t,n){var r=Ji.remove(e,t,n);return{bp:r.bp,hashCodes:r.hashCodes,keys:r.keys}}))),vi(Ci(e),"runResize",Object(Me.a)((function(e,t){return{bp:Ji.resize(e,t).bp}}))),e.state={array:["uname","mv",1,"time",-6,"ps","mkdir","less"],searchedObj:"less",objToRemove:1},e}return ji(n,[{key:"render",value:function(){var e=this,t=(performance.now(),this.runCreateNew(this.state.array)),n=t.hashCodes,r=t.keys,i=this.runSearch(n,r,this.state.searchedObj),o=this.runRemove(n,r,this.state.objToRemove);n=o.hashCodes,r=o.keys;var a=this.runResize(n,r);return l.createElement("div",{className:"chapter chapter2"},l.createElement("h2",null," Chapter 2. Why are hash tables called hash tables? "),l.createElement(J,null,l.createElement("p",null,"Now that we have the solution for searching in a list of numbers, can we use it for non-integer objects? We can if we find a way to turn objects into numbers for indexing."),l.createElement("p",null," ","We don't need a perfect one-to-one correspondence between objects and integers. In fact, it is totally fine if two unrelated objects are turned into the same number — we can use linear probing to resolve this collision anyway!"),l.createElement("p",null,"However, if we turn all objects into the same number, for example, ",l.createElement("code",null,"42"),", our hash table would work, but its performance would severely degrade. So, for performance reasons it is desirable to get distinct numbers for distinct objects usually."," "),l.createElement("p",null,"The transformation also needs to be completely deterministic, i.e. we need to always get the same value for the same object. In other words, something like ",l.createElement("code",null,"random()"),' would not work, because we would "forget" where we placed our objects and we wouldn\'t be able to locate them during a search.'),l.createElement("p",null,"Functions that do this kind of transformation are called ",l.createElement("em",null,"hash functions"),'. Since it is not required to preserve any order in the input domain, a typical hash function "mixes up" its input domain, hence the name "hash".'),l.createElement("p",null,"In Python, there are built-in implementations of hash functions for many built-in types. They are all available through a single interface: the function ",l.createElement("code",null,"hash()"),". This function can take any Python object as an input and call an appropriate implementation (if it exists)."),l.createElement("p",null," Here are some examples of hash function values for some of the built-in types. "),l.createElement(Xi,null),l.createElement("p",null,"In the case of strings, ",l.createElement("code",null,"hash()")," returns fairly unpredictable results, as it should. However, for small integers ",l.createElement("code",{className:"text-nowrap"},"hash(x) == x"),". This fact may seem surprising to people familiar with hash functions, but it is a deliberate design decision by Python core developers."),l.createElement("p",null,'For "long" integers Python uses a different algorithm. Try typing a relatively big number, for example, ',l.createElement("code",null,"12345678901234567890")," to see this."),l.createElement("p",null,"Another fact: ",l.createElement("code",null,"hash()")," never returns ",l.createElement("code",null,"-1"),", because ",l.createElement("code",null,"-1")," used internally as an indicator of an error. That's why ",l.createElement("code",null,"hash(-1)")," is ",l.createElement("code",null,"-2"),"."),l.createElement("h5",null,"hash() implementation notes"),l.createElement("p",null,"This chapter and the next two chapters will use ",l.createElement("code",null,"hash()")," implementation from Python 3.2 (running on an x86_64 system). So if you run Python 3.2 on your x86_64 system, you should see the same hash values for integers and strings (and the same data structure states). One exception is ",l.createElement("code",null,"hash(None)"),". It changes between runs, but in this explanation"," ",l.createElement("code",null,"hash(None)")," is always ",l.createElement("code",null,"-9223372036581563745"),"."),l.createElement("p",null,"Why Python 3.2? Because dict implementation has changed over time but Python 3.2's dict implements most major ideas, and, thus, Python 3.2's dict is a good starting point. Later versions of Python extend (rather than completely replace) Python 3.2's implementation. Eventually, we will get to these implementations as well."),l.createElement("h5",null," Unhashable types "),l.createElement("p",null,"Not all types are hashable. For example, lists aren't and if you call"," ",l.createElement("code",{className:"text-nowrap"},'hash(["some", "values"])')," you will get"," ",l.createElement("code",null,"TypeError: unhashable type: 'list'"),". Why can't we use the same hash function for lists as for tuples? The answer is because lists are mutable and tuples are not."),l.createElement("p",null,"We could still define a hash function for lists and other mutable objects. However changing a list would change the value of the hash function as well, and therefore we will not be able to locate the mutated list! Hashing and using lists as keys in dicts would lead to many accidental bugs, so core developers of Python chose not to allow this."),l.createElement("h5",null,'A note on the word "hash"'),l.createElement("p",null,'Because hash tables use hash functions and because hash tables mix up inserted elements, they are called hash tables. Sometimes people shorten "hash table" to just "hash". The output of a hash function is sometimes called "hash value" or "hash code", but very often it is also shortened to just "hash". Also, Python\'s built-in hash function is called ',l.createElement("code",null,"hash()"),"."),l.createElement("p",null,"Because people like to shorten things, several different (but related) concepts end up having the same shortened name. This can get a bit confusing sometimes."),l.createElement("h5",null," Using hash functions for hash tables "),l.createElement("p",null,"Recall that we started with a simple problem: searching efficiently in a list of distinct numbers. Now, let's make this problem harder: our hash table needs to handle duplicates, support types other than integers, support removing and adding keys (and therefore resizing). We will see how to handle values in the next chapter, but for now let's assume we only need to search for keys."),l.createElement("p",null,"How does using hash functions change the insertion algorithm?"),l.createElement("p",null,"Obviously, we have to use ",l.createElement("code",null,"hash()")," function to convert objects into integers for indexing."),l.createElement("p",null,"Because ",l.createElement("code",null,"None")," is hashable too, we will need to use some other value as a placeholder for an empty slot. The cleanest way to do this is to create a new type and use a value of this type. In Python, this is quite simple:"),l.createElement(Xt,null,"\nclass EmptyValueClass(object):\n    pass\n\nEMPTY = EmptyValueClass()\n              ".trim()),l.createElement("p",null,"We will now use ",l.createElement("code",null,"EMPTY")," to denote an empty slot. After we do this, we will be able to insert ",l.createElement("code",null,"None")," in the hash table safely."),l.createElement("p",null,"But here is one critical thing: checking for equality of objects can be expensive. For example, comparing strings of length 10000 may require up to 10000 comparison operations - one per each pair of corresponding characters. And, we may end up doing several equality checks when doing linear probing."),l.createElement("p",null,"When we only had integers, we didn't have this problem, because comparing integers is cheap. But here is a neat trick we can use to improve the performance in the case of arbitrary objects. We still get numbers from hash functions. So, we can save these numbers and compare them before comparing actual objects. When comparing hashes, there are two different outcomes. First, the hashes are different; in this case, we can safely conclude that the objects are different as well. Second, the hashes are equal; in this case, there is a good chance that the objects are equal but there is still a possibility of two distinct objects having the same hash, so we have to compare the actual objects."),l.createElement("p",null,"This optimization is a space-time tradeoff. We spend extra memory to make the algorithm faster."),l.createElement("p",null,"In this chapter, we'll allow duplicates. Remember how search works in the previous chapter? We retrace the steps necessary to insert the element and check if any slot along the way contains it. We also do all these steps when we are actually inserting an element. This means that we're effectively doing a search while inserting an element. So, handling duplicates is straightforward — we can terminate the insertion process if we find the element. And if we hit an empty slot without finding the element, then the element is not in the table and it means that we can safely insert it."),l.createElement("p",null,"Now, let's see this algorithm in action. We'll use a separate list called"," ",l.createElement("code",null,"hash_codes")," for caching values of hash functions."),l.createElement("p",null,"Let's say we have ",l.createElement(qi,{array:this.state.array}),":"),l.createElement(Br,yi({input:Pr,inputProps:{minSize:1},initialValue:this.state.array,onChange:this.setter("array",!0),bottomBoundary:".chapter2"},this.props)),l.createElement("p",null,"Let's build a hash table from it:"),l.createElement(vn,yi({code:Ai,breakpoints:t.bp,formatBpDesc:Bi,stateVisualization:_i},this.props)),l.createElement("h5",null," Searching "),l.createElement("p",null,"The search algorithm hasn't changed much. We get the ",l.createElement("code",null,"hash()"),' function value for the object, and do linear probing. Just like in the first chapter, we essentially have a bunch of "islands", separated by empty slots. Each island usually contains only a few elements, and a linear scan over a small "island" isn\'t expensive.'),l.createElement("div",{className:"div-p"},"For instance, let's search for",l.createElement(_r,{inline:!0,value:this.state.searchedObj,onChange:this.setter("searchedObj"),anotherValue:function(){return zi(e.state.array)}}),"and see what happens:"),l.createElement(vn,yi({code:Ri,breakpoints:i.bp,formatBpDesc:Ui,stateVisualization:Hi},this.props)),l.createElement("h5",null," Removing objects "),l.createElement("p",null,"If we removed a key without a trace, it'd leave a hole, and this would break the search algorithm. Then, how do we remove a key?"),l.createElement("p",null,'The answer is that if we can\'t remove a key without a trace, we should leave a trace. When removing a key, we replace it with a "dummy" object (another term for this object is "tombstone"). This object acts as a placeholder that indicates we shouldn\'t stop probing during a search.'),l.createElement("p",null,"In code, we can create this placeholder object just like we created ",l.createElement("code",null,"EMPTY"),":"),l.createElement(Xt,null,"\nclass DummyValueClass(object):\n    pass\n\nDUMMY = DummyValueClass()\n              ".trim()),l.createElement("div",{className:"div-p"},"Let's see removing in action. Let's say we want to remove:",l.createElement(_r,{inline:!0,value:this.state.objToRemove,onChange:this.setter("objToRemove"),anotherValue:function(){return zi(e.state.array,.7,.2,.1)}})),l.createElement(vn,yi({code:Wi,breakpoints:o.bp,formatBpDesc:Ui,stateVisualization:Hi},this.props)),l.createElement("p",null,"Removing a lot of objects may lead to a table being filled with these dummy objects. What if a table overflows with dummy objects? There is a way to clean them up. But first, let's see what happens if a table overflows with ordinary objects."),l.createElement("h5",null,"Resizing hash tables"),l.createElement("p",null,"How do we resize a hash table? The index of each element depends on the table size, so it may change if the size of a table changes. Moreover, because of collisions and linear probing, each index may depend on the indexes of other objects (which, in turn, also depend on the size of a table and the indexes of other objects). This is a tangled mess."),l.createElement("p",null,"There is a way to disentangle this Gordian Knot, however. We can create a new, bigger table and re-insert all the elements from the smaller table (skipping dummy placeholders). This may sound expensive. And, it ",l.createElement("em",null,"is")," expensive. But, the thing is, we don't have to resize the table after every operation. If we make the new table size 1.5x, 2x or even 4x the size of the old table, it'll take a while until it fills up again. We will do resizes rarely enough that the heavy cost of it will amortize (spread out) over many insertions/deletions."),l.createElement($i,{breakpoints:a.bp}),l.createElement("p",{className:"mt-2"},"Since we're re-building the table, the code is fairly similar to the code for building it from scratch. The differences are:"),l.createElement("ul",null,l.createElement("li",null,"the hash codes are already there, so we don't need to compute them the second time;"),l.createElement("li",null,"we don't have to check for duplicates, because we know that each object is present only once in the original table;"),l.createElement("li",null,"we skip empty and dummy slots.")),l.createElement(vn,yi({code:Fi,breakpoints:a.bp,formatBpDesc:Gi,stateVisualization:Zi},this.props)),l.createElement("p",null,"There is still one more important question. What condition should trigger the resizing operation? If we postpone resizing until a table is nearly full, the performance will severely degrade. If we resize a table when it is still sparse, we will waste memory. Typically, a hash table is resized when it is around 66% full."),l.createElement("p",null,"The number of non-empty slots (including dummy/tombstone slots) is called ",l.createElement("em",null,"fill"),". The ratio between fill and table capacity is called the ",l.createElement("em",null,"load factor")," (also, sometimes:"," ",l.createElement("em",null,"fill factor")," or ",l.createElement("em",null,"fill ratio"),"). So, using the new terms, we can say that a hash table is resized when the load factor reaches 66%. When a table is resized, it's size usually goes up, but sometimes it can actually go down, if there are a lot of dummy slots."),l.createElement("p",null,'To implement this efficiently, we need to track the load factor. We will need two counters for tracking fill and "real" usage. With the current code structure, tracking these counters would be messy because we would need to pass these counters to and from every function. A much cleaner solution would be using classes. More on that in the next chapter.')))}}]),n}(X);function to(e){return(to="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function no(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ro(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,oo(r.key),r)}}function io(e,t,n){return t&&ro(e.prototype,t),n&&ro(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function oo(e){var t=function(e,t){if("object"!==to(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==to(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===to(t)?t:String(t)}function ao(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&so(e,t)}function so(e,t){return(so=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function lo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ho(e);if(t){var i=ho(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return co(this,n)}}function co(e,t){if(t&&("object"===to(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return uo(e)}function uo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ho(e){return(ho=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var po=[["def bubble_sort(a):","",0],["    for i in range(len(a)):","for-i",1],["        swapped = False","swapped-false",1],["        for j in range(len(a) - i - 1):","for-j",2],["            if a[j] > a[j + 1]:","compare",2],["                a[j], a[j + 1] = a[j + 1], a[j]","swap",2],["                swapped = True","swapped-true",2],["        if not swapped:","check-swapped",1],["            break","break-swapped",1],["","end",-1]],fo=function(e){ao(n,e);var t=lo(n);function n(){return no(this,n),t.call(this)}return io(n,[{key:"run",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.a=new It.a(e);var n=e.length;for(this.i=0;this.i<n;++this.i){for(this.addBP("for-i"),this.swapped=!1,this.addBP("swapped-false"),this.j=0;this.j<n-1-this.i;++this.j){this.jplus1=this.j+1,t&&this.addBP("for-j");var r=this.a.get(this.j),i=this.a.get(this.j+1);t&&this.addBP("compare"),r>i&&(this.a=this.a.set(this.j,i),this.a=this.a.set(this.j+1,r),t&&this.addBP("swap"),this.swapped=!0,t&&this.addBP("swapped-true"))}if(this.j=void 0,this.jplus1=void 0,this.addBP("check-swapped"),!this.swapped)return void this.addBP("break-swapped");this.swapped=void 0}return this.addBP("end"),this.a}}]),n}(nt);var mo=function(e){return fn([[wn,[{labels:e?["a"]:[null]},"a","j","jplus1",{selection1color:"red",selection2color:"red"}]]])};mo(!0),mo(!1),fn([[wn,[{labels:["a"]},"a","i",void 0]]]),fn([[wn,[{labels:["a"]},"a","l","r"]],[wn,[{labels:["left_a"]},"left_a","li"]],[wn,[{labels:["right_a"]},"right_a","ri"]]]),fn([[kn,[{labels:["from_keys"],marginBottom:20},"plus1_fromKeys","plus1_fromKeysIdx","double_fromKeysIdx",{selection1color:"#13920b"}]],[wn,[{labels:["keys"],marginBottom:7},"plus1_keys","plus1_idx"]],[wn,[{labels:["hash_codes"]},"plus1_hashCodes","plus1_idx"]],[wn,[{labels:["keys"],marginBottom:7},"double_keys","double_idx"]],[wn,[{labels:["hash_codes"]},"double_hashCodes","double_idx"]]]);function yo(e,t){return e===t?"==":e<t?"<":">"}var go=function(e){ao(n,e);var t=lo(n);function n(){return no(this,n),t.call(this)}return io(n,[{key:"run",value:function(e){this.array=new It.a(e),this.recursionLevel=0,this.quickSort(0,e.length-1)}},{key:"quickSort",value:function(e,t){if(this.start=e,this.stop=t,this.addBP("compare-size"),console.log("quicksort",this.start,this.stop),this.stop<=this.start)this.addBP("return");else{for(this.pivot=this.array.get(Math.trunc((this.start+this.stop)/2)),this.addBP("select-pivot"),this.left=this.start,this.addBP("left-start"),this.right=this.stop,this.addBP("right-stop");this.addBP("while-left-right"),!(this.left>this.right);){for(;this.addBP("while-left"),!(this.array.get(this.left)>=this.pivot);)this.left++,this.addBP("inc-left-first");for(;this.addBP("while-right"),!(this.array.get(this.right)<=this.pivot);)this.right--,this.addBP("dec-right-first");if(this.addBP("compare-left-right"),this.left<=this.right){var n=this.array.get(this.left),r=this.array.get(this.right);this.array=this.array.set(this.left,r),this.array=this.array.set(this.right,n),this.addBP("swap"),this.left+=1,this.addBP("inc-left-second"),this.right-=1,this.addBP("dec-right-second")}}console.log(this.start,this.left,this.right,this.stop);var i=this.pivot,o=this.left,a=this.right,s=this.stop,l=this.start;this.pivot=void 0,this.left=void 0,this.addBP("sort-left"),this.recursionLevel++,this.quickSort(this.start,this.right),this.recursionLevel--,this.pivot=i,this.left=o,this.right=a,this.stop=s,this.start=l,this.pivot=void 0,this.right=void 0,this.addBP("sort-right"),this.recursionLevel++,this.quickSort(this.left,this.stop),this.recursionLevel--,this.addBP("exit")}}}]),n}(nt);function bo(e){return(bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vo(){return(vo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function wo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Eo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Eo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Eo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ko(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Co(r.key),r)}}function Io(e,t,n){return t&&ko(e.prototype,t),n&&ko(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Mo(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jo(e,t)}function jo(e,t){return(jo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function No(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=So(e);if(t){var i=So(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return To(this,n)}}function To(e,t){if(t&&("object"===bo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Oo(e)}function Oo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function So(e){return(So=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Do(e,t,n){return(t=Co(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Co(e){var t=function(e,t){if("object"!==bo(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==bo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===bo(t)?t:String(t)}var Po=Object.assign({},n(25),n(94),n(502),n(505),n(506)),Ao={boxSize:30,boxSpacing:1},zo=function(e){Mo(n,e);var t=No(n);function n(e){var r;return xo(this,n),Do(Oo(r=t.call(this,e)),"TRANSITION_TIME",500),Do(Oo(r),"TOP_SPACE",66),Do(Oo(r),"BOTTOM_SPACE",66),Do(Oo(r),"transitionId",null),Do(Oo(r),"lastTransitionId",0),Do(Oo(r),"setRef",(function(e){r.gChild=e})),r.state={firstRender:!0,bpIdx:e.bpIdx,breakpoints:e.breakpoints,transitionRunning:!1,transitionToBpIdx:null,boxSize:null,boxSpacing:null},r}return Io(n,[{key:"shouldComponentUpdate",value:function(e,t){var n=!1,r=!1;return this.state.boxSize!==t.boxSize||null==this.state.boxSize||null==t.boxSize||(e.breakpoints!==t.breakpoints?(n=!0,r=!0):e.bpIdx===t.bpIdx||null!=t.transitionToBpIdx&&e.bpIdx===t.transitionToBpIdx||(r=!0,n=null!=t.transitionToBpIdx&&(t.bpIdx>t.transitionToBpIdx&&e.bpIdx>t.transitionToBpIdx||t.bpIdx<t.transitionToBpIdx&&e.bpIdx<t.transitionToBpIdx)),r&&(!t.transitionRunning||!n))}},{key:"render",value:function(){var e=this.state.boxSize+this.TOP_SPACE+this.BOTTOM_SPACE+10+30+25,t=this.props,n=t.fixedHeight,r=t.adjustTop,i=n||e;return r=r||0,l.createElement("div",{ref:this.props.innerRef},l.createElement("svg",{width:10+this.props.slotsCount*(this.state.boxSize+this.state.boxSpacing),height:i},l.createElement("defs",null,["blue","green"].map((function(e){return l.createElement("marker",{id:"arrow-".concat(e),key:"arrow-".concat(e),markerUnits:"strokeWidth",markerWidth:"7",markerHeight:"7",viewBox:"0 0 12 12",refX:"6",refY:"6",orient:"auto"},l.createElement("path",{d:"M2,2 L10,6 L2,10 L6,6 L2,2",style:{fill:e}}))}))),l.createElement("g",{ref:this.setRef,transform:"translate(0, ".concat(r+30,")")})))}},{key:"transitionEnd",value:function(){this.transitionToBpIdx;this.transitionId=null,this.state.transitionRunning&&this.setState({transitionRunning:!1,bpIdx:this.state.transitionToBpIdx,transitionToBpIdx:null})}},{key:"d3render",value:function(){for(var e=this,t=this.props.slotsCount,n=this.props.breakpoints[this.props.bpIdx],r=n.links.toJS(),i=null!=n.startIdx?n.startIdx:null,o=[],a=[],s=0;s<r.length;++s){var l={};a.push([]);for(var c=0;c<r[s].length;++c){var u=r[s][c].nextIdx;u in l?l[u]++:l[u]=0,o.push([s,c]),a[s].push(l[u])}}var h,d=this.oldLinks,p=this.oldBoxSize,f=this.oldNextIdxRepeatedAdjustment,m={transitionToBpIdx:this.props.bpIdx,breakpoints:this.props.breakpoints};this.state.firstRender?(m.firstRender=!1,h=0):(h=this.TRANSITION_TIME,m.transitionRunning=!0);var y=Po.transition().duration(h);this.lastTransitionId++;var g=this.lastTransitionId;this.transitionId=g,y.on("end",(function(){e.transitionId===g&&setTimeout((function(){return e.transitionEnd()}),0)}));var b=Po.select(this.gChild),v=Po.line().x((function(e){return e.x})).y((function(e){return e.y})).curve(Po.curveMonotoneX),w=this.state,E=w.boxSize,x=w.boxSpacing,k=E!==p,I=b.selectAll("rect").data(Po.range(t));I.enter().append("rect").style("fill","#e5e6f1").attr("x",(function(e,t){return(E+x)*t})).attr("y",this.TOP_SPACE).attr("rx",4).attr("ry",4).attr("width",E).attr("height",E).merge(I).style("stroke",(function(e,t){return t===i?"green":"none"})).style("stroke-width",1);var M=function(n,r,i){return function(n,r,i){var o,a,s,l,c;if(n<r)o=e.TOP_SPACE,a=e.TOP_SPACE,s=e.TOP_SPACE*(1-(Math.max(r-n,1)+i)/t),l=.66*E,c=.33*E;else if(n==r)o=e.TOP_SPACE,a=e.TOP_SPACE,s=e.TOP_SPACE*(1-(1+i)/t),l=.33*E,c=.66*E;else{var u=e.TOP_SPACE+E;o=u,a=u,s=u+e.BOTTOM_SPACE*((2+i)/t),l=.33*E,c=.66*E}var h=(E+x)*n+l,d=(E+x)*r+c;return[[h,o],[(h+d)/2,s],[d,a]]}(n,r,i).map((function(e){var t=wo(e,2);return{x:t[0],y:t[1]}}))},j=function(e){var t=wo(e,2),n=t[0],i=t[1];return r[n][i].perturbLink?"green":"blue"},N=function(e){var t=wo(e,2),n=t[0],r=t[1];return"url(#arrow-".concat(j([n,r]),")")},T=b.selectAll("path").data(o,(function(e){return e})),O=T.enter(),S=T.exit();O.append("path").style("stroke",j).style("stroke-width",1).style("fill","none").attr("d",(function(e){var t=wo(e,2),n=t[0],i=t[1],o=r[n][i].nextIdx,s=a[n][i],l=M(n,o,s);return v(l)})).each((function(e,t){var n=this.getTotalLength(),r=Po.select(this);r.classed("entering",!0).attr("stroke-dasharray",n+" "+n).attr("stroke-dashoffset",n).transition(y).attr("stroke-dashoffset",0).on("end",(function(){r.attr("marker-end",N(e)),r.classed("entering",!1)}))})),T.filter((function(e,t){var n=wo(e,2),i=n[0],o=n[1];return!Po.select(this).classed("entering")||k||d[i][o].nextIdx!=r[i][o].nextIdx})).style("stroke",j).attr("stroke-dasharray",null).attr("stroke-dashoffset",null).transition(y).attrTween("d",(function(e){var t=wo(e,2),n=t[0],i=t[1],o=r[n][i].nextIdx,s=d[n][i].nextIdx,l=f[n][i],c=a[n][i],u=M(n,s,l),h=M(n,o,c),p=Po.interpolateArray(u,h);return function(e){return v(p(e))}})).attr("marker-end",N),S.filter((function(e,t){return!Po.select(this).classed("exiting")})).classed("exiting",!0).each((function(){var e=this.getTotalLength();Po.select(this).attr("stroke-dasharray",e+" "+e).attr("stroke-dashoffset",0).attr("marker-end",null).transition(y).attr("stroke-dashoffset",e).remove()})),this.oldLinks=r,this.oldBoxSize=E,this.oldNextIdxRepeatedAdjustment=a,this.setState(m)}},{key:"_initOrUpd",value:function(){null==this.state.boxSize&&null!=this.props.boxSize?this.setState({boxSize:this.props.boxSize,boxSpacing:this.props.boxSpacing}):null!=this.state.boxSize&&this.d3render()}},{key:"componentDidUpdate",value:function(){this._initOrUpd()}},{key:"componentDidMount",value:function(){this._initOrUpd()}}]),n}(l.Component);function Lo(e,t){return Ao}l.Component;var _o=function(e){Mo(n,e);var t=No(n);function n(){return xo(this,n),t.apply(this,arguments)}return Io(n,[{key:"render",value:function(){return l.createElement(zo,vo({slotsCount:this.props.slotsCount||8,breakpoints:[{links:this.props.links}],bpIdx:0},this.props,Lo(this.props.windowWidth,this.props.windowHeight)))}}]),n}(l.Component);Do(_o,"FULL_WIDTH",!0),Do(_o,"EXTRA_ERROR_BOUNDARY",!0);var Bo=function(e){Mo(n,e);var t=No(n);function n(){return xo(this,n),t.apply(this,arguments)}return Io(n,[{key:"run",value:function(e,t,n){"python"===n&&(this.PERTURB_SHIFT=5),this.slotsCount=e,this.key=t,this.links=new It.a;for(var r=0;r<this.slotsCount;++r)this.links=this.links.set(r,new It.a);this.addBP("def-probe-all"),this.hashCode=tt(this.key),this.addBP("compute-hash"),"python"===n&&(this.perturb=dt(this.hashCode),this.addBP("compute-perturb")),this.idx=rt(this.hashCode,this.slotsCount),this.startIdx=this.idx,this.addBP("compute-idx"),this.visitedIdx=new It.b,this.addBP("create-empty-set");for(var i,o,a,s=!!this.perturb&&!this.perturb.eq(0);this.addBP("while-loop"),this.visitedIdx.size!==this.slotsCount;){this.visitedIdx.has(this.idx)||(this.visitedIdx=this.visitedIdx.set(this.idx,{perturbLink:s})),this.addBP("visited-add");var l=void 0;if("python"===n)i=this.idx,o=this.perturb,a=this.slotsCount,l=+Object(ue.BigNumber)(5*i+1).plus(o).mod(a).toString();else if("5i+1"===n)l=(5*this.idx+1)%this.slotsCount;else{if("i+1"!==n)throw new Error("Unknown probing algorithm: ".concat(n));l=(this.idx+1)%this.slotsCount}var c=null!=this.perturb&&!this.perturb.eq(0);s=c,this.links=this.links.set(this.idx,this.links.get(this.idx).push({nextIdx:l,perturbLink:c})),this.idx=l,this.addBP("next-idx"),"python"===n&&(this.perturb=pt(this.perturb),this.addBP("perturb-shift"))}return{links:this.links,startIdx:this.startIdx}}}]),n}(nt);function Ro(){return l.createElement(l.Fragment,null,l.createElement("h1",null,"Коллизии в хеш-таблицах"),l.createElement("p",null,"Хеш-таблица — структура данных, хранящая пары «ключ-значение» или только ключ. Позволяет быстро найти ключ и, если есть, связанное с ним значение."),l.createElement("h2",null,"Как найти нужный элемент с помощью линейного поиска"),l.createElement("p",null,"Последовательно перебирать все элементы списка, пока не найдется требуемый. В худшем случае — придется проверить все элементы. А в среднем — половину."),l.createElement("h2",null,"Как найти нужный элемент хеш-таблицы"),l.createElement("p",null,"По ключу понять, с какого места таблицы искать. И начать поиск рядом с нужным элементом. В среднем такой поиск займет пару итераций."," "),l.createElement("h2",null,"Пример из реальной жизни"),l.createElement("p",null,"Представьте, что вы ищете книгу в библиотеке. Если книги стоят в случайном порядке, то придется перебирать все по одной, пока не найдете нужную. А если книги стоят в алфавитном порядке, то библиотекарь может пойти сразу к нужной полке и перебрать несколько книг, а не всю библиотеку."," "),l.createElement("h2",null,"Устройство простейшей хеш-таблицы"),l.createElement("p",null,"Простейшая хеш-таблица — это массив из ключей. Индекс ключа вычисляется по самому ключу. Однако у разных ключей индекс может совпасть. Такие ситуации называются коллизиями."," "),l.createElement("p",null,"В следующей визуализации мы разберемся, как решать коллизии и создадим простейшую хеш-таблицу без потери данных."))}var Uo=(new Bo).run(8,"","i+1").links;function Ho(){return l.createElement(l.Fragment,null," ",l.createElement(_o,{slotsCount:8,links:Uo,adjustTop:-65,fixedHeight:85}),l.createElement("h2",null,"Алгоритм разрешения коллизий"),l.createElement("p",null,"Если текущая ячейка занята, то мы проверим следующую. Если занята и она, то проверим следующую за ней. И так до тех пор, пока не найдем свободную ячейку."),l.createElement("p",null,"Таблицы с таким способом разрешения коллизий называются хеш-таблицами"," ",l.createElement("a",{className:"link",target:"_blank",href:"https://ru.wikipedia.org/wiki/%D0%A5%D0%B5%D1%88-%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D0%B0#%D0%9E%D1%82%D0%BA%D1%80%D1%8B%D1%82%D0%B0%D1%8F_%D0%B0%D0%B4%D1%80%D0%B5%D1%81%D0%B0%D1%86%D0%B8%D1%8F"},"с открытой адресацией"),"."," "),l.createElement("p",null,"Есть и другой способ разрешения коллизий —"," ",l.createElement("a",{className:"link",target:"_blank",href:"https://ru.wikipedia.org/wiki/%D0%A5%D0%B5%D1%88-%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D0%B0#%D0%9C%D0%B5%D1%82%D0%BE%D0%B4_%D1%86%D0%B5%D0%BF%D0%BE%D1%87%D0%B5%D0%BA"},"метод цепочек"),". В хеш-таблицах с цепочками каждая ячейка является односвязным списком. Такие ячейки позволяют хранить сразу несколько элементов."))}function Yo(e){return l.createElement(l.Fragment,null,l.createElement("h1",null,"Простейшие хеш-таблицы"),l.createElement("p",null,"Хеш-таблица — структура данных, хранящая пары «ключ-значение» или только ключ. Позволяет быстро найти ключ и, если есть, связанное с ним значение."),l.createElement("p",null,"Простейшая хеш-таблица — это массив из ключей. Индекс ключа вычисляется по самому ключу. Однако у разных ключей индекс может совпасть. Такие ситуации называются коллизиями."," "),l.createElement(Ho,null),l.createElement("h2",null,"Производительность и расход памяти"),l.createElement("p",null,"Чем больше свободного места в хеш-таблице, тем меньше коллизий. В пустой таблице не будет ни одной коллизии, а в почти полной — они будут почти наверняка."," "),l.createElement("p",null,"Однако чем больше свободного места, тем больше расходуется памяти. Поэтому при использовании хеш-таблиц стараются достичь баланса. Таблица должна быть не слишком пустой, но и не слишком заполненной. Проблемы с производительностью начиют быть заметны при заполненности на две трети."),l.createElement("p",null,"На нашей визуализации размер таблицы выбран так, чтобы таблица была заполнена наполовину."),l.createElement("h2",null,"Создание хеш-таблицы"),l.createElement("p",null,"Для создания хеш-таблицы мы последовательно вставляем ключи один за другим. При возникновении коллизии переходим к соседней ячейке. Вставляем ключ в первую свободную ячейку."),l.createElement("h2",null,"Поиск в хеш-таблице"),l.createElement("p",null,"Поиск ключа аналогичен вставке. Вычисляем индекс и ищем пустой слот, как при разрешении коллизий. Если по пути мы не нашли ключа, то его нет в таблице."))}function Wo(e){return l.createElement(l.Fragment,null,l.createElement("h1",null,"Хеш-таблицы с открытой адресацией"),l.createElement("p",null,"Хеш-таблица — структура данных, хранящая пары «ключ-значение» или только ключ. Позволяет быстро найти ключ и, если есть, связанное с ним значение."," "),l.createElement("p",null,"Хеш-таблица с открытой адресацией представляет себе массив из ячеек, в каждой из которых может быть записан ключ. Индекс ключа вычисляется по самому ключу с помощью хеш-функции. У разных ключей индекс может совпасть. Такие ситуации называются коллизиями."),l.createElement("p",null,"Задача хеш-функции — по объекту вычислить число по заранее заданному алгоритму. Вычисленное число называется хеш-кодом. Алгоритм хеш-фукнции должен помогать равномерно «раскидать» значения по хеш-таблице. Поэтому у двух похожих значений (например ",l.createElement("code",null,'"hello"')," и ",l.createElement("code",null,'"hello!"'),") может оказаться совсем разный хеш-код."),l.createElement("h2",null,"Примеры значений хеш-функций"),l.createElement("p",null,"В Python есть встроенная хеш-функция ",l.createElement("code",null,"hash()"),". В нашем коде мы используем именно ее."),l.createElement(Xi,null),l.createElement("h2",null,"Создание хеш-таблицы"),l.createElement("p",null,"Для создания хеш-таблицы мы последовательно вставляем ключи один за другим. При возникновении коллизии переходим к соседней ячейке. Вставляем ключ в первую свободную ячейку."),l.createElement("h2",null,"Поиск"),l.createElement("p",null,"Поиск ключа аналогичен вставке. Вычисляем индекс и ищем пустой слот, как при разрешении коллизий. Если по пути мы не нашли ключа, то его нет в таблице."),l.createElement("h2",null,"Удаление"),l.createElement("p",null,"При удалении ключа мы перезаписываем его специальным значением-плейсхолдером ",l.createElement("code",null,"DUMMY"),". Если мы оставим слот пустым, то при поиске другого ключа алгоритм разрешения коллизий может остановиться раньше времени."),l.createElement("h2",null,"Расширение"),l.createElement("p",null,"Если при работе хеш-таблицы она заполняется, то ее нужно расширить. Однако вычисленные индексы элементов зависят от размера таблицы. Это значит, что если изменится размер — изменятся и индексы. Для того, чтобы вставленные ключи можно было снова найти, мы создаем новую таблицу и вставляем в нее ключи из старой."))}function Qo(){return l.createElement(l.Fragment,null,l.createElement("h1",null," Сортировка пузырьком"),l.createElement("p",null,"Сортировка пузырьком — самая простая для понимания и реализации сортировка. Алгоритм по очереди просматривает все элементы списка"," ","— сравнивает текущий элемент со следующим и при необходимости меняет их местами. Таким образом, алгоритм проходит по списку, пока все элементы не будут упорядочены."),l.createElement("p",null,"Пузырьковая сортировка является простейшей и эффективна лишь для небольших списков."))}function Fo(){return l.createElement(l.Fragment,null,l.createElement("h1",null," Быстрая сортировка"),l.createElement("p",null,"Быстрая сортировка — одна из самых быстрых сортировок. Основана на принципе «Разделяй и властвуй»."),l.createElement("p",null,"На каждой итерации алгоритма выбирается элемент-делитель. Делитель может быть любым элементом массива. В нашей реализации выбирается элемент посередине."," "),l.createElement("p",null,"Затем элементы распределяются относительно делителя так, чтобы слева были все меньшие элементы, а справа"," ","— все большие. Таким образом массив становится несколько более упорядоченным и делитель оказывается на нужном месте."),l.createElement("p",null,"После этого алгоритм повторяется рекурсивно для левой и правой половин."))}function Vo(e){return(Vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Go=["inputComponentRef"];function Zo(e){return function(e){if(Array.isArray(e))return qo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Jo(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ko(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||Jo(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xo(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Jo(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Jo(e,t){if(e){if("string"==typeof e)return qo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qo(e,t):void 0}}function qo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ea(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ha(r.key),r)}}function ta(e,t,n){return t&&ea(e.prototype,t),n&&ea(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function na(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ra(e,t)}function ra(e,t){return(ra=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ia(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=sa(e);if(t){var i=sa(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return oa(this,n)}}function oa(e,t){if(t&&("object"===Vo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return aa(e)}function aa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sa(e){return(sa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function la(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ca(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?la(Object(n),!0).forEach((function(t){ua(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):la(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ua(e,t,n){return(t=ha(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ha(e){var t=function(e,t){if("object"!==Vo(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Vo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Vo(t)?t:String(t)}function da(){return(da=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function pa(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var fa=[["def simple_search(simple_list, key):","",0],["    idx = 0","start-from-zero",1],["    while idx < len(simple_list):","check-boundary",2],["        if simple_list[idx] == key:","check-found",2],["            return True","found-key",2],["        idx += 1","next-idx",2],["    return False","found-nothing",1]];function ma(e){var t=Fn(e),n=ya(t);if(n)throw new Error(n);return+t.toString()}function ya(e){return ue.BigNumber.isBigNumber(e)||"number"==typeof e?e.lt(-999)||e.gt(999)?"In chapter 1 only small integers are supported (between -".concat(999," and ").concat(999,")"):void 0:"Expected an integer"}function ga(e){var t=e.inputComponentRef,n=pa(e,Go);return l.createElement(Cr,da({},n,{dumpValue:JSON.stringify,parseValue:ma,ref:t}))}var ba=function(e){switch(e.point){case"start-execution":return"Ищем <code>".concat(e.number,"</code>");case"iteration":return"Проверим ячейку с индексом ".concat(e.idx," (<code>").concat(e.atIdx,"</code>)");case"start-from-zero":return"Начинаем с нулевого элемента массива";case"check-boundary":return e.idx<e.size?"[Попытка №".concat(e.idx+1,"] <code>").concat(e.idx," < ").concat(e.size,"</code>, значит, обработаны еще не все элементы, и искомое число может находиться дальше"):"<code>".concat(e.idx," == ").concat(e.size,"</code>, значит все элементы обработаны");case"check-found":return e.found?"<code>".concat(e.atIdx," == ").concat(e.arg,"</code> &mdash; искомое число найдено"):"<code>".concat(e.atIdx," != ").concat(e.arg,"</code> &mdash; искомое число еще не найдено");case"found-key":return"Поэтому возвращаем <code>True</code>";case"found-nothing":return"Искомое число <code>".concat(e.arg,"</code> не найдено, поэтому возвращаем значение<code>False</code>");case"next-idx":return"Переходим к следующему индексу: <code>".concat(e.idx,"</code> == <code>").concat(e.idx-1," + 1</code>")}},va=fn([[kn,[{labels:["simple_list"]},"data","idx"]]]),wa=fn([[kn,[{labels:[null]},"data"]]]);function Ea(e){var t=null==e.windowHeight;return l.createElement(wa,da({},e,{overflow:t}))}var xa=[["def build_no_collision_resolution(original_list):","start-execution",0],["    new_list = [None] * len(original_list)","create-new-list",1],["",""],["    for number in original_list:","for-loop",2],["        idx = number % len(new_list)","compute-idx",2],["        new_list[idx] = number","assign-elem",2],["    return new_list","return-created-list",1]],ka=[["def build_insert_all(original_list):","start-execution",0],["    new_list = [None] * (2 * len(original_list))","create-new-list",1],["",""],["    for number in original_list:","for-loop",2],["        idx = number % len(new_list)","compute-idx",2],["        while new_list[idx] is not None:","check-collision",3],["            idx = (idx + 1) % len(new_list)","next-idx",3],["        new_list[idx] = number","assign-elem",2],["    return new_list","return-created-list",1]],Ia=function(e){na(n,e);var t=ia(n);function n(){var e;return $o(this,n),(e=t.call(this))._overwritten=[],e}return ta(n,[{key:"run",value:function(e){var t,n=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.fmtIsBroken=r,this.originalList=new It.a(e),this.newList=new It.a,r&&(this.fmtMissingNumbers=new It.a,this.newListWithReplacements=new It.a),i?i=t:t=(r?1:2)*this.originalList.size;for(var o=0;o<t;++o)this.newList=this.newList.push(null),r&&(this.newListWithReplacements=this.newListWithReplacements.push(new It.a));this.addBP("create-new-list",!0);var a,s=Xo(this.originalList.entries());try{for(s.s();!(a=s.n()).done;){var l=Ko(a.value,2);if(this.originalListIdx=l[0],this.number=l[1],this.fmtCollisionCount=0,this.addBP("for-loop"),this.newListIdx=(this.number%this.newList.size+this.newList.size)%this.newList.size,this.addBP("compute-idx"),!r)for(;this.addBP("check-collision"),null!==this.newList.get(this.newListIdx);)this.fmtCollisionCount+=1,this.newListIdx=(this.newListIdx+1)%this.newList.size,this.addBP("next-idx");var c=this.newList.get(this.newListIdx);if(null!=c){if(!r)throw new Error("!isBroken and overwriting a number - this should not happen");this.fmtMissingNumbers=this.fmtMissingNumbers.push(c),this._overwritten.push([this.originalListIdx,c,this.number])}this.newList=this.newList.set(this.newListIdx,this.number),r&&(this.newListWithReplacements=this.newListWithReplacements.updateIn([this.newListIdx],(function(e){return e.insert(0,n.number)}))),this.newList=this.newList.set(this.newListIdx,this.number),this.addBP("assign-elem",!0)}}catch(e){s.e(e)}finally{s.f()}return this.addBP("return-created-list"),this.newList}},{key:"overwrittenNumbers",value:function(){return this._overwritten}}]),n}(nt),Ma=function(e,t){switch(e.point){case"create-new-list":return"Создаем новый массив из <code>".concat(e.newList.size,"</code> пустых ячеек");case"for-loop":return"[".concat(e.originalListIdx+1,"/").concat(e.originalList.size,"] Вставляем <code>").concat(e.number,"</code>");case"compute-idx":return"Вычисляем индекс ячейки: <code>".concat(e.newListIdx,"</code> == <code>").concat(e.number," % ").concat(e.newList.size,"</code>");case"check-collision":return hi(e.newList,e.newListIdx,e.fmtCollisionCount);case"next-idx":return"Продолжаем, индекс следующего элемента <code>".concat(e.newListIdx,"</code> == <code>(").concat(t.newListIdx," + 1) % ").concat(e.newList.size,"</code>");case"assign-elem":var n=t.newList.get(e.newListIdx);return null!=n?"Коллизия чисел <code>".concat(e.number,"</code> и <code>").concat(n,"</code> в ячейке с индексом <code>").concat(e.newListIdx,"</code> — значение перезаписано"):"Помещаем <code>".concat(e.number,"</code> в ячейку с индексом <code>").concat(e.newListIdx,"</code>");case"return-created-list":return e.fmtMissingNumbers&&e.fmtMissingNumbers.size>0?"Возвращаем созданный массив. Потеряны числа: ".concat(e.fmtMissingNumbers.map((function(e){return"<code>".concat(e,"</code>")})).join(", ")):"Возвращаем созданный массив со всеми исходными числами"}},ja=fn([[kn,[{labels:["original_list"]},"originalList","originalListIdx",void 0,{selection1color:"#13920b"}]],[wn,[{labels:["new_list"]},"newList","newListIdx",void 0]]]),Na=fn([[kn,[{labels:["original_list"]},"originalList","originalListIdx",void 0,{selection1color:"#13920b"}]],[En,[{labels:["new_list"]},"newListWithReplacements","newListIdx",void 0]]]),Ta=[["def has_number(new_list, number):","start-execution",0],["    idx = number % len(new_list)","compute-idx",1],["    while new_list[idx] is not None:","check-not-found",2],["        if new_list[idx] == number:","check-found",2],["            return True","found-key",2],["        idx = (idx + 1) % len(new_list)","next-idx",2],["    return False","found-nothing",1]],Oa=Object(p.a)((function(e){var t=e.children;e.tag;return l.createElement("span",{style:{opacity:y.jsLoaded?0:1,transition:"opacity 1s ease"}},t)})),Sa=function(e){na(n,e);var t=ia(n);function n(){return $o(this,n),t.apply(this,arguments)}return ta(n,[{key:"run",value:function(e,t){for(this.newList=new It.a(e),this.number=t,this.addBP("start-execution"),this.fmtCollisionCount=0,this.newListIdx=(this.number%this.newList.size+this.newList.size)%this.newList.size,this.addBP("compute-idx");this.addBP("check-not-found"),null!==this.newList.get(this.newListIdx);){if(this.addBP("check-found"),ht(this.newList.get(this.newListIdx),this.number))return this.addBP("found-key"),!0;this.fmtCollisionCount+=1,this.newListIdx=(this.newListIdx+1)%this.newList.size,this.addBP("next-idx")}return this.addBP("found-nothing"),!1}}]),n}(nt),Da=function(e){switch(e.point){case"start-execution":return"Ищем <code>".concat(e.number,"</code>");case"compute-idx":return"Вычисляем индекс ячейки: <code>".concat(e.newListIdx,"</code> == <code>").concat(e.number," % ").concat(e.newList.size,"</code>");case"check-not-found":return pi(e.newList,e.newListIdx,e.fmtCollisionCount);case"check-found":return ht(e.newList.get(e.newListIdx),e.number)?"Число найдено: <code>".concat(e.newList.get(e.newListIdx)," == ").concat(e.number,"</code>"):"Число пока не найдено: <code>".concat(e.newList.get(e.newListIdx)," != ").concat(e.number,"</code>");case"found-key":return"Теперь просто возвращаем <code>True</code>";case"found-nothing":return"Теперь просто возвращаем <code>False</code>";case"next-idx":return"Продолжаем, индекс следующего элемента <code>".concat(e.newListIdx,"</code>");case"return-created-list":return"Возвращаем созданный массив"}},Ca=fn([[wn,[{labels:["new_list"]},"newList","newListIdx"]]]);function Pa(e){var t,n,r=e.originalNumbers,i=e.addedNumber,o=Ko(e.overwrittenNumbers[0],3),a=o[0],s=o[1],c=o[2];if(s=Xe(s),c=Xe(c),null===i)n=!1,t=l.createElement(l.Fragment,null,"For example, ",l.createElement("code",null,s)," will get the same slot index (",l.createElement("code",null,a),") as ",l.createElement("code",null,c),", and it will be overwritten.");else{n=!0;var u=Xe(i);t=l.createElement(l.Fragment,null,"For the current list (",l.createElement("code",{dangerouslySetInnerHTML:{__html:"["+r.join(", ")+"]"}}),") it would work. But if we append a single number to it, for example ",l.createElement("code",null,u),", then ",l.createElement("code",null,s)," would get overwritten by ",l.createElement("code",null,c),", and the simple algorithm breaks.")}return l.createElement(W,null,l.createElement("p",{className:"dynamic-p",key:"oe-p-".concat(i,"-").concat(s,"-").concat(c,"-").concat(a,"-").concat(n?JSON.stringify(r):null)},"Would this approach work, however? Not entirely. ",t," Situations like these are called"," ",l.createElement("em",null,"collisions"),"."))}var Aa=function(){function e(){$o(this,e)}return ta(e,null,[{key:"createNew",value:function(e){var t=new Ia;return{keys:t.run(e),bp:t.getBreakpoints()}}},{key:"createNewBroken",value:function(e){var t=new Ia,n=t.run(e,!0);return{bp:t.getBreakpoints(),overwrittenNumbers:t.overwrittenNumbers(),keys:n}}},{key:"hasKey",value:function(e,t){var n=new Sa,r=n.run(e,t);return{bp:n.getBreakpoints(),result:r,keys:e}}},{key:"linearSearch",value:function(e,t){return function(e,t){var n={type:"breakpoint",arg:t,data:e,size:e.length},r=[],i=function(t,r,i){return ca(ca(ca({},n),{point:t,idx:r,atIdx:e[r]}),i)},o=0;for(r.push(i("start-from-zero",o));r.push(i("check-boundary",o)),!(o>=e.length);){if(ht(e[o],t))return r.push(i("check-found",o,{found:!0})),r.push(i("found-key",o)),{bp:r,result:!0};r.push(i("check-found",o,{found:!1})),o+=1,r.push(i("next-idx",o))}return r.push(i("found-nothing",o)),{bp:r,result:!1}}(e,t)}}]),e}();function za(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.3;return Math.random()>t?+re(e).toString():ne(Math.floor(-99.9),Math.floor(99.9))}var La=function(e){na(n,e);var t=ia(n);function n(){var e;return $o(this,n),ua(aa(e=t.call(this)),"runSimplifiedInsertAll",Object(Me.a)((function(e){return Aa.createNew(e)}))),ua(aa(e),"generateAlternativeDataForInsertAllBroken",Object(Me.a)((function(t){var n=e.runSimplifiedInsertAllBroken(t),r=n.bp,i=n.overwrittenNumbers;if(i.length>0)return{originalNumbers:t,numbers:t,bp:r,addedNumber:null,overwrittenNumbers:i};var o=ue.BigNumber.max.apply(ue.BigNumber,Zo(t)).plus(t.length+1),a=[].concat(Zo(t),[o]),s=e.runSimplifiedInsertAllBroken(a);return{originalNumbers:t,numbers:a,bp:r=s.bp,addedNumber:o,overwrittenNumbers:i=s.overwrittenNumbers}}))),ua(aa(e),"runProbingSimple",Object(Me.a)((function(e){var t=new Bo;return{links:t.run(e,"","i+1").links,bp:t.getBreakpoints()}}))),ua(aa(e),"runSimplifiedInsertAllBroken",Object(Me.a)((function(e){return Aa.createNewBroken(e)}))),ua(aa(e),"runSimplifiedSearch",Object(Me.a)((function(e,t){return Aa.hasKey(e,t)}))),ua(aa(e),"runSimpleListSearch",Object(Me.a)((function(e,t){return{bp:Aa.linearSearch(e,t).bp}}))),e.state={numbers:[Object(ue.BigNumber)(1),Object(ue.BigNumber)(56),Object(ue.BigNumber)(50),Object(ue.BigNumber)(2),Object(ue.BigNumber)(44),Object(ue.BigNumber)(25),Object(ue.BigNumber)(17),Object(ue.BigNumber)(4)],simpleSearchNumber:25,simplifiedHashSearchNumber:2},e}return ta(n,[{key:"render",value:function(){var e=this,t=this.runSimpleListSearch(this.state.numbers,this.state.simpleSearchNumber),n=this.generateAlternativeDataForInsertAllBroken(this.state.numbers),r=this.runSimplifiedInsertAll(this.state.numbers),i=this.runSimplifiedSearch(r.keys,this.state.simplifiedHashSearchNumber),o=this.runProbingSimple(8);return l.createElement("div",{className:"chapter chapter1"},l.createElement("h5",null,"Contents"),this.props.contents,l.createElement("h2",null,"Introduction"),l.createElement(J,null,l.createElement("p",null,"Hi! This is ",l.createElement("em",null,"an explorable explanation")," of Python dictionaries. This page is dynamic and interactive — you can plug in your data and see how the algorithms work on it."," ",l.createElement(Oa,null,"(Once the javascript loads)")),l.createElement("p",{className:"mb-2"},"To start with, let's say we have a simple list of distinct integers (change it if you want - the page will update):"),l.createElement(Br,da({input:Pr,inputProps:{allowDuplicates:!1,minSize:1,extraValueValidator:ya},initialValue:this.state.numbers,onChange:this.setter("numbers",!0),bottomBoundary:".chapter1"},this.props)),l.createElement("p",{className:"mb-0"},'Python lists are actually arrays — contiguous chunks of memory. The name "list" may be misleading to people who know about double-linked lists but are unfamiliar with Python. You can picture a Python list as a row of slots, where each slot can hold a Python object:'),l.createElement(Ea,{bp:{data:this.state.numbers},compensateTopPadding:25,windowWidth:this.props.windowWidth,windowHeight:this.props.windowHeight}),l.createElement("p",null,"To check if an element is present in a list, we can use the ",l.createElement("code",null,"in")," operator like this:"," ",l.createElement("code",{className:"text-nowrap"},"number in simple_list"),", which returns either"," ",l.createElement("code",null,"True")," or ",l.createElement("code",null,"False"),". Under the hood this short snippet does a linear scan. This can be a lot of work. To see this, let's reimplement it in Python."),l.createElement("div",{className:"div-p"},"Let's say we're looking for the following number in the original list:",l.createElement(ga,{inline:!0,value:this.state.simpleSearchNumber,onChange:this.setter("simpleSearchNumber"),anotherValue:function(){return za(e.state.numbers)}})),l.createElement(vn,da({code:fa,breakpoints:t.bp,formatBpDesc:ba,stateVisualization:va,autoplayByDefault:!0},this.props)),l.createElement("p",null,"(The visualization is interactive. The buttons allow you to step through the code. Notice here that the time slider is draggable - feel free to rewind the time or move it forward. Also, feel free to mess with the input and the original list - the visualization will update automatically)"),l.createElement("p",null,"What's not so great about linear scans? If we have a million distinct numbers, in the worst case scenario, we may need to scan the whole list. But scanning over a few elements is no big deal. We need to have some order and predictability to make the search fast. We need to have some idea of where the searched element is located."),l.createElement("p",null,"A Python dict implementation is basically a scan of a list (but a pretty weird scan). We'll build the actual algorithm and data structure inside Python dictionary step by step, starting with the code above, which is intentionally verbose."," "),l.createElement("h2",null,"Chapter 1: searching efficiently in a list"),l.createElement("p",null,"A Python dict is a collection of key-value pairs. And, the most important part of it is handling keys. Keys need to be organized in such a way that efficient searching, inserting and deleting is possible."),l.createElement("p",null,'In this chapter, to keep things simple, we won\'t have any values, and "keys" will just be plain integers. So, the simplified problem is to check if a number is present in a list, but we have to do this'," ",l.createElement("em",null,l.createElement("strong",null,"fast")),". We'll tackle the real problem in the following chapters. But for now, bear with me."),l.createElement("p",null,"Accessing a single element by index is very fast. Accessing only a few elements would be fast too. We don't want to be doing a linear scan over the whole list every time we look up a number, so we need to organize our data in a clever way."),l.createElement("p",null," Here's how. "),l.createElement("p",null,"Let's begin by creating a new list of slots. Each slot will either hold a number from the original list or be empty (empty slots will hold ",l.createElement("code",null,"None"),"). We'll use the number itself to compute an index of a slot. The simplest way to do this is to take the remainder of"," ",l.createElement("code",null,"number")," divided by ",l.createElement("code",null,"len(the_list)"),":"," ",l.createElement("code",{className:"text-nowrap"},"number % len(the_list)")," and put our number in slot with this index. To check if the number is there we could compute the slot index again and see if it is empty."),l.createElement(Pa,da({key:"overwritten-example-component"},n)),l.createElement(vn,da({code:xa,breakpoints:n.bp,formatBpDesc:Ma,stateVisualization:Na},this.props)),l.createElement("p",null,"To make this approach viable, we need to somehow ",l.createElement("em",null,"resolve collisions"),". Let's do the following: if the slot is already occupied by some other number, we'll just check the slot that comes right after it. And if that slot is empty, we'll put the number there. But, what if that slot is also occupied? Once again, we'll go ahead and check the next slot. We'll keep repeating this process until we finally hit an empty slot. This process is called ",l.createElement("em",null,"probing"),". And because we do it linearly, it is called ",l.createElement("em",null,"linear probing"),". In code, we would write this as"," ",l.createElement("code",{className:"text-nowrap"},"(idx + 1) % len(simple_list)"),", so it wraps around back to the beginning at the last index:"),l.createElement(_o,da({slotsCount:8,links:o.links,adjustTop:-70,fixedHeight:170},this.props)),l.createElement("p",null,"If we make the new list the same size as the original list, we'll have too many collisions. If we make it 10x larger, we'll have very few collisions, but we'll waste a lot of memory. So what size should it be? We want to hit the sweet spot where we don't use up too much memory but also don't have too many collisions. Twice the size of the original list is reasonable."),l.createElement("p",null,"Let's transform the original list using this method (when reading this code, keep in mind that"," ",l.createElement("code",null,"original_list")," is a list of ",l.createElement("em",null,"distinct numbers"),", so we don't need to handle duplicates just yet)."),l.createElement(vn,da({code:ka,breakpoints:r.bp,formatBpDesc:Ma,stateVisualization:ja},this.props)),l.createElement("p",null,"To search for a number, we retrace all the steps necessary to insert it: we start from the slot"," ",l.createElement("code",{className:"text-nowrap"},"number % len(new_list)")," and do linear probing. We either end up finding the number or hitting an empty slot. The latter situation means that the number is not present."),l.createElement("div",{className:"div-p"},"Let's say we want to search for",l.createElement(ga,{inline:!0,value:this.state.simplifiedHashSearchNumber,onChange:this.setter("simplifiedHashSearchNumber"),anotherValue:function(){return za(e.state.numbers,.4)}})),l.createElement(vn,da({code:Ta,breakpoints:i.bp,formatBpDesc:Da,stateVisualization:Ca},this.props)),l.createElement("p",null,"Calculating an index based on the value of the number and resolving collisions by linear probing is an incredibly powerful idea. What we've just implemented is a simple ",l.createElement("em",null,"hash table")," ","(more about the term in the next chapter). Python dict uses a hash table internally, albeit a more complex variant."),l.createElement("p",null,"We still haven't discussed adding more elements (what happens if a table overflows?), removing elements (removing an element without a trace would cause a hole to appear, wouldn't this cause the search algorithm to stop prematurely in many cases?), and perhaps most importantly, handling objects other than integers - strings, tuples, floats. We'll do this in the next chapters."),l.createElement("h6",null,"Collision resolution via separate chaining"),l.createElement("p",null,"There is a different method of collision resolution, called"," ",l.createElement("a",{href:"https://en.wikipedia.org/wiki/Hash_table#Separate_chaining",target:"_blank"},"separate chaining"),". It is also a good strategy which is commonly used. But that's not how Python resolves collision in dicts, so it is beyond the scope of this explanation."," "),l.createElement("h6",null,"A couple of the notes about the explanation"),l.createElement("p",null,"First, this explanation discusses ",l.createElement("code",null,"dict")," as it is implemented in"," ",l.createElement("a",{href:"http://python.org/",target:"_blank"},"CPython")," ",'— the "default" and most common implementation of the Python language (if you are not sure what implementation you use, it is almost certainly CPython). Some other implementations are'," ",l.createElement("a",{href:"https://pypy.org/",target:"_blank"},"PyPy"),","," ",l.createElement("a",{href:"http://www.jython.org/",target:"_blank"},"Jython")," ","and"," ",l.createElement("a",{href:"http://ironpython.net/",target:"_blank"},"IronPython"),". The way dicts works in each of these implementations may be similar to CPython (in the case of PyPy) or very different from CPython (in the case of Jython)."),l.createElement("p",null,"Second, even though dict in CPython is implemented in C, this explanation uses Python for code snippets. The goal of this page is to help you understand the algorithms and the underlying data structures, not the minutiae of the C code (these details are interesting too - they are just are beyond the scope of this explanation).")))}}]),n}(X),_a=n.p+"ritmo/8f3a2478a22cf33f2f58d49acf3809cb.png",Ba=n.p+"ritmo/787bb8c1d5d10718a32bb9b4538179a1.png",Ra=n.p+"ritmo/d45a8de13c5f2b9248090f49276b7765.png",Ua=n.p+"ritmo/7d5f2b276b02e4efdd03891cdf33e505.png",Ha=n.p+"ritmo/998e128feaa22e1a541678cb58dd82b0.png",Ya=n.p+"ritmo/5c2af084b23ddde9b4dbcc9de40ffd54.png",Wa=n.p+"ritmo/95c241e492c1e70e9932d136447d2aa2.png",Qa=n.p+"ritmo/7e5de526d0572fe08799db22a0886fd3.png",Fa=n.p+"ritmo/bf7b9c56d8ebc2c5caa2119a11400786.png",Va=fn([[wn,[{labels:[null]},"array","left","right"]]]),Ga=fn([[wn,[{labels:[null]},"a","j","jplus1"]]]),Za={label:"original_list",type:"array_int",id:"simplified-hash-original-list",default:"1 56 50 2 44 25 17 4"},Ka={label:"",type:"array_int",id:"sorts-list",default:"42 13 11 92 27 87 14 67 1 12 44 9 20 7"},Xa={label:"from_keys",type:"array",id:"hash-from-keys",default:"'uname' 'mv' 1 'time' -6 'ps' 'mkdir' 'less'"},Ja=new La,qa=new eo;var $a={bubble_sort:{mainPagePaneHeaderTitle:"Пузырьком",mainPagePaneClassName:"bubble-sort",playerHeaderTitle:"Сортировка пузырьком",mobilePlayerHeaderTitle:"Пузырьком",getBreakpoints:function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new fo;n.run(e,t);var r=n.getBreakpoints();return{bp:r}}(e.map((function(e){return e.toNumber()})),!0).bp},inputs:[Ka],formatBpDesc:function(e){switch(e.point){case"for-i":return"Делаем <code>".concat(e.i+1,"</code>-ю итерацию сортировки");case"swapped-false":return"На этой итерации элементы еще не меняли местами";case"for-j":return"Посмотрим на <code>".concat(e.j,"</code>-й элемент, <code>").concat(e.a.get(e.j),"</code>");case"compare":var t=e.a.get(e.j),n=e.a.get(e.j+1);return"<code>".concat(t," ").concat(yo(t,n)," ").concat(n,"</code>, сравниваем его с соседним");case"swap":return"Поменяем соседей местами";case"swapped-true":return"Запомним, что поменяли местами";case"check-swapped":return e.swapped?"На этой итерации мы делали обмены, поэтому продолжаем":"На этой итерации мы не сделали обменов, поэтому массив отсортирован";case"break-swapped":return"Выходим";case"end":return"Массив отсортирован"}},stateVisualization:Ga,code:po,resetToZero:!0,description:"Простой алгоритм сравнения и перестановки элементов до достижения правильного порядка.",img:_a,bg:"#D4B2FF",objectFit:"0 -22px",theory:l.createElement(Qo,null)},quick_sort:{mainPagePaneHeaderTitle:"Быстрая сортировка",mainPagePaneClassName:"quick-sort",playerHeaderTitle:"быструю сортировку",mobilePlayerHeaderTitle:"Быстрая",getBreakpoints:function(e){return function(e){var t=new go;t.run(e);var n=t.getBreakpoints();return console.log("quicksort bp",n),{bp:n}}(e.map((function(e){return e.toNumber()}))).bp},inputs:[Ka],formatBpDesc:function(e){switch(e.point){case"compare-size":var t=e.stop-e.start+1,n=t<=0?"пустой подмассив уже отсортирован":1===t?"".concat(e.recursionLevel>0?"под":"","массив из одного элемента уже отсортирован"):"сортируем ".concat(e.recursionLevel>0?"под":"","массив длины <code>").concat(t,"</code>");return"<code>".concat(e.start," ").concat(yo(e.start,e.stop)," ").concat(e.stop,"</code>: ").concat(n);case"return":return"Ничего делать не нужно — выходим";case"select-pivot":return"Выбираем элемент-разделитель: <code>".concat(e.pivot,"</code>");case"left-start":return"Левый указатель: <code>".concat(e.left,"</code>");case"right-stop":return"Правый указатель: <code>".concat(e.right,"</code>");case"while-left-right":var r=e.right-e.left+1,i=r<=0?"все элементы слева от разделителя меньше него, а все справа — больше":"остается обработать ".concat(r," ").concat(te(r,"элемент","элемента","элементов"));return"<code>".concat(e.left," ").concat(e.left<=e.right?"<=":">"," ").concat(e.right,"</code>: ").concat(i);case"while-left":var o=e.array.get(e.left),a=o<e.pivot?"элемент слева от разделителя уже меньше":"слева должны быть элементы меньше разделителя, а мы натолкнулись на ".concat(o===e.pivot?"равный":"больший"," элемент");return"<code>".concat(o," ").concat(yo(o,e.pivot)," ").concat(e.pivot,"</code>: ").concat(a);case"while-right":var s=e.array.get(e.right);console.log("While right",s,e.array,e.array.get(e.right));var l=s>e.pivot?"элемент справа от разделителя уже больше":"справа должны быть элементы больше разделителя, а мы натолкнулись на ".concat(s===e.pivot?"равный":"меньший"," элемент");return"<code>".concat(s," ").concat(yo(s,e.pivot)," ").concat(e.pivot,"</code>: ").concat(l);case"inc-left-first":case"inc-left-second":return"Сдвигаем левый указатель вправо на <code>".concat(e.left,"</code> элемент");case"dec-right-first":case"dec-right-second":return"Сдвигаем правый указатель влево на <code>".concat(e.right,"</code> элемент");case"compare-left-right":var c=e.right-e.left+1;return"<code>".concat(e.left," ").concat(yo(e.left,e.right)," ").concat(e.right,"</code>: еще ").concat(c," ").concat(te(c,"элемент","элемента","элементов")," для обработки");case"swap":return e.left===e.right?"Ничего не происходит: меняем элемент сам с собой":"Меняем местами элементы, на которые наткнулись: <code>".concat(e.array.get(e.right),"</code> и <code>").concat(e.array.get(e.left),"</code>");case"sort-left":return"Рекурсивно сортируем левый подмассив <code>".concat(e.start,"..").concat(e.right,"</code>");case"sort-right":return"Рекурсивно сортируем правый подмассив <code>".concat(e.left,"..").concat(e.stop,"</code>");case"exit":return e.recursionLevel>0?"Подмассив <code>".concat(e.start,"..").concat(e.stop,"</code> отсортирован. Выходим из рекурсии (текущая глубина: ").concat(e.recursionLevel,")"):"Весь массив отсортирован, выходим"}},stateVisualization:Va,code:[["def quicksort(a, start, stop):","",0],["    if start >= stop:","compare-size",1],["        return","return",2],["","",-1],["    pivot = a[(start + stop) // 2]","select-pivot",1],["    left = start","left-start",1],["    right = stop","right-stop",1],["","",-1],["    while left <= right:","while-left-right",2],["        while a[left] < pivot:","while-left",3],["            left += 1","inc-left-first",3],["        while a[right] > pivot:","while-right",3],["            right -= 1","dec-right-first",3],["        if left <= right:","compare-left-right",2],["            a[left], a[right] = a[right], a[left]","swap",3],["            left += 1","inc-left-second",3],["            right -= 1","dec-right-second",3],["    quicksort(a, start, right)","sort-left",1],["    quicksort(a, left, stop)","sort-right",1],["    ","exit",1]],resetToZero:!0,description:'Эффективный алгоритм сортировки, который использует стратегию "разделяй и властвуй". ',img:Ba,bg:"rgb(255 197 179)",objectFit:"0 -81px",theory:l.createElement(Fo,null)},simplified_hash_collisions:{mainPagePaneHeaderTitle:"Коллизии",mainPagePaneClassName:"simplified-hash-collisions",playerHeaderTitle:"коллизии в хеш-таблицах",code:xa,getBreakpoints:function(e){return Ja.runSimplifiedInsertAllBroken(e).bp},inputs:[Za],formatBpDesc:Ma,stateVisualization:Na,description:"Преобразование в один и тот же индекс массива",img:Ua,bg:"#B2BAFF",theory:l.createElement(Ro,null)},simplified_hash_create:{mainPagePaneHeaderTitle:"Создание",mainPagePaneClassName:"simplified-hash-create",playerHeaderTitle:"создание простейшей хеш-таблицы",code:ka,getBreakpoints:function(e){return Ja.runSimplifiedInsertAll(e).bp},inputs:[Za],formatBpDesc:Ma,stateVisualization:ja,description:"Включает несколько шагов",img:Ha,bg:"#C6FFB2",theory:l.createElement(Yo,{active:"simplified_hash_create"})},simplified_hash_search:{mainPagePaneHeaderTitle:"Поиск",mainPagePaneClassName:"simplified-hash-search",playerHeaderTitle:"поиск в простейшей хеш-таблице",code:Ta,getBreakpoints:function(e,t){var n=Ja.runSimplifiedInsertAll(e).keys;return Ja.runSimplifiedSearch(n,t).bp},inputs:[Za,{label:"number",type:"int",id:"simplified-hash-search-number",default:"25"}],formatBpDesc:Da,stateVisualization:Ca,description:"Основан на использовании хеш-функции для быстрого и эффективного доступа.",img:Ra,bg:"rgb(249 255 179)",objectFit:"3px -58px",theory:l.createElement(Yo,{active:"simplified_hash_search"})},hash_create:{mainPagePaneHeaderTitle:"Создание",mainPagePaneClassName:"hash-create",playerHeaderTitle:"создание хеш-таблицы",code:Ai,getBreakpoints:function(e){return qa.runCreateNew(e).bp},inputs:[Xa],formatBpDesc:Bi,stateVisualization:_i,description:"Включает несколько шагов",img:Ya,bg:"#B2DFFF",objectFit:"0 -53px",theory:l.createElement(Wo,null)},hash_search:{mainPagePaneHeaderTitle:"Поиск",mainPagePaneClassName:"hash-search",playerHeaderTitle:"поиск в хеш-таблице",code:Ri,getBreakpoints:function(e,t){var n=qa.runCreateNew(e),r=n.hashCodes,i=n.keys;return qa.runSearch(r,i,t).bp},inputs:[Xa,{label:"key",type:"int_str_none",id:"hash-search-key",default:"'less'"}],formatBpDesc:Ui,stateVisualization:Hi,description:"Для ключа элемента, который вы ищете, примените хеш-функцию",img:Wa,bg:"#B2FFFF",objectFit:"0",theory:l.createElement(Wo,null)},hash_remove:{mainPagePaneHeaderTitle:"Удаление",mainPagePaneClassName:"hash-remove",playerHeaderTitle:"удаление из хеш-таблицы",code:Wi,getBreakpoints:function(e,t){var n=qa.runCreateNew(e),r=n.hashCodes,i=n.keys;return qa.runRemove(r,i,t).bp},inputs:[Xa,{label:"key",type:"int_str_none",id:"hash-remove-key",default:"'ps'"}],formatBpDesc:Ui,stateVisualization:Hi,description:"Вычислите хеш-значение ключа элемента",img:Qa,bg:"rgb(178 255 214)",objectFit:"-15px -66px",theory:l.createElement(Wo,null)},hash_resize:{mainPagePaneHeaderTitle:"Расширение",mainPagePaneClassName:"hash-resize",playerHeaderTitle:"расширение хеш-таблицы",code:Fi,getBreakpoints:function(e){var t=qa.runCreateNew(e),n=t.hashCodes,r=t.keys;return qa.runResize(n,r).bp},inputs:[Xa],formatBpDesc:Gi,stateVisualization:Zi,description:"Массив который будет расширен",img:Fa,bg:"#E3F7FF",objectFit:"0 -1px",theory:l.createElement(Wo,null)}};function es(e){return(es="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ts(){return(ts=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ns(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,hs(r.key),r)}}function is(e,t,n){return t&&rs(e.prototype,t),n&&rs(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function os(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&as(e,t)}function as(e,t){return(as=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ss(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=us(e);if(t){var i=us(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ls(this,n)}}function ls(e,t){if(t&&("object"===es(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return cs(e)}function cs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function us(e){return(us=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hs(e){var t=function(e,t){if("object"!==es(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==es(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===es(t)?t:String(t)}function ds(){return{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight}}function ps(){window.visualViewport;var e=ds();e.width,e.height}var fs=function(e){os(n,e);var t=ss(n);function n(){var e,r,i,o;return ns(this,n),e=t.call(this),r=cs(e),o=function(){ps();var t=ds(),n=t.width,r=t.height;e.state.windowWidth===n&&e.state.windowHeight===r||(e.state.windowWidth!=n||e.state.windowHeight>r||r-e.state.windowHeight>0)&&(e.setState({windowWidth:n,windowHeight:r}),y.width===n&&y.height===r||y.setWH(n,r))},(i=hs(i="handleWindowSizeChange"))in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o,e.state={mounted:!1,windowWidth:null,windowHeight:null},e}return is(n,[{key:"componentDidMount",value:function(){var e=ds(),t=e.width,n=e.height;window.addEventListener("resize",i()(this.handleWindowSizeChange,500)),m.maxCodePlaySpeed=ee().MAX_CODE_PLAY_SPEED,this.setState({windowWidth:t,windowHeight:n,mounted:!0}),y.setAll(t,n,window.scrollY,!0)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleWindowSizeChange)}},{key:"render",value:function(){var e=this.state.mounted?this.state:{},t=e.windowWidth,n=e.windowHeight;return this.state.mounted?l.createElement(h.a,null,l.createElement(d.d,null,l.createElement(d.b,{path:"/lesson/:id"},l.createElement(ys,{windowWidth:t,windowHeight:n})),l.createElement(d.b,{path:"/"},l.createElement(gs,{windowWidth:t,windowHeight:n})))):l.createElement("div",null,"Loading...")}}]),n}(l.Component),ms=function(e){os(n,e);var t=ss(n);function n(){var e;return ns(this,n),(e=t.call(this)).state={navigatingPlayer:!1},e}return is(n,[{key:"render",value:function(){var e=this.props.id,t=$a[e];return this.state.navigatingPlayer?l.createElement(d.a,{to:"lesson/".concat(e)}):l.createElement(h.b,{to:"/lesson/".concat(e),className:"card",style:{backgroundColor:t.bg}},l.createElement("div",{className:"title"},t.mainPagePaneHeaderTitle),l.createElement("div",{className:"description"},t.description),l.createElement("img",{src:t.img,style:{objectPosition:t.objectFit||""}}))}}]),n}(l.Component),ys=Object(d.g)(function(e){os(n,e);var t=ss(n);function n(){return ns(this,n),t.apply(this,arguments)}return is(n,[{key:"render",value:function(){var e=this.props.match.params.id,t=this.props,n=t.windowWidth,r=t.windowHeight;return l.createElement(ui,ts({},$a[e],{windowWidth:n,windowHeight:r,lessonId:e}))}}]),n}(l.Component)),gs=function(e){os(n,e);var t=ss(n);function n(){return ns(this,n),t.apply(this,arguments)}return is(n,[{key:"render",value:function(){return l.createElement("div",{className:"fluid-body"},l.createElement("div",{className:"frontpage"},l.createElement("div",{className:"header"},l.createElement("h1",null,"Изучай сложные алгоритмы просто и понятно"),l.createElement("p",null,"Интерактивный учебник ",l.createElement("br",null)," с искусственным интеллектом")),l.createElement("h2",null,"Сортировки"),l.createElement("div",{className:"cards"},l.createElement(ms,{id:"bubble_sort"}),l.createElement(ms,{id:"quick_sort"})),l.createElement("h2",null,"Простейшие хеш-таблицы"),l.createElement("div",{className:"cards"},l.createElement(ms,{id:"simplified_hash_collisions"}),l.createElement(ms,{id:"simplified_hash_create"}),l.createElement(ms,{id:"simplified_hash_search"})),l.createElement("h2",null,"Хеш-таблицы с открытой адресацией"),l.createElement("div",{className:"cards",style:{marginBottom:"20px"}},l.createElement(ms,{id:"hash_create"}),l.createElement(ms,{id:"hash_search"}),l.createElement(ms,{id:"hash_remove"})),l.createElement("div",{className:"cards"},l.createElement(ms,{id:"hash_resize"})),l.createElement("div",{className:"call-to-action"},l.createElement("p",null,"Что это"),l.createElement("h1",null,"Визуализация алгоритмов по шагам с готовым кодом и AI коучем")),l.createElement("div",{className:"link-sterjest"},l.createElement("img",{src:o,alt:""}),l.createElement(h.b,{to:"/lesson/bubble_sort",className:"link-sterjest-link",children:"Начать"})),l.createElement("div",{className:"call-to-action"},l.createElement("p",null,"Как работает"),l.createElement("h1",null,"Всё что нужно ",l.createElement("br",null)," для обучения алгоритмам – ",l.createElement("br",null)," в одном месте")),l.createElement("div",{className:"parent"},l.createElement("div",{className:"div1 parent-card"},l.createElement("img",{src:a})),l.createElement("div",{className:"div2 parent-card",style:{backgroundColor:"#F9FFB2"}},l.createElement("div",{className:"title"},"Псевдо-код"),l.createElement("div",{className:"description"},"Каждый алгоритм при демонстрации работы подсвечивает конкретный участок, чтобы быстро понимать логику")),l.createElement("div",{className:"div3 parent-card",style:{backgroundColor:"#D4B3FF"}},l.createElement("div",{className:"title"},"Код"),l.createElement("div",{className:"description"},"Готовый и правильно написанный код можно скопировать, чтобы запустить и проверить работу"))),l.createElement("br",null),l.createElement("br",null),l.createElement("div",{className:"parent2"},l.createElement("div",{className:"div1 parent-card",style:{backgroundColor:"#B3E3FF"}},l.createElement("div",{className:"title"},"Решение"),l.createElement("div",{className:"description"},"Понятная и простая визуализация алгоритма для запоминания и лучшего понимания логики работы")),l.createElement("div",{className:"div2 parent-card",style:{backgroundColor:"#FFC5B3"}},l.createElement("div",{className:"title"},"AI-помощник"),l.createElement("div",{className:"description"},"Чат-бот всегда подскажет дополнительную информацию по теме и даже сгенерирует примеры с готовым кодом")),l.createElement("div",{className:"div3 parent-card"},l.createElement("img",{src:s}))),l.createElement("div",{className:"call-to-action2"},l.createElement("h1",null,"Проект развивается ",l.createElement("br",null)," как open-source решение и вы можете ему помочь!"),l.createElement("p",null,"Присоединяйтесь, как разработчик к репозиторию на GitHub и вносите свой вклад в развитие проекта")),l.createElement("a",{href:"https://github.com/long-sufferingritmo",className:"link-sterjest-link",children:"GitHub",style:{marginBottom:"400px"}}),l.createElement("div",{className:"footer",children:"Горыныч & Ко"})))}}]),n}(l.Component);"undefined"!=typeof window&&"undefined"!=typeof window&&(function(){var e=x.a.getParser(window.navigator.userAgent).parse().parsedResult,t=e.engine.name,n=e.os.name,r=e.platform.type,i=S({},$);switch(t){case"Blink":i.THROTTLE_SELECTION_TRANSITIONS=!1,i.THROTTLE_SELECTION_TIMEOUT=0;break;case"Gecko":switch(i.THROTTLE_SELECTION_TRANSITIONS=!0,n){case"Linux":i.THROTTLE_SELECTION_TIMEOUT=125;break;case"macOS":i.THROTTLE_SELECTION_TIMEOUT="transitionend";break;default:i.THROTTLE_SELECTION_TIMEOUT=275}break;case"EdgeHTML":i.THROTTLE_SELECTION_TRANSITIONS=!0,i.THROTTLE_SELECTION_TIMEOUT=250;break;case"WebKit":switch(i.THROTTLE_SELECTION_TRANSITIONS=!0,n){case"Linux":i.THROTTLE_SELECTION_TIMEOUT=150;break;case"macOS":i.THROTTLE_SELECTION_TIMEOUT="transitionend";break;default:i.THROTTLE_SELECTION_TIMEOUT=275}}switch(t){case"Blink":case"WebKit":i.TIME_SLIDER_THROTTLE_TIME=null,i.CODE_SCROLL_DEBOUNCE_TIME=150,i.MAX_CODE_PLAY_SPEED=16;break;case"Gecko":i.TIME_SLIDER_THROTTLE_TIME=null,i.CODE_SCROLL_DEBOUNCE_TIME=200}"mobile"===r&&(i.MAX_CODE_PLAY_SPEED=Math.min(i.MAX_CODE_PLAY_SPEED,8)),q=i,window.insidePythonDictBrowser=e}(),window.addEventListener("load",(function(){ps();var e=document.getElementById("root");u.a.render(l.createElement(fs,null),e)})))}},[[504,1,2]]]);
//# sourceMappingURL=main.7383412a730faaefd170.js.map