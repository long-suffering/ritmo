(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{273:function(e,t,n){},274:function(e,t,n){},490:function(e,t,n){},497:function(e,t,n){"use strict";n.r(t);var r=n(26),i=n.n(r),o=(n(273),n(274),n(5)),a=n.n(o),s=n(0),l=n(23),c=n.n(l),u=n(266),h=n(9),d=n(57),p=n(8),f=Object(p.k)({codePlaySpeed:1,maxCodePlaySpeed:8});f.setCodePlaySpeed=Object(p.d)((function(e){console.log("action setCodePlaySpeed",e),f.codePlaySpeed=e})),f.setMaxCodePlaySpeed=Object(p.d)((function(e){console.log("action setMaxCodePlaySpeed",e),f.maxCodePlaySpeed=e}));var m=Object(p.k)({width:null,height:null,scrollY:0,jsLoaded:!1});m.setAll=Object(p.d)((function(e,t,n,r){m.width=e,m.height=t,m.scrollY=n,m.jsLoaded=r})),m.setScrollY=Object(p.d)((function(e){m.scrollY=e})),m.setWH=Object(p.d)((function(e,t){console.log("setWH",e,t),m.width=e,m.height=t}));var y,g=n(241),b=n(242),v=n.n(b),w=n(243),E=n.n(w);function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function T(){return(T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e,t,n){return(t=C(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,C(r.key),r)}}function D(e,t,n){return t&&S(e.prototype,t),n&&S(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function C(e){var t=function(e,t){if("object"!==x(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===x(t)?t:String(t)}function P(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t)}function A(e,t){return(A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=B(e);if(t){var i=B(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _(this,n)}}function _(e,t){if(t&&("object"===x(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return z(e)}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var R=function(e){P(n,e);var t=L(n);function n(){return O(this,n),t.apply(this,arguments)}return D(n,[{key:"render",value:function(){return s.createElement(E.a,{transitionName:"cross-fade",transitionEnterTimeout:200,transitionLeaveTimeout:200},this.props.children)}}]),n}(s.Component),U=function(e){P(n,e);var t=L(n);function n(){var e;return O(this,n),j(z(e=t.call(this)),"HIGHLIGHT_TIMEOUT",1500),j(z(e),"removeHighlight",(function(){e.setState({highlight:!1})})),j(z(e),"updateHeight",(function(){var t=e.ref.current.getBoundingClientRect().height;e.setState({height:t})})),e.ref=s.createRef(),e.timeoutId=null,e.state={highlight:!1,key:null},e.resizeReaction=Object(p.l)((function(){return m.width}),(function(){return e.setState({height:void 0})})),e}return D(n,[{key:"render",value:function(){var e=a()("dynamic-p-inner-wrapper",{highlight:this.state.highlight});return s.createElement(V,null,s.createElement("div",{className:e,ref:this.ref,style:{minHeight:this.state.height}},s.createElement(R,null,this.props.children)),s.createElement("div",{style:{marginBottom:16}}))}},{key:"componentDidUpdate",value:function(){this.state.highlight&&(null!=this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout(this.removeHighlight,this.HIGHLIGHT_TIMEOUT)),this.updateHeight()}},{key:"componentDidMount",value:function(){this.updateHeight()}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.key,r=s.Children.only(e.children).key;if(n!==r){var i=null==n;return N(N({},t),{},{key:r,highlight:!i})}return null}}]),n}(s.PureComponent),H=Object(d.a)(y=function(e){P(n,e);var t=L(n);function n(){return O(this,n),t.apply(this,arguments)}return D(n,[{key:"render",value:function(){return s.createElement(Y,T({},this.props,{scrollY:m.scrollY}))}}]),n}(s.Component))||y,Y=function(e){P(n,e);var t=L(n);function n(){var e;return O(this,n),j(z(e=t.call(this)),"DEBOUNCE_TIMEOUT",500),j(z(e),"updateChildProps",(function(){var t=e.props.childProps;e.setState((function(e){return t!==e.childProps?{childProps:t}:null}))})),e.ref=s.createRef(),e.timeoutId=null,e.state={},e}return D(n,[{key:"render",value:function(){var e=this.state.childProps;return this.props.childFunc(e,this.ref)}},{key:"componentDidUpdate",value:function(){this.updateGeometry(),this.checkDebounceProps()}},{key:"componentDidMount",value:function(){this.updateGeometry(),this.checkDebounceProps()}},{key:"updateGeometry",value:function(){var e=this.ref.current.getBoundingClientRect(),t=e.height,n=window.scrollY+e.top;console.log("DebounceWhenOutOfView updateGeometry top",n),this.setState((function(e){return e.height!==t||e.top!==n?{height:t,top:n}:null}))}},{key:"checkDebounceProps",value:function(){this.timeoutId&&clearTimeout(this.timeoutId),this.props.childProps!==this.state.childProps&&(this.timeoutId=setTimeout(this.updateChildProps,this.DEBOUNCE_TIMEOUT))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n;if(null!=t.height&&null!=t.top){var r=t.top,i=t.top+t.height,o=e.windowHeight,a=e.scrollY;n=a-100<=r&&r<=a+o+100||a-100<=i&&i<=a+o+100}return null==n||null==t.isVisible||n||t.isVisible?{isVisible:n,childProps:e.childProps}:null}}]),n}(s.Component);function W(e){return e.split("\n").map((function(e,t){return[e,s.createElement("br",{key:"br-".concat(t)})]})).flat()}function Q(e){var t=e.componentStack,n=e.error;return s.createElement("div",{style:{backgroundColor:"pink"}},s.createElement("h3",{className:"text-danger"},"An error occured. This should not happen. Please file a bug report"," ",s.createElement("a",{href:"https://github.com/eleweek/inside_python_dict"},"on github")," "),s.createElement("p",null,W(n.message)),s.createElement("h6",{className:"text-danger"},"Component stack"),s.createElement("p",null,W(t)))}function V(e){return s.createElement(g.ErrorBoundary,{onError:function(e,t){console.error("ErrorBoundary caught error\n\n",e,"\n\n\nComponent stack",t)},FallbackComponent:Q},e.children)}function F(e){var t=[],n=0;return function(r){var i=n;t.push(r),setTimeout((function(){t.length>0&&i===n&&(e(t[t.length-1]),t=[],n++)}),0)}}var G=function(e){P(n,e);var t=L(n);function n(){var e;O(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return j(z(e=t.call.apply(t,[this].concat(i))),"setterFuncs",{}),e}return D(n,[{key:"setter",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!(e in this.setterFuncs)){var o=F(r?function(n){return t.setState((function(t){var r,i="".concat(e,"IdHack"),o=t[i];return o++,j(r={},e,n),j(r,i,o),r}))}:function(n){return t.setState(j({},e,n))});this.setterFuncs[e]=n?i()(o,50):o}return this.setterFuncs[e]}}]),n}(s.Component);function K(e){var t,n=e.children,r=[],i=[],o=function(){r.length>0&&(i.push(s.createElement("div",{className:"subcontainer",key:"subcontainer-".concat(i.length)},r)),r=[])},a=0,l=function(e){return e.type&&e.type.EXTRA_ERROR_BOUNDARY?s.createElement(V,{key:e.key||"subcontainerize-eb-".concat(++a)},e):e},c=k(n);try{for(c.s();!(t=c.n()).done;){var u=t.value;"string"!=typeof u.type&&void 0!==u.type&&u.type.FULL_WIDTH?(o(),i.push(l(u))):r.push(l(u))}}catch(e){c.e(e)}finally{c.f()}return o(),i}s.Component;var Z,X={TIME_SLIDER_THROTTLE_TIME:50,CODE_SCROLL_DEBOUNCE_TIME:200,THROTTLE_SELECTION_TRANSITIONS:!0,THROTTLE_SELECTION_TIMEOUT:150,MAX_CODE_PLAY_SPEED:8};function q(){return"undefined"!=typeof window&&Z?Z:X}function J(e,t,n,r){if(e<0)throw new Error("Negative number");var i=e%100;if(10<=i&&i<=20)return r;if(i%10==1)return t;var o=i%10;return 2<=o&&o<=4?n:r}function $(e,t){if(t<=e)throw new Error("randInt called with b (".concat(t,") <= a (").concat(e,")"));return e+Math.round(Math.random()*(t-e+1))}function ee(e){return e[Math.floor(Math.random()*e.length)]}function te(){return ee(ie)}var ne="abcdefghijklmnopqrstuvwxyz";function re(){return ee(ne)+ee(ne)+ee(ne)}var ie=["bash","cat","chmod","cp","date","df","echo","ed","expr","link","ls","mkdir","mv","ps","pwd","rm","rmdir","sh","sleep","test","zsh","alias","apply","at","atrm","awk","batch","bg","bzip2","cd","clear","cmp","curl","cut","diff","dig","du","egrep","env","ex","fg","file","find","grep","grn","gzip","head","iconv","less","make","more","nc","open","sed","sort","ssh","stat","sudo","tail","tar","tee","time","top","tr","uname","uniq","unzip","wc","whois","xxd","yes"],oe=n(58),ae=n.n(oe),se=n(71),le=n.n(se),ce=n(73),ue=n.n(ce),he=n(244),de=n.n(he),pe=n(245),fe=n.n(pe),me=n(12),ye=n(2),ge=n(146),be=n.n(ge),ve=n(246),we=n.n(ve),Ee=n(247),xe=n.n(Ee),ke=n(248),Me=n.n(ke),Te=(n(356),n(96)),Ie=n.n(Te),Ne=(n(205),n(97)),je=n.n(Ne);function Oe(e){return(Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Se(e,t){return(Se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function De(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Pe(e);if(t){var i=Pe(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ce(this,n)}}function Ce(e,t){if(t&&("object"===Oe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Pe(e){return(Pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ae(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Le(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Le(e,t){if(e){if("string"==typeof e)return _e(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_e(e,t):void 0}}function _e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,He(r.key),r)}}function Re(e,t,n){return t&&Be(e.prototype,t),n&&Be(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ue(e,t,n){return(t=He(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function He(e){var t=function(e,t){if("object"!==Oe(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Oe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Oe(t)?t:String(t)}function Ye(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("number"==typeof e)t=["int",e];else if("string"==typeof e)t=["string",e];else if(nt(e))t=["none"];else if(rt(e))t=["dummy"];else if(ye.BigNumber.isBigNumber(e))t=["bignumber.js",e.toFixed()];else{if(null!==e||!n)throw new Error("Unknown key: ".concat(JSON.stringify(e)));t=["jsnull",e]}return JSON.stringify(t)}function We(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("number"==typeof e||nt(e)||rt(e))return e.toString();if(ye.BigNumber.isBigNumber(e))return e.toFixed();if("string"==typeof e)return t?JSON.stringify(e):e;throw new Error("Unknown key: ".concat(JSON.stringify(e)))}var Qe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;ze(this,e),Ue(this,"SIZE",64),Ue(this,"JS_NUM_MAX_SIZE",32),this.JS_NUM_MAX_SIZE=32,this.data=[];for(var n=t>=0?0:1,r=0;r<this.JS_NUM_MAX_SIZE;++r){var i=t&1<<r?1:0;this.data.push(i)}for(var o=this.JS_NUM_MAX_SIZE;o<this.SIZE;++o)this.data.push(n)}return Re(e,[{key:"xor",value:function(e){for(var t=0;t<this.SIZE;++t)this.data[t]^=e.data[t];return this}},{key:"sign",value:function(){return 1==this.data[this.data.length-1]?-1:1}},{key:"inc",value:function(){this.data[0]+=1,this._carryOverAll()}},{key:"eq",value:function(e){for(var t=0;t<this.SIZE;++t)if(this.data[t]!=e.data[t])return!1;return!0}},{key:"add",value:function(e){for(var t=0,n=0;n<this.SIZE;++n)this.data[n]+=e.data[n]+t,t=this.data[n]/2|0,this.data[n]%=2;return this}},{key:"complement",value:function(){for(var e=0;e<this.SIZE;++e)this.data[e]=0==this.data[e]?1:0;return this}},{key:"mul",value:function(e){for(var t=[],n=0;n<this.SIZE;++n)t[n]=0;for(var r=0;r<this.SIZE;++r)if(0!==this.data[r])for(var i=0;i<this.SIZE-r;++i)t[r+i]+=this.data[r]*e.data[i];return this.data=t,this._carryOverAll(),this}},{key:"toNumber",value:function(){for(var e=0,t=0;t<32;++t)this.data[t]&&(e|=1<<t);return e}},{key:"toStringDestroying",value:function(){var e=this.sign();e<0&&this.complement().inc();for(var t=[1],n=[0],r=0;r<this.SIZE;++r){var i=0;if(this.data[r])for(var o=0;o<t.length;++o)o>=n.length&&n.push(0),n[o]+=t[o]+i,i=n[o]/10|0,n[o]%=10;i&&n.push(i),i=0;for(var a=0;a<t.length;++a)t[a]=2*t[a]+i,i=t[a]/10|0,t[a]%=10;i&&t.push(i)}this.data=null;var s=[];e<0&&s.push("-");for(var l=n.length-1;l>=0;l--)s.push(String.fromCharCode("0".charCodeAt(0)+n[l]));return s.join("")}},{key:"_carryOverAll",value:function(){for(var e=0,t=0;t<this.SIZE;++t)this.data[t]+=e,e=this.data[t]/2|0,this.data[t]%=2}}]),e}();function Ve(e){for(var t=new Qe(e.charCodeAt(0)<<7),n=new Qe(1000003),r=0;r<e.length;++r)t.mul(n).xor(new Qe(e.charCodeAt(r)));return t.xor(new Qe(e.length)),t.eq(new Qe(-1))?"-2":t.toStringDestroying()}function Fe(e){return Ve(e)}function Ge(e){var t=Object(ye.BigNumber)(2).pow(30),n=t,r=Object(ye.BigNumber)(2).pow(61).minus(1),i=Object(ye.BigNumber)(0),o=1;e.lt(0)&&(o=-1,e=e.negated());for(var a=[];e.gt(0);){var s=e.mod(n);e=e.idiv(n),a.push(s)}var l,c=Ae(a.reverse());try{for(c.s();!(l=c.n()).done;){var u=l.value;i=i.times(t).plus(u).modulo(r)}}catch(e){c.e(e)}finally{c.f()}return o<0&&(i=i.negated()),i.gte(Object(ye.BigNumber)(2).pow(63))&&(i=Object(ye.BigNumber)(2).pow(64).minus(i)),i.eq(-1)&&(i=Object(ye.BigNumber)(-2)),i}function Ke(e){if("string"==typeof e)return Object(ye.BigNumber)(Fe(e));if("number"==typeof e)return Ge(Object(ye.BigNumber)(e));if(ye.BigNumber.isBigNumber(e))return Ge(e);if(nt(e))return Object(ye.BigNumber)(e._hashCode);throw new Error("pyHash called with an object of unknown type: "+JSON.stringify(e))}var Ze=function(){function e(){ze(this,e),this._breakpoints=[],this._extraBpContext=null}return Re(e,[{key:"addBP",value:function(e){var t={point:e};for(var n in this)if("_"!==n[0]){var r=this[n];void 0!==r&&"function"!=typeof r&&(t[n]=r)}if(this._extraBpContext)for(var i in this._extraBpContext)t[i]=this._extraBpContext[i];this._breakpoints.push(t)}},{key:"setExtraBpContext",value:function(e){this._extraBpContext=e}},{key:"getBreakpoints",value:function(){return this._breakpoints}}]),e}();function Xe(e,t){return+e.mod(t).plus(t).mod(t).toString()}var qe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Se(e,t)}(n,e);var t=De(n);function n(){return ze(this,n),t.apply(this,arguments)}return Re(n,[{key:"computeIdx",value:function(e,t){return Xe(e,t)}}]),n}(Ze),Je=function(){function e(){ze(this,e)}return Re(e,[{key:"toString",value:function(){return"DUMMY"}}]),e}(),$e=function(){function e(){ze(this,e),Ue(this,"_hashCode","-9223372036581563745")}return Re(e,[{key:"toString",value:function(){return"None"}}]),e}(),et=new Je,tt=new $e;function nt(e){return e instanceof $e}function rt(e){return e instanceof Je}function it(e,t){return ye.BigNumber.isBigNumber(e)&&(ye.BigNumber.isBigNumber(t)||"number"==typeof t)?e.eq(t):ye.BigNumber.isBigNumber(t)&&"number"==typeof e?t.eq(e):e===t}function ot(e){return(t=e).lt(0)?t.plus(Object(ye.BigNumber)(2).pow(64)):t;var t}function at(e){return e.idiv(Object(ye.BigNumber)(2).pow(5))}var st,lt=n(11),ct=n(36),ut=n(250),ht=n(251),dt=n(252),pt=n(253),ft=n(254),mt=n(255),yt=n(72),gt=n(4);function bt(e){return(bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var vt=["idx","status","boxSize","spacingX","spacingY","borderRadius"],wt=["individualSelectionsProps"],Et=["kvHack"];function xt(e){return function(e){if(Array.isArray(e))return It(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Tt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||Tt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Tt(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Tt(e,t){if(e){if("string"==typeof e)return It(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?It(e,t):void 0}}function It(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Nt(){return(Nt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jt(Object(n),!0).forEach((function(t){Dt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function St(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Dt(e,t,n){return(t=Lt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ct(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Lt(r.key),r)}}function At(e,t,n){return t&&Pt(e.prototype,t),n&&Pt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Lt(e){var t=function(e,t){if("object"!==bt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==bt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===bt(t)?t:String(t)}function _t(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zt(e,t)}function zt(e,t){return(zt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Bt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ht(e);if(t){var i=Ht(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Rt(this,n)}}function Rt(e,t){if(t&&("object"===bt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ut(e)}function Ut(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ht(e){return(Ht=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yt(e){var t=be.a.highlight("python",e).value;return we()().use(xe.a).stringify({type:"root",children:t})}function Wt(e){return s.createElement("pre",{className:"simple-code-block hl-left pl-2"},s.createElement("code",{dangerouslySetInnerHTML:{__html:Yt(e.children)}}))}be.a.registerLanguage("python",Me.a),lt.b.add(ut.faPlay),lt.b.add(ht.faStepForward),lt.b.add(dt.faStepBackward),lt.b.add(pt.faFastForward),lt.b.add(ft.faFastBackward),lt.b.add(mt.faPause),lt.b.add(yt.faRedoAlt);var Qt={boxGeometry:{boxSize:40,boxPadding:2,spacingX:1,spacingY:5,fontSize:12,borderRadius:10},labelFontSize:16},Vt={boxGeometry:{boxSize:30,boxPadding:1,spacingX:1,spacingY:4,fontSize:9,borderRadius:7.5},labelFontSize:12},Ft={boxGeometry:{boxSize:50,boxPadding:1,spacingX:1,spacingY:4,fontSize:15,borderRadius:12},labelFontSize:16};function Gt(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=(r+n)*e;return"translate3d(".concat(o,"px, ").concat(t,"px, ").concat(i,"px)")}function Kt(e){return Ye(e,!1)}var Zt=function(e){_t(n,e);var t=Bt(n);function n(){return Ct(this,n),t.apply(this,arguments)}return At(n,[{key:"render",value:function(){var e,t=this.props,n=t.extraClassName,r=t.idx,i=t.status,o=t.transitionDuration,l=t.color,c=t.boxSize,u=t.spacingX,h=t.borderRadius,d=this.props.yOffset||0,p=["active-box-selection",n,"active-box-selection-animated"];switch(i){case"removing":e=0;break;case"created":e=.15;break;case"adding":e=1}var f={opacity:e,transitionDuration:"".concat(o,"ms"),borderColor:l,width:c,height:c,borderRadius:h,transform:null!=r?Gt(r,d,c,u):void 0};return s.createElement("div",{ref:this.props.setInnerRef,className:a()(p),style:f})}}]),n}(s.PureComponent),Xt=function(e){_t(n,e);var t=Bt(n);function n(){var e;Ct(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Dt(Ut(e=t.call.apply(t,[this].concat(i))),"handleRef",(function(t){e.node=t})),Dt(Ut(e),"handleTransitionEnd",(function(t){e.props.onTransitionEnd(e.props.propsId)})),e}return At(n,[{key:"render",value:function(){var e=this.props,t=e.idx,n=e.status,r=e.extraClassName,i=e.yOffset,o=e.color,a=e.boxSize,l=e.spacingX,c=e.borderRadius;return s.createElement(Zt,{setInnerRef:this.handleRef,extraClassName:r,idx:t,status:n,yOffset:i,color:o,boxSize:a,spacingX:l,borderRadius:c,transitionDuration:this.props.transitionDuration})}},{key:"componentDidUpdate",value:function(){var e=this;this.props.onTransitionEnd&&this.node.addEventListener("transitionend",(function(){return e.handleTransitionEnd(e.props.propsId)}),{once:!0,capture:!1})}}]),n}(s.Component);function qt(e){var t=e.idx,n=e.status,r=e.boxSize,i=e.spacingX,o=e.spacingY,a=e.borderRadius,l=St(e,vt);return s.createElement(Jt,{idx:t,status:n,individualSelectionsProps:[Ot({key:0},l)],boxSize:r,borderRadius:a,spacingX:i,spacingY:o})}var Jt=function(e){_t(n,e);var t=Bt(n);function n(){var e;return Ct(this,n),Dt(Ut(e=t.call(this)),"TRANSITION_DURATION",500),Dt(Ut(e),"handleTransitionEnd",(function(t){t===e.state.epoch&&e.setState((function(e){return e.transitionRunning?{transitionRunning:!1}:null}))})),e.state={transitionRunning:!1,transitionStarting:!1,epoch:0},e}return At(n,[{key:"render",value:function(){var e=this,t=q().THROTTLE_SELECTION_TRANSITIONS,n=this.state,r=n.idx,i=n.status,o=this.props,a=o.individualSelectionsProps,l=St(o,wt);return a.map((function(n){return s.createElement(Xt,Nt({},n,l,{idx:r,status:i,transitionDuration:e.TRANSITION_DURATION,propsId:t&&e.state.epoch,onTransitionEnd:t&&e.handleTransitionEnd}))}))}},{key:"componentDidUpdate",value:function(){this.state.transitionRunning&&this.state.transitionStarting&&(this.setState((function(e){return{transitionStarting:!1}})),this.handleStartingTransition())}},{key:"handleStartingTransition",value:function(){var e=this,t=q().THROTTLE_SELECTION_TIMEOUT;t="number"!=typeof t?this.TRANSITION_DURATION+20:Math.min(this.TRANSITION_DURATION+20,t);var n=this.state.epoch;setTimeout((function(){n===e.state.epoch&&e.handleTransitionEnd(n)}),t)}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(q().THROTTLE_SELECTION_TRANSITIONS){if(t.transitionRunning||t.idx===e.idx&&t.status===e.status)return null;var n="adding"===t.status&&"adding"===e.status;return{idx:e.idx,status:e.status,transitionRunning:n,transitionStarting:n,epoch:t.epoch+1}}return{idx:e.idx,status:e.status}}}]),n}(s.Component),$t=function(e){_t(n,e);var t=Bt(n);function n(){return Ct(this,n),t.apply(this,arguments)}return At(n,[{key:"shortDisplayedString",value:function(e){var t,n="DUMMY"===e||"EMPTY"===e||""===e||"string"==typeof e&&/^[-+]?[0-9]+$/.test(e),r=n?8:12,i=We(e,!1);if(i.length<=r)t=[i];else{var o=n?3:4;t=4===o?[i.substring(0,o),s.createElement("br",{key:"br1"}),"⋯",s.createElement("br",{key:"br2"}),i.substring(i.length-o,i.length)]:[i.substring(0,o),"…",i.substring(i.length-o,i.length)]}return{shortenedValue:t,extraType:n,isEmpty:!1}}},{key:"render",value:function(){var e,t,n,r,i=this.props,o=i.value,l=i.idx,c=i.status,u=(i.extraStyleWhenAdding,i.removedOffset),h=i.createdOffset,d=i.boxSize,p=i.spacingX,f=i.fontSize,m=i.spacingY,y=i.borderRadius,g=i.boxPadding,b=(this.props.yRel||0)*(d+m),v=["box",{"box-animated":"removed"!==c&&"created"!==c}],w=[].concat(v);if(null!=o){var E,x=this.shortDisplayedString(o),k=x.shortenedValue,M=x.extraType,T={fontSize:.75*this.props.fontSize};E=1===k.length&&""===k[0]?s.createElement("span",{className:"box-content-extra-type",style:T},"(empty str)"):M?s.createElement("span",{className:"box-content-extra-type",style:T},"(str)"):null,v.push("box-full"),e=s.createElement("span",{className:"box-content"},k," ",E)}else v.push("box-empty");switch(c){case"removed":r="box-removed";break;case"removing":r="box-removing",t=null!=o?b-(null!=u?u:d):b;break;case"created":r="box-created",t=null!=o?b-(null!=h?h:d):b;break;case"adding":t=b,n=this.props.extraStyleWhenAdding}return v.push(r),w.push(r),s.createElement(s.Fragment,null,s.createElement("div",{style:Ot({transform:"removed"!==c?Gt(l,t,d,p,0):"translate(0px, 0px)",width:d,height:d,fontSize:f,lineHeight:"".concat(f,"px"),borderRadius:y,padding:g},n),className:a()(v)}),e&&s.createElement("div",{style:Ot({transform:"removed"!==c?Gt(l,t,d,p,5):"translate(0px, 0px)",width:d,height:d,fontSize:f,lineHeight:"".concat(f,"px"),borderRadius:y,padding:g},n),className:a()(w,"box-content-wrapper")},e))}}]),n}(s.PureComponent),en=function(e){_t(n,e);var t=Bt(n);function n(){return Ct(this,n),t.apply(this,arguments)}return At(n,[{key:"render",value:function(){var e=this.props,t=e.extraClassName,n=e.idx,r=e.status,i=e.color,o=e.boxSize,a=e.spacingX,l=e.spacingY,c=e.borderRadius,u=[{key:"".concat(t,"-hashCode"),extraClassName:t,color:i,yOffset:0},{key:"".concat(t,"-key"),extraClassName:t,color:i,yOffset:o+l},{key:"".concat(t,"-value"),extraClassName:t,color:i,yOffset:2*(o+l)}];return s.createElement(Jt,{individualSelectionsProps:u,idx:n,status:r,boxSize:o,spacingX:a,spacingY:l,borderRadius:c})}}]),n}(s.PureComponent),tn=function(e){_t(n,e);var t=Bt(n);function n(){return Ct(this,n),t.apply(this,arguments)}return At(n,[{key:"render",value:function(){for(var e,t=this.props,n=t.extraClassName,r=t.idx,i=t.status,o=(t.count,t.color),a=t.boxSize,l=t.spacingX,c=t.spacingY,u=t.borderRadius,h=[],d=0;d<this.props.count;++d)h.push({key:"".concat(n,"-").concat(d),extraClassName:n,color:o,yOffset:d*(a+c)});return s.createElement(Jt,(Dt(e={individualSelectionsProps:h,idx:r,status:i,boxSize:a,spacingX:l,spacingY:c},"spacingY",c),Dt(e,"borderRadius",u),e))}}]),n}(s.PureComponent),nn=Object(gt.c)({status:null,modId:null,box:null,value:null,group:null,id:null,idx:null,someProps:null}),rn=function(e){_t(n,e);var t=Bt(n);function n(){var e;return Ct(this,n),Dt(Ut(e=t.call(this)),"updateModIdForGC",(function(t){e.setState((function(e){var n=Math.max(e.gcModId,t);return n>e.gcModId?{gcModId:n}:null}))})),e.state={keyData:null,activeBoxSelection1:null,activeBoxSelection1status:null,activeBoxSelection2:null,activeBoxSelection2status:null,lastIdx:null,lastIdx2:null,needProcessCreatedAfterRender:!1,needReflow:!1,firstRender:!0,modificationId:0,lastBoxId:0,removingValueToGroupToKeyToId:null},e.ref=s.createRef(),e.gcTimeout=null,e}return At(n,[{key:"debugLogState",value:function(){n.staticDebugLogState(this.state)}},{key:"render",value:function(){var e=this;if(this.state.needGarbageCollection){var t=this.state.modificationId;setTimeout((function(){return e.updateModIdForGC(t)}),n.ANIMATION_DURATION_TIMEOUT)}var r,i=[],o=Mt(this.state.keyData.keys());try{for(o.s();!(r=o.n()).done;){var a=r.value;i.push(this.state.keyData.get(a).box)}}catch(e){o.e(e)}finally{o.f()}return i.sort((function(e,t){return e.key>t.key?1:e.key<t.key?-1:0})),this.state.activeBoxSelection1&&i.push(this.state.activeBoxSelection1),this.state.activeBoxSelection2&&i.push(this.state.activeBoxSelection2),s.createElement("div",{className:"hash-vis",style:{height:this.props.height},ref:this.ref},i)}},{key:"componentDidUpdate",value:function(){var e=this.ref.current;if(this.state.needReflow&&(!function(e){e?e&&e.scrollTop:console.error("Not reflowing non-existant node!")}(e),this.props.onExpectedWidthChange&&this.props.onExpectedWidthChange(),this.state.needProcessCreatedAfterRender||this.setState({needReflow:!1})),this.state.needProcessCreatedAfterRender){var t=performance.now();this.setState((function(e){var t,n=e.modificationId+1,r={},i=Mt(e.keyData.entries());try{for(i.s();!(t=i.n()).done;){var o=kt(t.value,2),a=o[0],l=o[1];"created"===l.status&&(r[a]={status:"adding",box:s.cloneElement(l.box,{status:"adding"}),modId:n})}}catch(e){i.e(e)}finally{i.f()}return{keyData:e.keyData.mergeDeep(r),needProcessCreatedAfterRender:!1,needReflow:!1,modificationId:n}})),console.log("BaseBoxesComponent.componentDidUpdate needProcessCreatedAfterRender==true timing",performance.now()-t)}}}],[{key:"markRemoved",value:function(e,t){var n=0,r={},i=e.gcModId;t&&(i=Math.max(i,t)),console.log("BaseBoxesComponent markRemoved",i);var o,a=Mt(e.keyData.entries());try{for(a.s();!(o=a.n()).done;){var l=kt(o.value,2),c=l[0],u=l[1];"removing"===u.status&&u.modId<=i&&(n++,r[c]={box:s.cloneElement(u.box,{status:"removed"}),status:"removed"})}}catch(e){a.e(e)}finally{a.f()}return n>0?(console.log("BaseBoxesComponent.markRemoved() removed",n),{keyData:e.keyData.mergeDeep(r),needReflow:!0,gcModId:i}):null}},{key:"getDerivedStateFromProps",value:function(e,t){var r=performance.now();if(!t.firstRender){var i=n.markRemoved(t);i&&(t=Ot(Ot({},t),i))}var o=t.modificationId+1,a=t.gcModId,l=e.selectionClass,c=e.boxFactory,u=e.boxGeometry,h=e.boxFontSizeOverride,d=Ot({},u);if(h&&(d.fontSize=h),!t.firstRender&&u!==t.boxGeometry){var p,f={},m=Mt(t.keyData.entries());try{for(m.s();!(p=m.n()).done;){var y=kt(p.value,2),g=y[0],b=y[1];f[g]={box:s.cloneElement(b.box,Ot({},d))}}}catch(e){m.e(e)}finally{m.f()}t=Ot(Ot({},t),{},{keyData:t.keyData.mergeDeep(f),boxGeometry:u})}var v,w=e.array,E=w,x=function(){if(on(w)){performance.now();w=w.toJS()}},k=t.lastBoxId,M=performance.now();if(console.log("BaseBoxesComponent::gdsp before update state timing",M-r),t.firstRender){x();for(var T={},I=e.getKeys(w),N=0;N<w.length;++N){var j,O=Mt(c(I[N],w[N]).entries());try{for(O.s();!(j=O.n()).done;){var S=kt(j.value,2),D=S[0],C=kt(S[1],2),P=C[0],A=C[1],L=A.value,_=(++k).toString(),z=s.createElement($t,Nt({idx:N,key:_,status:"adding"},u,A));T[P]=new nn({status:"adding",modId:o,box:z,id:_,group:D,value:L,someProps:A})}}catch(e){O.e(e)}finally{O.f()}}v={keyData:new gt.b(T),removingValueToGroupToKeyToId:new gt.b,firstRender:!1,needProcessCreatedAfterRender:!1,needGarbageCollection:!1,gcModId:-1,modificationId:o,lastBoxId:k,lastNextArray:w,epoch:e.epoch,boxGeometry:u}}else if(E!==t.lastNextArrayPreConversion){x(),w=w||[];var B,R=e.getKeys(w),U=t.removingValueToGroupToKeyToId.asMutable(),H={},Y=new Set(fe()(R)),W=!1,Q=Mt(t.keyData.entries());try{for(Q.s();!(B=Q.n()).done;){var V=kt(B.value,2),F=V[0],G=V[1];if(!Y.has(F)){var K=G.status;if("removing"!==K&&"removed"!==K){var Z=G.group,X=G.value,q=s.cloneElement(G.box,{status:"removing"});H[F]={status:"removing",modId:o,box:q},U.setIn([Ye(X,!0),Z,F],{id:G.id,idx:G.idx}),W=!0}}}}catch(e){Q.e(e)}finally{Q.f()}for(var J=function(e,t,n,r,i){$=!0,ee=!0;var a=(++k).toString(),l=s.createElement($t,Nt({idx:t,status:"created",key:a},d,n));H[e]=new nn({status:"created",id:a,box:l,modId:o,group:r,value:i,idx:t,someProps:n})},$=!1,ee=!1,te={},ne=0;ne<w.length;++ne){var re,ie=Mt(c(R[ne],w[ne]).entries());try{for(ie.s();!(re=ie.n()).done;){var oe=kt(re.value,2),ae=oe[0],se=kt(oe[1],2),le=se[0],ce=se[1],ue=ce.value,he=t.keyData.get(le);if(he){var de=he.status;if("adding"!==de||he.idx!==ne||he.someProps.yOffset!==ce.yOffset||he.someProps.yRel!==ce.yRel){var pe=he.box,me="removed"===de?"created":"adding";"created"===me&&($=!0,ee=!0);var ye=s.cloneElement(pe,Ot({idx:ne,status:me},ce));H[le]={box:ye,status:me,modId:o,idx:ne,someProps:ce},n.notSoDeepDel(U,[Ye(ue,!0),ae,le])}}else null!=ue?te[le]={value:ue,group:ae,idx:ne,someProps:ce}:J(le,ne,ce,ae,ue)}}catch(e){ie.e(e)}finally{ie.f()}}var ge={},be=[],ve=function(e,r,i,o,a){var s;if(a.size>1){var l,c=Mt(a.entries());try{for(c.s();!(l=c.n()).done;){var u=kt(l.value,2),h=u[0];if(u[1].idx===r){s=h;break}}}catch(e){c.e(e)}finally{c.f()}}null==s&&(s=a.keySeq().first()),ge[e]=t.keyData.get(s).box,n.notSoDeepDel(U,[Ye(i,!0),o,s]),be.push(s)};for(var we in te){var Ee=te[we],xe=U.getIn([Ye(Ee.value,!0),Ee.group]);xe&&ve(we,Ee.idx,Ee.value,Ee.group,xe)}for(var ke in te)if(!(ke in ge)){var Me=te[ke],Te=U.get(Ye(Me.value,!0));if(Te){var Ie=Te.keySeq().first(),Ne=Te.get(Ie);ve(ke,Me.idx,Me.value,Ie,Ne)}}for(var je in te){var Oe=te[je];if(je in ge){Oe.someProps.value;var Se=ge[je],De=Se.props.status,Ce=Se.key,Pe=Oe.idx,Ae="removed"===De?"created":"adding";"created"===Ae&&($=!0,ee=!0);var Le=s.cloneElement(Se,Ot({idx:Pe,status:Ae},Oe.someProps));H[je]=new nn({box:Le,idx:Pe,id:Ce,status:Ae,modId:o,group:Oe.group,value:Oe.value,someProps:Oe.someProps})}else J(je,Oe.idx,Oe.someProps,Oe.group,Oe.value)}var _e=t.keyData.mergeDeep(H);v={keyData:_e=_e.deleteAll(be),removingValueToGroupToKeyToId:U.asImmutable(),firstRender:!1,needProcessCreatedAfterRender:$,needReflow:ee,needGarbageCollection:W,modificationId:o,gcModId:a,lastBoxId:k,lastNextArrayPreConversion:E,epoch:e.epoch,boxGeometry:u}}if(!t.firstRender&&t.epoch!=e.epoch){var ze=null!=v?v:t,Be=n.garbageCollect(ze,a);Be&&(v=Ot(Ot({},ze),Be))}null==v&&(v=Ot({},t));var Re=t.activeBoxSelection1,Ue=t.activeBoxSelection2,He=t.activeBoxSelection1status,We=t.activeBoxSelection2status,Qe=function(t,n,r,i,o,a){null==i?o="removing":"created"!==o&&null==i||(o="adding");var c=null!=i?i:r;return t?[s.cloneElement(t,Ot({idx:c,status:o},u)),o]:[s.createElement(l,Nt({},e.selectionProps,{key:n,keyTemplate:n,extraClassName:n,idx:c,status:o,color:a},u)),o]};if(Re||null!=e.idx){var Ve=kt(Qe(Re,"active-box-selection-1",t.lastIdx,e.idx,He,e.selection1color||"#FF4136"),2);Re=Ve[0],He=Ve[1]}if(Ue||null!=e.idx2){var Fe=kt(Qe(Ue,"active-box-selection-2",t.lastIdx2,e.idx2,We,e.selection2color||"#0074D9"),2);Ue=Fe[0],We=Fe[1]}null!=e.idx?v.lastIdx=e.idx:v.lastIdx=t.lastIdx,null!=e.idx2?v.lastIdx2=e.idx2:v.lastIdx2=t.lastIdx2,v.activeBoxSelection1status=He,v.activeBoxSelection2status=We,v.activeBoxSelection1=Re,v.activeBoxSelection2=Ue;var Ge=performance.now()-r;return"undefined"!=typeof window&&("bbTiming"in window||(window.bbTiming=0),window.bbTiming+=Ge),console.log("BaseBoxesComponent.getDerivedStateFromProps timing",Ge),v}},{key:"notSoDeepDel",value:function(e,t){var n=kt(t,3),r=n[0],i=n[1],o=n[2],a=(e=e.deleteIn([r,i,o])).getIn([r,i]);void 0!==a&&0===a.size&&(0===(e=e.deleteIn([r,i])).get(r).size&&(e=e.delete(r)));return e}},{key:"garbageCollect",value:function(e,t){console.log("Boxes garbageCollect() older than",t);var r,i=performance.now(),o=[],a=e.removingValueToGroupToKeyToId.asMutable(),s=Mt(e.keyData.entries());try{for(s.s();!(r=s.n()).done;){var l=kt(r.value,2),c=l[0],u=l[1];if(("removing"===u.status||"removed"===u.status)&&u.modId<=t){o.push(c);var h=u.value,d=u.group;n.notSoDeepDel(a,[Ye(h,!0),d,c])}}}catch(e){s.e(e)}finally{s.f()}var p=null;return o.length>0&&(p={keyData:e.keyData.deleteAll(o),removingValueToGroupToKeyToId:a.asImmutable(),needGarbageCollection:!1}),console.log("Boxes garbageCollect() collected",o.length),p&&console.log("Non-trivial garbageCollect timing",performance.now()-i),p}},{key:"staticDebugLogState",value:function(e){console.log("~~~~~~~~~~~~~~~"),console.log("debugLogState()");for(var t=0,n=Object.entries(e);t<n.length;t++){var r=kt(n[t],2),i=r[0],o=r[1];console.log(i,null!=o&&"function"==typeof o.toJS?o.toJS():o),on(o)&&o.size>200&&console.warn("debugLogState(): ".concat(i," size is too big: ").concat(o.size))}console.log("~~~~~~~~~~~~~~~")}}]),n}(s.PureComponent);function on(e){return gt.a.isList(e)||gt.b.isMap(e)}function an(e,t){var n,r=e,i=Mt(t.split("."));try{for(i.s();!(n=i.n()).done;){var o=n.value;r=on(r)?r.get(o):r[o]}}catch(e){i.e(e)}finally{i.f()}return r}function sn(e,t){var n,r=null==t?void 0:t.fixedGeometry;return Dt(n=function(t){_t(i,t);var n=Bt(i);function i(){return Ct(this,i),n.apply(this,arguments)}return At(i,[{key:"render",value:function(){return s.createElement(cn,Nt({lines:e},this.props,{innerRef:this.props.innerRef,fixedGeometry:r}))}}],[{key:"getExpectedHeight",value:function(t,n){return cn._getExpectedHeight(t,n,e,r)}}]),i}(s.PureComponent),"FULL_WIDTH",!0),Dt(n,"EXTRA_ERROR_BOUNDARY",!0),n}function ln(e,t,n){var r,i=!1,o=Mt(n);try{for(o.s();!(r=o.n()).done;){var a=r.value;i=i||a[1][0].maxBoxSizeIsDefault}}catch(e){o.e(e)}finally{o.f()}return e>1e3&&!i?Ft:e>800?Qt:Vt}Dt(rn,"ANIMATION_DURATION_TIMEOUT",500);var cn=function(e){_t(n,e);var t=Bt(n);function n(){var e;return Ct(this,n),Dt(Ut(e=t.call(this)),"updateScrollbar",(function(){e.scrollbarRef.current.scrollbar.update()})),e.scrollbarRef=s.createRef(),e}return At(n,[{key:"render",value:function(){var e,t,r=this,i=this.props,o=[],a=[],l=!1,c=this.props.fixedGeometry||ln(i.windowWidth,i.windowHeight,this.props.lines),u=c.boxGeometry,h=c.labelFontSize,d=Mt(i.lines.entries());try{var p=function(){var t=kt(e.value,2),c=t[0],d=kt(t[1],2),p=d[0],f=kt(d[1],5),m=f[0],y=f[1],g=f[2],b=f[3],v=f[4],w=s.createElement(p,Nt({onExpectedWidthChange:r.updateScrollbar,array:an(i.bp,y),idx:i.bp[g],idx2:i.bp[b],epoch:i.epoch,boxGeometry:u},v)),E=m.marginBottom||n.VIS_MARGIN,x=p.getExpectedGeometry(Ot({boxGeometry:u},v)),k=x.rowMarginBottom,M=x.rowHeight,T=x.height,I=x.rowsNumber;l=l||!m.labels.every((function(e){return null==e})),a=a.concat(m.labels.map((function(e,t){var n=t===m.labels.length-1?E:k,r=I,i=m.labels.length;if(i!=r&&1!=i)throw new Error("Mismatched number of labels");return s.createElement("div",{className:"tetris-label-div",key:e,style:{fontSize:h,height:i===r?M:T,marginBottom:n}},s.createElement("span",{className:"tetris-label"},e||""))}))),o.push(s.createElement("div",{className:"tetris-row",key:"row-".concat(c),style:{marginBottom:E}},s.createElement("div",{className:"hash-vis-wrapper",style:{height:T}},w)))};for(d.s();!(e=d.n()).done;)p()}catch(e){d.e(e)}finally{d.f()}return this.props.compensateTopPadding&&this.props.compensateTopPadding>0&&(t={position:"relative",top:-this.props.compensateTopPadding}),s.createElement(je.a,{alwaysShowTracks:!0,style:t,ref:this.scrollbarRef},s.createElement("div",{className:"fix-animation",ref:this.props.innerRef,style:{overflowX:this.props.overflow&&"scroll"}},s.createElement("div",{className:"tetris"},l&&s.createElement("div",{className:"tetris-labels"},a),s.createElement("div",{className:"tetris-rows"},o))))}},{key:"componentDidUpdate",value:function(){this.updateScrollbar()}},{key:"componentDidMount",value:function(){this.updateScrollbar()}}],[{key:"_getExpectedHeight",value:function(e,t,n,r){var i=(r||ln(e,0,n)).boxGeometry;return.75*i.boxSize+this.VIS_MARGIN*(n.length-1)+de()(n.map((function(e){var t=kt(e,2),n=t[0],r=kt(t[1],5),o=(r[0],r[1],r[2],r[3],r[4]);return n.getExpectedGeometry(Ot({boxGeometry:i},o)).height})))}}]),n}(s.PureComponent);Dt(cn,"VIS_MARGIN",7);var un=function(e){_t(n,e);var t=Bt(n);function n(){var e;return Ct(this,n),Dt(Ut(e=t.call(this)),"_highlightLines",Object(me.a)((function(e){for(var t=[],n=Math.max.apply(Math,xt(e.map((function(e){var t=kt(e,2),n=t[0];t[1];return n.length})))),r=0;r<e.length;++r){var i=e[r][0],o=Yt(ue()(i,n));t.push(o)}return t}))),Dt(Ut(e),"updateScroll",(function(){var t=e.getScrollTopTarget(),n=t.scrollTopTarget,r=t.needsUpdating,i=e.ssRef.current.scrollbar;r&&i.scrollTo(i.offset.x,n,500)})),Dt(Ut(e),"updateScrollDebounced",le()(e.updateScroll,q().CODE_SCROLL_DEBOUNCE_TIME)),e.ssRef=s.createRef(),e}return At(n,[{key:"getCodeWithExplanationHtmlLines",value:function(e,t){performance.now();for(var n,r=this.props.code,i=this._highlightLines(r),o=[],l=!1,c=0;c<r.length;++c){var u=r[c][1],h="",d=u===t.point;if(l|=d,u in e){var p=e[u],f=p.bp,m=p.prevBp,y=null;if("function"==typeof this.props.formatBpDesc)y=this.props.formatBpDesc(f,m);else{var g,b=Mt(this.props.formatBpDesc);try{for(b.s();!(g=b.n()).done;){if(null!=(y=(0,g.value)(f,m)))break}}catch(e){b.e(e)}finally{b.f()}}if(null==y)throw new Error("Unknown bp type: "+u);y&&(h=s.createElement("span",{key:"explanation",className:"code-explanation",dangerouslySetInnerHTML:{__html:"     ".concat(y)}}),n=y)}var v=i[c],w=s.createElement("pre",{className:"code-line-container",key:"pre"},s.createElement("code",null,s.createElement("span",{dangerouslySetInnerHTML:{__html:v}})));o.push(s.createElement("div",{className:a()("line-with-annotation",d&&"current-line-highlight"),key:"line-".concat(c),style:{paddingTop:this.props.lineVerticalPadding,paddingBottom:this.props.lineVerticalPadding,lineHeight:1.15}},w,!this.props.withShortExplanation&&h))}if(!l)throw new Error('No line found corresponding to "'.concat(t.point));return{lines:o,highlightedExplanationContent:n}}},{key:"getVisibleBreakpoints",value:function(e){performance.now();var t,n={},r={},i=Mt(this.props.code);try{for(i.s();!(t=i.n()).done;){var o=kt(t.value,3),a=o[0],s=o[1],l=o[2];if(""!==a&&""!==s){if(void 0===l){r=null;break}r[s]=l}}}catch(e){i.e(e)}finally{i.f()}var c,u=null,h=Mt(this.props.breakpoints.entries());try{for(h.s();!(c=h.n()).done;){var d=kt(c.value,2),p=d[0],f=d[1];if(p>this.props.time)break;if(null==f.recursionLevel||f.recursionLevel===e.recursionLevel){if(console.log("BP",p,f),f.point in n){var m=r[f.point];for(var y in n)r[y]>=m&&delete n[y]}n[f.point]={bp:f,prevBp:u},u=f}}}catch(e){h.e(e)}finally{h.f()}return n}},{key:"render",value:function(){var e=this.props.breakpoints[this.props.time],t=this.getVisibleBreakpoints(e),n=this.getCodeWithExplanationHtmlLines(t,e),r=n.lines,i=n.highlightedExplanationContent;return s.createElement(s.Fragment,null,s.createElement(je.a,{ref:this.ssRef,alwaysShowTracks:!0,className:"code-block-with-annotations-scrollbar-container"},this.props.mobileHeaderTitle&&s.createElement("div",{className:"mobile-header-title"},this.props.mobileHeaderTitle),s.createElement("div",{style:{maxHeight:this.props.height,lineHeight:this.props.lineHeight,overflowX:this.props.overflow&&"scroll",fontSize:this.props.fontSize},className:"code-block-with-annotations fix-animation"},r)),this.props.withShortExplanation&&s.createElement("div",{className:"mobile-short-explanation",dangerouslySetInnerHTML:{__html:i}}))}},{key:"getScrollTopTarget",value:function(){var e,t=this.ssRef.current.scrollbar,n=this.props.code.length,r=0,i=this.props.breakpoints[this.props.time],o=Mt(this.props.code.entries());try{for(o.s();!(e=o.n()).done;){var a=kt(e.value,2),s=a[0],l=kt(a[1],2);l[0];l[1]===i.point&&(r=s)}}catch(e){o.e(e)}finally{o.f()}if(!t.size)return{scrollTopTarget:null,needsUpdating:!1};var c=t.size.content.height,u=t.scrollTop,h=t.getSize().container.height,d=c/n,p=r/n*c,f=p-h/2;return f<0?f=0:f>c&&(f=c),{scrollTopTarget:f,needsUpdating:p<u+1.2*d||p>u+h-2*d}}},{key:"componentDidUpdate",value:function(){this.updateScrollDebounced()}}]),n}(s.PureComponent),hn=Object(d.a)(st=function(e){_t(n,e);var t=Bt(n);function n(){var e;return Ct(this,n),Dt(Ut(e=t.call(this)),"AUTOPLAY_BASE_TIMEOUT",1e3),Dt(Ut(e),"handleSliderValueChange",(function(t){e.stop(),e.handleTimeChange(t)})),Dt(Ut(e),"handleTimeChange",(function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.setState((function(e){return{time:t,autoPlaying:r,userInteracted:e.userInteracted||n}})),e.props.handleTimeChange(t)})),Dt(Ut(e),"prevStep",(function(){if(e.stop(),e.props.time>0){var t=e.props.time-1;e.handleTimeChange(t)}})),Dt(Ut(e),"nextStep",(function(){if(e.stop(),e.props.time<e.props.maxTime){var t=e.props.time+1;e.handleTimeChange(t)}})),Dt(Ut(e),"firstStep",(function(){e.stop(),e.handleTimeChange(0)})),Dt(Ut(e),"lastStep",(function(){e.stop(),e.handleTimeChange(e.props.maxTime)})),Dt(Ut(e),"getAutoplayTimeout",(function(t){return e.AUTOPLAY_BASE_TIMEOUT/(t||f.codePlaySpeed)})),Dt(Ut(e),"autoPlayNextStep",(function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e.state.time<e.props.maxTime){var n=e.state.time+1;n<e.props.maxTime?(e.timeoutId=setTimeout(e.autoPlayNextStep,e.getAutoplayTimeout()),e.timeoutStarted=e.unixtimestamp()):e.timeoutId=null,e.handleTimeChange(n,t,n<e.props.maxTime)}})),Dt(Ut(e),"repeatPlay",(function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e.handleTimeChange(0,t,!0),e.timeoutId=setTimeout(e.autoPlayNextStep,e.getAutoplayTimeout()),e.timeoutStarted=e.unixtimestamp()})),Dt(Ut(e),"autoPlay",(function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e.props.time<e.props.maxTime?e.autoPlayNextStep(t):e.repeatPlay(t)})),Dt(Ut(e),"stop",(function(){null!=e.timeoutId&&(clearTimeout(e.timeoutId),e.timeoutId=null,e.timeoutStarted=null),!e.state.autoPlaying&&e.state.userInteracted||e.setState({autoPlaying:!1,userInteracted:!0})})),Dt(Ut(e),"setSpeed",(function(t){t!==f.speed&&(e.state.autoPlaying&&e.getAutoplayTimeout()-(e.unixtimestamp()-e.timeoutStarted)>e.getAutoplayTimeout(t)&&(clearTimeout(e.timeoutId),e.timeoutId=setTimeout(e.autoPlayNextStep,e.getAutoplayTimeout(t))),f.setCodePlaySpeed(t))})),e.state={time:null,autoPlaying:!1,speed:1,userInteracted:!1},e.timeoutId=null,e.timeoutStarted=null,e}return At(n,[{key:"unixtimestamp",value:function(){return(new Date).getTime()}},{key:"componentDidUpdate",value:function(){!this.state.autoPlaying&&this.timeoutId&&this.stop();var e=this.props.autoplayByDefault&&!this.state.userInteracted;!this.state.autoPlaying&&e&&this.autoPlay(!1)}},{key:"componentDidMount",value:function(){this.props.autoplayByDefault&&this.autoPlay(!1)}},{key:"render",value:function(){var e=this,t={};if(this.props.maxTime<25)for(var n=0;n<=this.props.maxTime;++n)t[n]="";var r=this.props.time,i=function(e,t){return s.createElement("button",{key:t,type:"button",className:a()("btn","btn-outline-dark","slider-controls-button"),onClick:e},s.createElement(ct.a,{key:"font-awesome-".concat(t),icon:t}))},o=[];if(o.push(i(this.firstStep,"fast-backward")),o.push(i(this.prevStep,"step-backward")),this.state.autoPlaying)o.push(i(this.stop,"pause"));else{var l=this.props.time===this.props.maxTime?"redo-alt":"play";o.push(i(this.autoPlay,l))}o.push(i(this.nextStep,"step-forward")),o.push(i(this.lastStep,"fast-forward"));for(var c=[],u=[.5,1,2,4,8,16],h=function(){var t=u[d];if(t>f.maxCodePlaySpeed)return"break";var n=t===f.codePlaySpeed,r=0===d?"Autoplay speed ".concat(t,"x"):"".concat(t,"x");c.push(s.createElement("label",{key:r,className:a()("btn","btn-outline-dark",{active:n})},s.createElement("input",{type:"radio",checked:n,onChange:function(){return e.setSpeed(t)}})," ",r))},d=0;d<u.length;++d){if("break"===h())break}return s.createElement(s.Fragment,null,s.createElement("div",{className:"row"},s.createElement("div",{className:"col-sm-12 col-md-12"},s.createElement("div",{className:"btn-toolbar slider-controls"},s.createElement("div",{className:"btn-group btn-group-sm mr-2 mb-1"},o),s.createElement("div",{className:"btn-group btn-group-sm btn-group-toggle mr-2 mb-1"},c)))),s.createElement("div",{className:"row slider-row fix-animation"},s.createElement("div",{className:"col-md-6 col-sm-12"},s.createElement(Ie.a,{marks:t,onChange:this.handleSliderValueChange,min:0,max:this.props.maxTime,value:r,dotStyle:{top:-1,height:12,width:12},handleStyle:{height:20,width:20,marginTop:-6},railStyle:{height:10},trackStyle:{height:10}}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.autoPlaying&&e.time===e.maxTime?Ot(Ot({},t),{},{autoPlaying:!1}):null}}]),n}(s.Component))||st,dn=function(e){_t(n,e);var t=Bt(n);function n(e){var r;Ct(this,n),Dt(Ut(r=t.call(this,e)),"handleTimeChange",(function(e){var t=e===r.props.breakpoints.length-1;r.setState({time:e,userAdjustedToMax:t})})),r.state={time:e.breakpoints.length-1,userAdjustedToMax:!0,breakpointsUpdatedCounter:0};var o=q().TIME_SLIDER_THROTTLE_TIME;return r.handleTimeChangeThrottled=null!=o?i()(r.handleTimeChange,q().TIME_SLIDER_THROTTLE_TIME):r.handleTimeChange,r}return At(n,[{key:"render",value:function(){var e=this.props.windowWidth,t=this.props.windowHeight,n=null==t,r=t&&t>450||n,i=this.props.breakpoints[this.state.time];console.log("VC time",this.state.time,i);var o,a=this.props.stateVisualization;if(t){var l=135+(this.props.windowHeight<850?50:0);(o=this.props.windowHeight-a.getExpectedHeight(e,t)-100-l)<225&&(o+=50),o=Math.max(o,r?125:90)}var c=this.props.keepTimeOnNewBreakpoints?this.state.userAdjustedToMax?this.props.breakpoints.length-1:Math.min(this.state.time,this.props.breakpoints.length-1):this.state.time;return s.createElement(V,null,s.createElement("div",{className:"visualized-code hl-left"},s.createElement(hn,{handleTimeChange:this.handleTimeChangeThrottled,time:c,maxTime:this.props.breakpoints.length-1,autoplayByDefault:this.props.autoplayByDefault}),s.createElement(H,{childProps:{bp:i,breakpoints:this.props.breakpoints,bpIdx:c,epoch:this.state.breakpointsUpdatedCounter},windowHeight:t,childFunc:function(r,i){return s.createElement(a,Nt({},r,{innerRef:i,windowWidth:e,windowHeight:t,overflow:n}))}}),this.props.comment,this.props.code&&s.createElement("div",{className:"row code-block-row fix-animation"},s.createElement("div",{className:"col"},s.createElement(un,{height:o,time:c,code:this.props.code,overflow:n,fontSize:r?12:9,lineHeight:r?1.15:.8,breakpoints:this.props.breakpoints,formatBpDesc:this.props.formatBpDesc})))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.breakpoints!==t.breakpoints?e.keepTimeOnNewBreakpoints?Ot(Ot({},t),{},{breakpoints:e.breakpoints,breakpointsUpdatedCounter:t.breakpointsUpdatedCounter+1}):Ot(Ot({},t),{},{breakpoints:e.breakpoints,time:e.breakpoints.length-1,breakpointsUpdatedCounter:t.breakpointsUpdatedCounter+1}):null}}]),n}(s.Component);Dt(dn,"FULL_WIDTH",!0),Dt(dn,"EXTRA_ERROR_BOUNDARY",!0);s.Component;var pn=function(e){_t(n,e);var t=Bt(n);function n(){return Ct(this,n),t.apply(this,arguments)}return At(n,[{key:"render",value:function(){var e=n.getExpectedGeometry(this.props).height;return s.createElement(rn,Nt({},this.props,{getKeys:n.getKeys,boxFactory:n.boxFactory,selectionClass:qt,height:e}))}}],[{key:"getExpectedGeometry",value:function(e){var t=e.boxGeometry,n=t.boxSize;return{height:n,rowHeight:n,rowMarginBottom:t.spacingY,rowsNumber:1}}},{key:"getKeys",value:function(e){for(var t=[],n=new mn,r=0;r<e.length;++r){var i=e[r];if(null!=i){var o=Kt(i),a=n.inc(0,o),s="".concat(o,"-").concat(a);t.push([s])}else t.push(["empty-".concat(r)])}return t}},{key:"boxFactory",value:function(e,t){return[[e[0],{value:t}]]}}]),n}(s.PureComponent),fn=function(e){_t(n,e);var t=Bt(n);function n(){return Ct(this,n),t.apply(this,arguments)}return At(n,[{key:"render",value:function(){var e=this.props.boxGeometry.boxSize,t=n.height(e);return s.createElement(rn,Nt({},this.props,{getKeys:n.getKeys,boxFactory:n.boxFactory,selectionClass:qt,height:t}))}}],[{key:"height",value:function(e){return(n.MAX_BOXES-.5)*e}},{key:"getExpectedGeometry",value:function(e){var t=e.boxGeometry,r=t.boxSize,i=t.spacingY;return{height:n.height(r),rowHeight:r,rowMarginBottom:i,rowsNumber:1}}},{key:"getKeys",value:function(e){return e.map((function(e,t){return 0!=e.length?e.slice(0,n.MAX_BOXES).map((function(e){return Kt(e)})):["empty-".concat(t)]}))}},{key:"boxFactory",value:function(e,t){return 0!=t.length?t.slice(0,n.MAX_BOXES).map((function(t,n){return[e[n],{value:t,yRel:.7*(n>0?1:0)+n,extraStyleWhenAdding:{opacity:1/Math.pow(2.5,n)},removedOffset:0===n?void 0:0,createdOffset:0===n?void 0:0}]})):[[e[0],{value:null}]]}}]),n}(s.PureComponent);Dt(fn,"MAX_BOXES",5);s.PureComponent;var mn=function(){function e(){Ct(this,e),this.counters=[]}return At(e,[{key:"inc",value:function(e,t){e===this.counters.length&&this.counters.push(new Map);var n,r=this.counters[e];return r.has(t)?(n=r.get(t),n++,r.set(t,n+1)):(n=0,r.set(t,0)),n}}]),e}(),yn=function(e){_t(n,e);var t=Bt(n);function n(){return Ct(this,n),t.apply(this,arguments)}return At(n,[{key:"render",value:function(){var e=n.getExpectedGeometry(this.props).height,t=this.props,r=t.kvHack,i=St(t,Et);return s.createElement(rn,Nt({},i,{getKeys:r?n.getKeysForKVPairs:n.getKeys,boxFactory:n.boxFactory,selectionClass:tn,selectionProps:{count:this.props.linesCount||1},height:e}))}}],[{key:"getKeys",value:function(e){var t,n=[],r=Mt(e.entries());try{for(r.s();!(t=r.n()).done;){var i=kt(t.value,2),o=(i[0],i[1]);Array.isArray(o)||(o=[o]);var a,s=[],l=new mn,c=Mt(o.entries());try{for(c.s();!(a=c.n()).done;){var u=kt(a.value,2),h=u[0],d=Kt(u[1]),p=l.inc(h,d),f="".concat(d,"-").concat(h,"-").concat(p);s.push(f)}}catch(e){c.e(e)}finally{c.f()}n.push(s)}}catch(e){r.e(e)}finally{r.f()}return n}},{key:"getKeysForKVPairs",value:function(e){for(var t=[],n=new mn,r=0;r<e.length;++r){var i=kt(e[r],2),o=i[0],a=i[1],s=Kt(o),l=n.inc(0,s),c=Kt(a);t.push(["".concat(s,"-").concat(l,"-key"),"".concat(s,"-").concat(l,"-").concat(c,"-value")])}return t}},{key:"boxFactory",value:function(e,t){return 1===e.length?[[e[0],{value:t}]]:ae()(e,t).map((function(e,t){var n=kt(e,2);return[n[0],{value:n[1],yRel:t}]}))}},{key:"getExpectedGeometry",value:function(e){var t=e.linesCount||1,n=e.boxGeometry,r=n.boxSize,i=n.spacingY;return{height:t*r+(t-1)*i,rowHeight:r,rowMarginBottom:i,rowsNumber:t}}}]),n}(s.PureComponent),gn=n(147),bn=n.n(gn),vn=n(256),wn=n.n(vn);function En(e){return(En="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xn(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=kn(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function kn(e,t){if(e){if("string"==typeof e)return Mn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Mn(e,t):void 0}}function Mn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Tn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,o=void 0,o=function(e,t){if("object"!==En(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==En(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===En(o)?o:String(o)),r)}var i,o}function In(e,t,n){return t&&Tn(e.prototype,t),n&&Tn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Nn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jn(e,t){if(t&&("object"===En(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function On(e){var t="function"==typeof Map?new Map:void 0;return(On=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return Sn(e,arguments,Pn(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Cn(r,e)})(e)}function Sn(e,t,n){return(Sn=Dn()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&Cn(i,n.prototype),i}).apply(null,arguments)}function Dn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Cn(e,t){return(Cn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Pn(e){return(Pn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var An=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Cn(e,t)}(i,e);var t,n,r=(t=i,n=Dn(),function(){var e,r=Pn(t);if(n){var i=Pn(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return jn(this,e)});function i(e,t){var n;Nn(this,i);var o="string"==typeof e,a=o?e:e.en;return(n=r.call(this,a)).pos=t,n.text=o?{en:a}:e,n}return In(i)}(On(Error)),Ln=function(){function e(t){Nn(this,e),this.s=t,this.pos=0}return In(e,[{key:"skipWhitespace",value:function(){for(;this.pos<this.s.length&&/\s/.test(this.s[this.pos]);)this.pos++}},{key:"current",value:function(){return this.s[this.pos]}},{key:"next",value:function(){return this.s[this.pos+1]}},{key:"isWhiteSpaceOrEol",value:function(e){return null==e||/\s/.test(e)}},{key:"isCurrentWhitespaceOrEol",value:function(){return this.isWhiteSpaceOrEol(this.current())}},{key:"consume",value:function(e){var t=this.current();null==t&&this.throwErr("Encountered unexpected EOL, expected ".concat(e),"Неожиданный конец данных, ожидается ".concat(e)),t!==e&&this.throwErr("Expected `".concat(e,"`, got `").concat(t,"`"),"Ожидается `".concat(e,"` вместо `").concat(t,"`")),this.pos++}},{key:"consumeWS",value:function(e){this.skipWhitespace(),this.consume(e)}},{key:"maybeConsume",value:function(e){this.current()===e&&this.consume(e)}},{key:"maybeConsumeWS",value:function(e){this.skipWhitespace(),this.maybeConsume(e)}},{key:"throwErr",value:function(e,t,n){var r=null!=n?n:this.pos;throw(r=Math.min(r,this.s.length-1))<0&&(r=0),new An({en:e,ru:t},r)}},{key:"_parseStringOrNumberOrNone",value:function(e,t,n){return this.isNextNone(e)?this._parseNoneOrThrowUnknownIdentifier(e):this._parseStringOrNumber(e,t,n)}},{key:"_parseStringOrNumber",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.skipWhitespace();var r=this.pos,i=this.current();return t&&("{"!==i&&"["!==i||this.throwErr("Nested lists and dictionaries are not supported. Only strings and ints are.","Вложенные списки и словари не поддерживаются"),null==i&&this.throwErr("Dict literal added abruptly - expected value","Неожиданный конец словаря")),"-+0123456789".includes(i)?{res:this.parseNumber(e),startPos:r}:"\"'".includes(i)?{res:this.parseString(),startPos:r}:void this.throwErr("Expected value - string, integer".concat(n?" or None":"",". If you wanted a string, wrap it in quotes"),"Ожидается строка или целое".concat(n?" или None":"",". Строки должны быть в кавычках."))}},{key:"parseDict",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=",:}";this.current();this.consumeWS("{");var n=[];for(this.skipWhitespace();"}"!==this.current();){null==this.current()&&this.throwErr("Dict literal ended abruptly - no closing }","Неожиданный конец словаря, нет закрывающей }");var r=this._parseStringOrNumberOrNone(t).res;this.consumeWS(":");var i=this._parseStringOrNumberOrNone(t).res;n.push([r,i]),this.skipWhitespace(),"}"!==this.current()&&null!=this.current()&&this.consume(",")}return this.consumeWS("}"),null!=e&&n.length<e&&(e>1?this.throwErr("There should be at least ".concat(e," pairs"),"Должно быть не меньше ".concat(e," пар")):this.throwErr("The data cannot be empty","Пустые данные")),n}},{key:"parseList",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=",]",i=this.current();console.log("parseList",i,this.s),this.maybeConsumeWS("[");var o=[];for(this.skipWhitespace();"]"!==this.current()&&null!=this.current();){var a=this._parseStringOrNumberOrNone(r),s=a.res,l=a.startPos;if(!e){var c,u=xn(o);try{for(u.s();!(c=u.n()).done;){var h=c.value;it(s,h)&&this.throwErr("Duplicates are not allowed in this list","В списке не должно быть дублированных значений")}}catch(e){u.e(e)}finally{u.f()}}if(n){var d=n(s);d&&this.throwErr(d.en,d.ru,l)}o.push(s),this.skipWhitespace(),"]"!==this.current()&&null!=this.current()&&this.maybeConsume(","),this.skipWhitespace()}return this.maybeConsumeWS("]"),null!=t&&o.length<t&&(t>1?this.throwErr("In this chapter, the list need to have length at least ".concat(t),"Список должен быть длиной не меньше ".concat(t)):this.throwErr("In this chapter, the list cannot be empty","Список не может быть пустым")),o}},{key:"parseNumber",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.skipWhitespace(),null==this.current()&&this.throwErr("Number can't be empty","Число не может быть пустым");for(var t=this.pos;"-+0123456789".includes(this.current());)this.pos++;"."===this.current()&&this.throwErr("Floats are not supported","Флоаты пока не поддерживаются"),"e"===this.current()&&this.throwErr("Floats in scientific notation are not supported","Флоаты пока не поддерживаются");var n="Non-decimal bases are not supported",r="Поддерживаются только числа в десятичной системе счисления";"x"===this.current()&&this.throwErr(n,r),this.isCurrentWhitespaceOrEol()||e&&e.includes(this.current())||this.throwErr("Invalid syntax: number with non-digit characters","В числе должны быть только цифры");var i=this.s.slice(t,this.pos);return"0"===i[0]&&i.length>1&&this.throwErr(n,r),isNaN(+i)&&this.throwErr("Invalid number","Невалидное число",t),Object(ye.BigNumber)(i)}},{key:"parseString",value:function(){this.skipWhitespace();var e=this.current();"'"!==e&&'"'!==e&&this.throwErr("String must be wrapped in quotation characters (either `'` or `\"`)","Строки должны быть в кавычках");var t=e;this.consume(t);this.pos;for(var n=[];null!=this.current()&&this.current()!==t;)"\\"===this.current()?("\\"!==this.next()&&'"'!==this.next()&&this.throwErr('The only supported escape sequences are for \\\\ and \\"',"Такие escape-последовательности не поддерживаются",this.pos+1),n.push(this.next()),this.pos+=2):(n.push(this.current()),this.pos++);return this.consume(t),n.join("")}},{key:"isNextNone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.skipWhitespace(),"None"===this.s.slice(this.pos,this.pos+4)&&(this.isWhiteSpaceOrEol(this.s[this.pos+4])||e.includes(this.s[this.pos+4]))}},{key:"_parseNoneOrThrowUnknownIdentifier",value:function(e){if(this.skipWhitespace(),this.isNextNone(e)){var t=this.pos;return this.pos+=4,{res:tt,startPos:t}}this.throwErr("Unknown identifier (if you wanted a string, wrap it in quotation marks - `\"` or `'`)","Строки должны быть в кавычках")}},{key:"checkTrailingChars",value:function(){this.skipWhitespace(),this.pos<this.s.length&&this.throwErr("Trailing characters","Лишние символы")}}]),e}();function _n(e,t){var n=t();return e.checkTrailingChars(),n}function zn(e){var t=new Ln(e);return _n(t,(function(){return t.parseString()}))}function Bn(e){var t=new Ln(e);return _n(t,(function(){return t.parseNumber()}))}function Rn(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0,i=new Ln(e);return _n(i,(function(){return i.parseList(t,n,r)}))}function Un(e){var t=new Ln(e);return _n(t,(function(){return t._parseStringOrNumberOrNone(null,!1,!0).res}))}function Hn(e){return nt(e)?"None":ye.BigNumber.isBigNumber(e)?e.toString():JSON.stringify(e)}function Yn(e){var t,n=[],r=xn(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n.push(Hn(i))}}catch(e){r.e(e)}finally{r.f()}return"["+n.join(", ")+"]"}var Wn=n(261),Qn=n.n(Wn),Vn=n(98),Fn=n(502),Gn=n(503),Kn=n(262),Zn=["inputComponentRef"],Xn=["inputComponentRef","extraValueValidator","allowDuplicates","minSize"],qn=["inputComponentRef"],Jn=["inputComponentRef"],$n=["inputComponentRef"],er=["bottomBoundary"];function tr(e){return(tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||rr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rr(e,t){if(e){if("string"==typeof e)return ir(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ir(e,t):void 0}}function ir(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function or(){return(or=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ar(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function sr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sr(Object(n),!0).forEach((function(t){br(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ur(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vr(r.key),r)}}function hr(e,t,n){return t&&ur(e.prototype,t),n&&ur(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function dr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pr(e,t)}function pr(e,t){return(pr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function fr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=gr(e);if(t){var i=gr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return mr(this,n)}}function mr(e,t){if(t&&("object"===tr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return yr(e)}function yr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gr(e){return(gr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function br(e,t,n){return(t=vr(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vr(e){var t=function(e,t){if("object"!==tr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==tr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===tr(t)?t:String(t)}lt.b.add(Kn.faUndoAlt),lt.b.add(yt.faRedoAlt);var wr=function(e){dr(n,e);var t=fr(n);function n(e){var r;return cr(this,n),br(yr(r=t.call(this,e)),"handleChange",(function(e){try{var t={valueRaw:e.target.value,lastError:r.state.error||r.state.lastError,error:null,value:r.props.parseValue(e.target.value),valueId:null!=r.props.valueId?r.props.valueId+1:null};r.setState(t),r.props.onChange(t.value,t.valueRaw)}catch(t){r.setState({valueRaw:e.target.value,lastError:t,error:t})}})),r.state={valueRaw:r.props.valueRaw||r.props.dumpValue(r.props.value),value:r.props.value,error:null,lastError:null},r.inputComponentRef=s.createRef(),r.lastScrollLeft=null,r}return hr(n,[{key:"forceSetValue",value:function(e){this.setState({valueRaw:this.props.dumpValue(e),value:e,valueId:null!=this.props.valueId?this.props.valueId+1:null})}}]),n}(s.Component),Er=function(e){dr(n,e);var t=fr(n);function n(){var e;cr(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return br(yr(e=t.call.apply(t,[this].concat(i))),"handleSelect",(function(){e.inputComponentRef.current.scrollLeft!==e.lastScrollLeft&&e.forceUpdate()})),br(yr(e),"measureCharWidth",(function(){for(var t=document.createElement("canvas").getContext("2d"),n="",r=0,i=["font-style","font-variant","font-weight","font-size","font-family"];r<i.length;r++){var o=i[r];n+=window.getComputedStyle(e.inputComponentRef.current,null).getPropertyValue(o)+" "}return t.font=n,t.measureText("qwerty1234567890asdfghzxcb").width/"qwerty1234567890asdfghzxcb".length})),e}return hr(n,[{key:"formatErrorMessage",value:function(e){var t=this.inputComponentRef.current,n=t.scrollLeft,r=t.clientWidth,i=this.charWidth,o=Math.ceil(n/i),a=Math.floor((n+r)/i),l=a-o,c=e.message,u=e.pos;this.lastScrollLeft=n;var h=u-o;return o<=u&&u<=a?c.length<h-1?ue()(c+" ",h,"-")+"^":c.length+h+5<l?bn()("",h," ")+"^--- "+c:[bn()("",h," ")+"^",s.createElement("br",{key:"br-sep"}),c]:u<o?"<--- "+c:ue()(c+" ",l-4,"-")+">"}},{key:"render",value:function(){var e;if(this.state.error){var t=this.inputComponentRef.current.offsetWidth-1,n=this.formatErrorMessage(this.state.error);e=s.createElement("div",{className:"invalid-feedback invalid-feedback-block-parsable-input",style:{width:t},key:"error-text"},n)}var r=a()("parsable-input","form-control","form-control-sm",{"is-invalid":!!e}),i=a()("parsable-input-with-error-div","parsable-input-block");return s.createElement("div",{className:i},s.createElement("input",{type:"text",className:r,value:this.state.valueRaw,onChange:this.handleChange,ref:this.inputComponentRef,onSelect:this.handleSelect,key:"input"}),e)}},{key:"componentDidMount",value:function(){this.charWidth=this.measureCharWidth()}}]),n}(wr),xr=function(e){dr(n,e);var t=fr(n);function n(){var e;cr(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return br(yr(e=t.call.apply(t,[this].concat(i))),"tryAnotherClick",(function(){var t,n,r=null===(t=e.state.anotherValue)||void 0===t?void 0:t.last;do{n=e.props.anotherValue(e.state,e.setState.bind(yr(e)))}while(n===r||n===e.state.valueRaw);e.setState({anotherValue:{last:n},valueRaw:e.props.dumpValue(n),valueId:e.props.valueId+1,value:n,error:null,lastError:e.state.error||e.state.lastError}),e.props.onChange(n)})),e}return hr(n,[{key:"render",value:function(){var e,t;return this.state.error&&(e=this.state.error.message),this.state.lastError&&(t=this.state.lastError.message),s.createElement(kr,{anotherValue:this.props.anotherValue,tryAnotherClick:this.tryAnotherClick,onChange:this.handleChange,errorText:e,lastErrorText:t,value:this.state.valueRaw})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return null!=e.valueId&&(null==t.valueId||t.valueId<e.valueId)?lr(lr({},t),{},{valueId:e.valueId,value:e.value,valueRaw:e.dumpValue(e.value),lastError:t.error||t.lastError,error:null}):null}}]),n}(wr),kr=function(e){dr(n,e);var t=fr(n);function n(){return cr(this,n),t.apply(this,arguments)}return hr(n,[{key:"render",value:function(){var e,t=this,n=this.props.errorText,r=this.props.lastErrorText;this.props.anotherValue&&(e=s.createElement("div",{className:"input-group-append",key:"try-another-button-div"},s.createElement("button",{className:"btn btn-secondary",type:"button",onClick:this.props.tryAnotherClick},"Try another")));var i=a()("parsable-input","form-control","form-control-sm","fc-inline",{"mr-0":!!this.props.tryAnotherClick,"is-invalid":!!n}),o=a()("parsable-input-with-error-div","inline-block","parsable-input-inline");return s.createElement("div",{className:o},s.createElement(Vn.c,null,s.createElement(Fn.a,null,(function(n){var r=n.ref;return s.createElement("div",{className:"input-group input-group-sm"},s.createElement("input",{ref:r,type:"text",className:i,value:t.props.value,onChange:t.props.onChange,key:"input"}),e)})),s.createElement(Gn.a,{placement:"bottom"},(function(e){var t=e.ref,i=e.style,o=e.placement,l=e.arrowProps;return s.createElement("div",{ref:t,style:i,"data-placement":o,className:a()("popover","bs-popover-bottom",n?"show":"hide","fade")},s.createElement("div",{className:"arrow",ref:l.ref,style:l.style}),s.createElement("div",{className:"popover-body"},n||r))}))))}}]),n}(s.Component),Mr=function(e){dr(n,e);var t=fr(n);function n(){return cr(this,n),t.apply(this,arguments)}return hr(n,[{key:"render",value:function(){return s.createElement(Qn.a,{minWidth:140,type:"text",className:"parsable-input-autosize",value:this.state.valueRaw,onChange:this.handleChange})}}]),n}(wr);function Tr(e){var t=e.inputComponentRef,n=ar(e,Zn);return e.autogrowing?s.createElement(Mr,or({ref:t},n)):e.inline?s.createElement(xr,or({ref:t},n)):s.createElement(Er,or({ref:t},n))}function Ir(e){var t=e.inputComponentRef,n=e.extraValueValidator,r=e.allowDuplicates,i=e.minSize,o=ar(e,Xn);return s.createElement(Tr,or({},o,{dumpValue:Yn,parseValue:function(e){return Rn(e,r,i,n)},inputComponentRef:t}))}function Nr(e){return ye.BigNumber.isBigNumber(e)||"number"==typeof e||nt(e)?e.toString():JSON.stringify(e)}function jr(e){var t=e.inputComponentRef,n=ar(e,qn);return s.createElement(Tr,or({},n,{dumpValue:Nr,parseValue:Bn,inputComponentRef:t}))}function Or(e){var t=e.inputComponentRef,n=ar(e,Jn);return s.createElement(Tr,or({},n,{dumpValue:Nr,parseValue:zn,inputComponentRef:t}))}function Sr(e){var t=e.inputComponentRef,n=ar(e,$n);return s.createElement(Tr,or({},n,{dumpValue:Nr,parseValue:Un,inputComponentRef:t}))}var Dr=function(e){dr(n,e);var t=fr(n);function n(){var e;return cr(this,n),(e=t.call(this)).wrapperRef=s.createRef(),e.state={height:null},e}return hr(n,[{key:"render",value:function(){var e=this.props,t=e.bottomBoundary,n=ar(e,er),r=(this.props.windowWidth&&this.props.windowWidth,this.props.windowHeight&&this.props.windowHeight>450),i=this.props.windowWidth&&this.props.windowHeight&&1.7*this.props.windowHeight>this.props.windowWidth;return s.createElement("div",{className:"my-sticky-outer-outer-wrapper-this-time-really"},s.createElement("div",{style:{height:this.state.height?this.state.height+10:void 0,paddingBottom:this.state.height?void 0:10}},s.createElement(wn.a,{innerZ:10,bottomBoundary:t,enabled:r||i},s.createElement("div",{className:"my-sticky-wrapper",ref:this.wrapperRef},s.createElement(Cr,n)))))}},{key:"updateHeight",value:function(){var e=this.wrapperRef.current.offsetHeight;e!==this.state.height&&this.setState({height:e})}},{key:"componentDidMount",value:function(){this.updateHeight()}},{key:"componentDidUpdate",value:function(){this.updateHeight()}}]),n}(s.Component);br(Dr,"FULL_WIDTH",!0),br(Dr,"EXTRA_ERROR_BOUNDARY",!0);var Cr=function(e){dr(n,e);var t=fr(n);function n(){var e;return cr(this,n),br(yr(e=t.call(this)),"setInputComponentRef",(function(t){e.inputComponentRef=t})),br(yr(e),"handleChange",(function(t){e.state.instantUpdates?e._updateStack(t)&&e.props.onChange(t):e.setState({value:t})})),br(yr(e),"commitValueIfNecessary",(function(){e.state.value&&e.state.valuesStack.get(e.state.valuesStackIndex)!==e.state.value&&(e._updateStack(e.state.value),e.props.onChange(e.state.value))})),br(yr(e),"handleUpdateClick",(function(){e.commitValueIfNecessary()})),br(yr(e),"handleIUChange",(function(){e.setState({instantUpdates:!e.state.instantUpdates}),e.commitValueIfNecessary()})),br(yr(e),"handleUndoClick",(function(){var t=e.state.valuesStackIndex;if(t>0){t--;var n=e.state.valuesStack.get(t);e.props.onChange(n),e.inputComponentRef.forceSetValue(n),e.setState({valuesStackIndex:t,value:n})}})),br(yr(e),"handleRedoClick",(function(){var t=e.state.valuesStackIndex;if(t<e.state.valuesStack.size-1){t++;var n=e.state.valuesStack.get(t);e.props.onChange(n),e.inputComponentRef.forceSetValue(n),e.setState({valuesStackIndex:t,value:n})}})),e.state={valuesStack:new gt.a,valuesStackIndex:0,value:null,instantUpdates:!0},e.inputComponentRef=null,e}return hr(n,[{key:"hackyPossibleWorkingDeepEqual",value:function(e,t){if(e===t)return!0;if(ye.BigNumber.isBigNumber(e))return e.eq(t);if(Array.isArray(e)&&Array.isArray(t)){if(e.length!=t.length)return!1;var n,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=rr(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(ae()(e,t));try{for(r.s();!(n=r.n()).done;){var i=nr(n.value,2),o=i[0],a=i[1];if(!this.hackyPossibleWorkingDeepEqual(o,a))return!1}}catch(e){r.e(e)}finally{r.f()}return!0}return!1}},{key:"_updateStack",value:function(e){var t=this.state.valuesStack,n=this.state.valuesStackIndex;return!(!t.isEmpty()&&t.get(n)===e)&&(!this.hackyPossibleWorkingDeepEqual(t.get(n),e)&&(n=(t=t.slice(0,n+1).push(e)).size-1,this.setState({valuesStack:t,valuesStackIndex:n,value:e}),!0))}},{key:"render",value:function(){var e=this.props.input,t=this.state.valuesStack,n=this.state.valuesStackIndex,r=n,i=t.size-n-1,o=null==this.state.value||this.state.value===t.get(n)||this.hackyPossibleWorkingDeepEqual(this.state.value,t.get(n));return s.createElement("div",{className:"row row-block-input-toolbar"},s.createElement("div",{className:"col col-input"},s.createElement(e,or({},this.props.inputProps,{inputComponentRef:this.setInputComponentRef,value:this.props.initialValue,onChange:this.handleChange}))),s.createElement("div",{className:"col-auto col-buttons"},s.createElement("div",{className:"btn-toolbar"},s.createElement("div",{className:"form-check-inline form-check mr-2"},s.createElement("label",{className:"form-check-label"},s.createElement("input",{type:"checkbox",className:"form-check-input",checked:this.state.instantUpdates,onChange:this.handleIUChange}),"Instant updates")),s.createElement("div",{className:"btn-group btn-group-sm"},s.createElement("button",{type:"button",className:a()("btn","btn-primary",{invisible:this.state.instantUpdates}),onClick:this.handleUpdateClick,disabled:o},"Update")),s.createElement("div",{className:"btn-group btn-group-sm ml-3"},s.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.handleUndoClick,disabled:0===r},s.createElement(ct.a,{icon:"undo-alt"}),s.createElement("span",{className:"input-toolbar-button-label"}," Undo")," ",s.createElement("span",{className:"badge badge-light badge-undo-redo-count"},r)),s.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.handleRedoClick,disabled:0===i},s.createElement(ct.a,{icon:"redo-alt"}),s.createElement("span",{className:"input-toolbar-button-label"}," Redo")," ",s.createElement("span",{className:"badge badge-light badge-undo-redo-count"},i))))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.valuesStack.isEmpty()?{valuesStack:t.valuesStack.push(e.initialValue)}:null}}]),n}(s.Component);function Pr(e,t,n){return null==e.get(t)?function(e,t){return t>0?"После ".concat(t," ").concat(J(t,"коллизии","коллизий","коллизий"),", пустая ячейка (индекс <code>").concat(e,"</code>) найдена: ").concat(J(t,"коллизия","коллизии","коллизий")," успешно разрешена"):"Ячейка с индексом <code>".concat(e,"</code> пуста: разрешать коллизии не требуется")}(t,n):"[Попытка №".concat(n+1,"] Ячейка с индексом <code>").concat(t,"</code> занята: произошла коллизия")}var Ar=function(e,t){return null==e.get(t)};function Lr(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ar,i=n+1;return r(e,t)?0==n?"[Попытка №".concat(i,"] Ячейка с индексом <code>").concat(t,"</code> пуста, поэтому не входим в цикл"):"[Попытка №".concat(i,"] Ячейка с индексом <code>").concat(t,"</code> пуста, прекращаем цикл"):"[Попытка №".concat(i,"] Ячейка с индексом <code>").concat(t,"</code> занята, проверим ее")}var _r=n(264);function zr(e){return(zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Br(){return(Br=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Rr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ur(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rr(Object(n),!0).forEach((function(t){Hr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Hr(e,t,n){return(t=Zr(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||Qr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wr(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Qr(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Qr(e,t){if(e){if("string"==typeof e)return Vr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vr(e,t):void 0}}function Vr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Zr(r.key),r)}}function Kr(e,t,n){return t&&Gr(e.prototype,t),n&&Gr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Zr(e){var t=function(e,t){if("object"!==zr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==zr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===zr(t)?t:String(t)}function Xr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qr(e,t)}function qr(e,t){return(qr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Jr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ti(e);if(t){var i=ti(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return $r(this,n)}}function $r(e,t){if(t&&("object"===zr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ei(e)}function ei(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ti(e){return(ti=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}lt.b.add(_r.faTrashAlt);var ni=[["def create_new(from_keys):","start-execution",0],["    hash_codes = [EMPTY] * (2 * len(from_keys))","create-new-empty-hashes",1],["    keys = [EMPTY] * (2 * len(from_keys))","create-new-empty-keys",1],["","",-1],["    for key in from_keys:","for-loop",2],["        hash_code = hash(key)","compute-hash",2],["        idx = hash_code % len(keys)","compute-idx",2],["        while hash_codes[idx] is not EMPTY:","check-collision",3],["            if hash_codes[idx] == hash_code and \\","check-dup-hash",3],["               keys[idx] == key:","check-dup-key",3],["                break","check-dup-break",4],["            idx = (idx + 1) % len(keys)","next-idx",3],["","",-1],["        hash_codes[idx], keys[idx] = hash_code, key","assign-elem",2],["","",-1],["    return hash_codes, keys","return-lists",1]];function ri(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.25,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.2,i=Math.random();return i<t?ee(e):i<t+n?te():i<t+n+r?Object(ye.BigNumber)($(-100,100)):re()}var ii=function(e){Xr(n,e);var t=Jr(n);function n(){return Fr(this,n),t.apply(this,arguments)}return Kr(n,[{key:"run",value:function(e,t){this.fromKeys=new gt.a(e);var n=t||2*this.fromKeys.size;this.hashCodes=new gt.a,this.keys=new gt.a;for(var r=0;r<n;++r)this.hashCodes=this.hashCodes.push(null);this.addBP("create-new-empty-hashes");for(var i=0;i<n;++i)this.keys=this.keys.push(null);this.addBP("create-new-empty-keys");var o,a=Wr(this.fromKeys.entries());try{for(a.s();!(o=a.n()).done;){var s=Yr(o.value,2);for(this.fromKeysIdx=s[0],this.key=s[1],this.addBP("for-loop"),this.hashCode=Ke(this.key),this.addBP("compute-hash"),this.idx=this.computeIdx(this.hashCode,this.keys.size),this.addBP("compute-idx"),this.fmtCollisionCount=0;this.addBP("check-collision"),null!==this.keys.get(this.idx);){if(this.addBP("check-dup-hash"),this.hashCodes.get(this.idx).eq(this.hashCode)&&(this.addBP("check-dup-key"),it(this.keys.get(this.idx),this.key))){this.addBP("check-dup-break");break}this.fmtCollisionCount+=1,this.idx=(this.idx+1)%this.keys.size,this.addBP("next-idx")}this.hashCodes=this.hashCodes.set(this.idx,this.hashCode),this.keys=this.keys.set(this.idx,this.key),this.addBP("assign-elem")}}catch(e){a.e(e)}finally{a.f()}return this.fromKeysIdx=null,this.key=null,this.addBP("return-lists"),[this.hashCodes,this.keys]}}]),n}(qe),oi=sn([[yn,[{labels:["from_keys"],marginBottom:10},"fromKeys","fromKeysIdx",void 0,{selection1color:"#13920b"}]],[pn,[{labels:["keys"],marginBottom:5},"keys","idx"]],[pn,[{labels:["hash_codes"]},"hashCodes","idx"]]]);function ai(e,t){switch(e.point){case"create-new-empty-hashes":return"Создаем новый массив размером <code>".concat(e.hashCodes.size,"</code> для хеш-кодов");case"create-new-empty-keys":return"Создаем новый массив размером <code>".concat(e.keys.size,"</code> для ключей");case"for-loop":return"[".concat(e.fromKeysIdx+1,"/").concat(e.fromKeys.size,"] Ключ для вставки <code>").concat(We(e.key),"</code>");case"compute-hash":return"Вычисляем хеш-код: <code>".concat(e.hashCode,"</code>");case"compute-idx":return"Вычисляем индекс начальной ячейки: <code>".concat(e.idx,"</code> == <code>").concat(e.hashCode," % ").concat(e.keys.size,"</code>");case"check-collision":return Pr(e.keys,e.idx,e.fmtCollisionCount);case"check-dup-hash":return it(e.hashCodes.get(e.idx),e.hashCode)?"<code>".concat(e.hashCodes.get(e.idx)," == ").concat(e.hashCode,"</code>, мы не можем исключить, что ячейка занята тем же ключом"):"<code>".concat(e.hashCodes.get(e.idx)," != ").concat(e.hashCode,"</code>, значит, возникла коллизия с другим ключом");case"check-dup-key":return it(e.keys[e.idx],e.key)?"<code>".concat(We(e.keys.get(e.idx))," == ").concat(We(e.key),"</code>, значит, ключ уже в таблице"):"<code>".concat(We(e.keys.get(e.idx))," != ").concat(We(e.key),"</code>, значит, это коллизия");case"check-dup-break":case"check-dup-return":return"Потому что ключ найден, стоп";case"next-idx":return"Продолжаем, индекс следующего элемента <code>".concat(e.idx,"</code> == <code>(").concat(t.idx," + 1) % ").concat(e.keys.size,"</code>");case"assign-elem":return null===t.keys.get(e.idx)?"Поместим элемент <code>".concat(We(e.key),"</code> и его хеш-код <code>").concat(e.hashCode,"</code> в пустую ячейку <code>").concat(e.idx,"</code>"):"<code>".concat(We(e.key),"</code> и его хеш-код <code>").concat(e.hashCode,"</code> уже в ячейке, в любом случае перезаписываем");case"return-lists":return"Хеш-таблица создана, возвращаем массивы"}}var si=[["def has_key(hash_codes, keys, key):","start-execution",0],["    hash_code = hash(key)","compute-hash",1],["    idx = hash_code % len(keys)","compute-idx",1],["    while hash_codes[idx] is not EMPTY:","check-not-found",2],["        if hash_codes[idx] == hash_code and \\","check-hash",2],["           keys[idx] == key:","check-key",2],["            return True","return-true",3],["        idx = (idx + 1) % len(keys)","next-idx",2],["    return False","return-false",1]];function li(e,t){switch(e.point){case"start-execution":return"".concat(e.fmtIsRemove?"Удаляем":"Ищем"," ключ: <code>").concat(e.key,"</code>");case"compute-hash":return"Вычисляем хеш-код: <code>".concat(e.hashCode,"</code>");case"compute-idx":return"Вычисляем индекс начальной ячейки: <code>".concat(e.hashCode," % ").concat(e.keys.size,"</code> == <code>").concat(e.idx,"</code>");case"check-not-found":return Lr(e.keys,e.idx,e.fmtCollisionCount);case"check-hash":return e.hashCodes.get(e.idx).eq(e.hashCode)?"<code>".concat(e.hashCodes.get(e.idx)," == ").concat(e.hashCode,"</code>, поэтому ячейка может содержать тот же ключ"):"<code>".concat(e.hashCodes.get(e.idx)," != ").concat(e.hashCode,"</code>, поэтому ячейка определенно содержит другой ключ");case"check-key":return it(e.keys.get(e.idx),e.key)?"<code>".concat(We(e.keys.get(e.idx))," == ").concat(We(e.key),"</code>, ключ найден"):"<code>".concat(We(e.keys.get(e.idx))," != ").concat(e.key,"</code>, это другой ключ с тем же хеш-кодом");case"assign-dummy":return"Перемещаем в ячейку <code>".concat(e.idx,"</code> с <code>фиктивным</code> объектом");case"return":return"Ключ удален";case"next-idx":return"Продолжаем, индекс следующего элемента <code>".concat(e.idx,"</code> == <code>(").concat(t.idx," + 1) % ").concat(e.keys.size,"</code>");case"throw-key-error":return"Бросаем исключение, потому что ключ не найден";case"return-true":return"Возвращаем значение <code>True</code>";case"return-false":return"Мы попали в пустую ячейку, значит ключ не здесь. Возвращаем значение <code>False</code>"}}var ci=sn([[pn,[{labels:["keys"],marginBottom:5},"keys","idx"]],[pn,[{labels:["hash_codes"]},"hashCodes","idx"]]]),ui=sn([[pn,[{labels:["keys"],marginBottom:5},"keys","idx"]],[pn,[{labels:["hash_codes"]},"hashCodes","idx"]]],{fixedGeometry:Vt}),hi=[["def remove(hash_codes, keys, key):","start-execution",0],["    hash_code = hash(key)","compute-hash",1],["    idx = hash_code % len(keys)","compute-idx",1],["","",-1],["    while hash_codes[idx] is not EMPTY:","check-not-found",2],["        if hash_codes[idx] == hash_code and \\","check-hash",2],["           keys[idx] == key:","check-key",2],["            keys[idx] = DUMMY","assign-dummy",2],["            return","return",3],["        idx = (idx + 1) % len(keys)","next-idx",2],["",""],["    raise KeyError()","throw-key-error",1]],di=function(e){Xr(n,e);var t=Jr(n);function n(){return Fr(this,n),t.apply(this,arguments)}return Kr(n,[{key:"run",value:function(e,t,n,r){for(this.fmtIsRemove=r,this.hashCodes=new gt.a(e),this.keys=new gt.a(t),this.key=n,this.addBP("start-execution"),this.fmtCollisionCount=0,this.hashCode=Ke(this.key),this.addBP("compute-hash"),this.idx=this.computeIdx(this.hashCode,this.keys.size),this.addBP("compute-idx");this.addBP("check-not-found"),null!==this.keys.get(this.idx);){if(this.addBP("check-hash"),this.hashCodes.get(this.idx).eq(this.hashCode)&&(this.addBP("check-key"),it(this.keys.get(this.idx),this.key)))return r?(this.keys=this.keys.set(this.idx,et),this.addBP("assign-dummy"),this.addBP("return"),{hashCodes:this.hashCodes,keys:this.keys,isException:!1,result:null}):(this.addBP("return-true"),{hashCodes:this.hashCodes,keys:this.keys,isException:!1,result:!0});this.fmtCollisionCount+=1,this.idx=(this.idx+1)%this.keys.size,this.addBP("next-idx")}var i,o;return r?(this.addBP("throw-key-error"),o=!0):(this.addBP("return-false"),o=!1,i=!1),{hashCodes:this.hashCodes,keys:this.keys,isException:o,result:i}}}]),n}(qe),pi=[["def resize(hash_codes, keys):","start-execution",0],["    new_hash_codes = [EMPTY] * (2 * len(hash_codes))","create-new-empty-hashes",1],["    new_keys = [EMPTY] * (2 * len(keys))","create-new-empty-keys",1],["    for hash_code, key in zip(hash_codes, keys):","for-loop",2],["        if key is EMPTY or key is DUMMY:","check-skip-empty-dummy",2],["            continue","continue",3],["        idx = hash_code % len(new_keys)","compute-idx",2],["        while new_hash_codes[idx] is not EMPTY:","check-collision",3],["            idx = (idx + 1) % len(new_keys)","next-idx",3],["        new_hash_codes[idx], new_keys[idx] = hash_code, key","assign-elem",2],["",""],["    return new_hash_codes, new_keys","return-lists",1]],fi=function(e){Xr(n,e);var t=Jr(n);function n(){return Fr(this,n),t.apply(this,arguments)}return Kr(n,[{key:"run",value:function(e,t){this.hashCodes=e,this.keys=t,this.newHashCodes=new gt.a,this.newKeys=new gt.a;for(var n=0;n<2*this.hashCodes.size;++n)this.newHashCodes=this.newHashCodes.push(null);this.addBP("create-new-empty-hashes");for(var r=0;r<2*this.hashCodes.size;++r)this.newKeys=this.newKeys.push(null);this.addBP("create-new-empty-keys");var i,o=Wr(this.hashCodes.zip(this.keys).entries());try{for(o.s();!(i=o.n()).done;){var a=Yr(i.value,2);this.oldIdx=a[0];var s=Yr(a[1],2);if(this.hashCode=s[0],this.key=s[1],this.addBP("for-loop"),this.addBP("check-skip-empty-dummy"),null!==this.key&&this.key!==et){for(this.fmtCollisionCount=0,this.idx=this.computeIdx(this.hashCode,this.newKeys.size),this.addBP("compute-idx");this.addBP("check-collision"),null!==this.newKeys.get(this.idx);)this.fmtCollisionCount+=1,this.idx=(this.idx+1)%this.newKeys.size,this.addBP("next-idx");this.newHashCodes=this.newHashCodes.set(this.idx,this.hashCode),this.newKeys=this.newKeys.set(this.idx,this.key),this.addBP("assign-elem")}else this.addBP("continue")}}catch(e){o.e(e)}finally{o.f()}return this.addBP("return-lists"),[this.newHashCodes,this.newKeys]}}]),n}(qe);function mi(e,t){switch(e.point){case"create-new-empty-hashes":return"Создаем новый массив размером <code>".concat(e.newHashCodes.size,"</code> для хеш-кодов");case"create-new-empty-keys":return"Создаем новый массив размером <code>".concat(e.newKeys.size,"</code> для ключей");case"for-loop":return"[".concat(e.oldIdx+1,"/").concat(e.keys.size,"] Ключ для вставки <code>").concat(null===e.key?"EMPTY":e.key,"</code>, хеш-код <code>").concat(null===e.hashCode?"EMPTY":e.hashCode,"</code>");case"compute-idx":return"Вычисляем индекс начальной ячейки: <code>".concat(e.idx," == ").concat(e.hashCode," % ").concat(e.newKeys.size,"</code>");case"check-skip-empty-dummy":return null===e.keys.get(e.oldIdx)?"Текущяя ячейка пуста":e.keys.get(e.oldIdx)===et?"Текущая ячейка содержит <code>DUMMY</code>-плейсхолдер":"Текущая ячейка занята реально существующим ключом";case"continue":return"Пропустим ее";case"check-collision":return Pr(e.newKeys,e.idx,e.fmtCollisionCount);case"next-idx":return"Продолжаем, индекс следующего элемента <code>".concat(e.idx,"</code> == <code>(").concat(t.idx," + 1) % ").concat(e.keys.size,"</code>");case"assign-elem":return"Поместим <code>".concat(We(e.key),"</code> и его хеш-код <code>").concat(e.hashCode,"</code> в пустую ячейку ").concat(e.idx);case"return-lists":return"Хеш-таблица была перестроена, вернем массивы"}}var yi=sn([[pn,[{labels:["keys"],marginBottom:5},"keys","oldIdx",void 0,{selection1color:"#13920b"}]],[pn,[{labels:["hash_codes"],marginBottom:10,maxBoxSizeIsDefault:!0},"hashCodes","oldIdx",void 0,{selection1color:"#13920b"}]],[pn,[{labels:["new_keys"],marginBottom:5},"newKeys","idx"]],[pn,[{labels:["new_hash_codes"]},"newHashCodes","idx"]]]),gi=function(e){Xr(n,e);var t=Jr(n);function n(){return Fr(this,n),t.apply(this,arguments)}return Kr(n,[{key:"run",value:function(e,t,n){for(this.hashCodes=new gt.a(e),this.keys=new gt.a(t),this.key=n,this.hashCode=Ke(this.key),this.addBP("compute-hash"),this.idx=this.computeIdx(this.hashCode,this.keys.size),this.addBP("compute-idx");this.addBP("check-collision"),null!==this.keys.get(this.idx);){if(this.addBP("check-dup-hash"),this.hashCodes.get(this.idx).eq(this.hashCode)&&(this.addBP("check-dup-key"),it(this.keys.get(this.idx),this.key))){this.addBP("check-dup-break");break}this.idx=(this.idx+1)%this.keys.size,this.addBP("next-idx")}return this.hashCodes=this.hashCodes.set(this.idx,this.hashCode),this.keys=this.keys.set(this.idx,this.key),this.addBP("assign-elem"),[this.hashCodes,this.keys]}}]),n}(qe),bi=function(e){Xr(n,e);var t=Jr(n);function n(e){var r;return Fr(this,n),(r=t.call(this,e)).state={string:"Hello",integer:42},r}return Kr(n,[{key:"render",value:function(){var e=this;return s.createElement("div",{className:"hash-examples"},s.createElement("div",{className:"div-p"},s.createElement("code",null,"hash("),s.createElement(Or,{inline:!0,value:this.state.string,onChange:function(t){return e.setState({string:t})}}),s.createElement("code",null,")")," = ",s.createElement("code",null,Fe(this.state.string))),s.createElement("div",{className:"div-p"},s.createElement("code",null,"hash("),s.createElement(jr,{inline:!0,value:this.state.integer,onChange:function(t){return e.setState({integer:t})}}),s.createElement("code",null,")")," = ",s.createElement("code",null,Ge(Object(ye.BigNumber)(this.state.integer)).toFixed())),s.createElement("p",null,s.createElement("code",null,"hash(42.5)")," = ",s.createElement("code",null,"1426259968")),s.createElement("p",null,s.createElement("code",null,'hash(("Hi", 11))')," = ",s.createElement("code",null,"4421265786515608844")),s.createElement("p",null,s.createElement("code",null,"hash(None)")," = ",s.createElement("code",null,"-9223372036581563745")))}}]),n}(s.Component),vi=function(){function e(){Fr(this,e)}return Kr(e,null,[{key:"createNew",value:function(e,t){var n=new ii,r=Yr(n.run(e,t),2);return{hashCodes:r[0],keys:r[1],bp:n.getBreakpoints()}}},{key:"hasKey",value:function(e,t,n){var r=new di,i=r.run(e,t,n,!1),o=i.result,a=i.hashCodes,s=i.keys;return{result:o,bp:r.getBreakpoints(),hashCodes:a,keys:s}}},{key:"remove",value:function(e,t,n){var r=new di,i=r.run(e,t,n,!0),o=i.isException,a=i.hashCodes,s=i.keys;return{isException:o,bp:r.getBreakpoints(),hashCodes:a,keys:s}}},{key:"resize",value:function(e,t){var n=new fi,r=Yr(n.run(e,t),2),i=r[0],o=r[1];return{bp:n.getBreakpoints(),hashCodes:i,keys:o}}},{key:"insert",value:function(e,t,n){var r=new gi,i=Yr(r.run(e,t,n),2),o=i[0],a=i[1];return{bp:r.getBreakpoints(),hashCodes:o,keys:a}}}]),e}();function wi(e){var t=e.array,n=t.filter((function(e){return"string"==typeof e})).length,r=t.length-n;return n>0&&r>0?"a mixed list of integers and strings":n>0?"a list of strings":"a list of integers"}var Ei=function(e){Xr(n,e);var t=Jr(n);function n(){var e;return Fr(this,n),Hr(ei(e=t.call(this)),"runAnimation",(function(){console.log("runAnimation"),e.setState((function(e){return{isStart:!e.isStart}}))})),e.state={isStart:!0,breakpointsUpdatedCounter:0},e}return Kr(n,[{key:"render",value:function(){var e,t,n,r;if(this.state.isStart){var i=this.state.breakpoints[0];e=i.hashCodes,t=i.keys,r="Throw away the old table",n=s.createElement(ct.a,{icon:"trash-alt"})}else{var o=this.state.breakpoints[this.state.breakpoints.length-1];e=o.newHashCodes,t=o.newKeys,r="Reset",n=s.createElement(ct.a,{icon:"redo-alt"})}return s.createElement("div",{className:"hl-left",style:{paddingLeft:20}},s.createElement("button",{type:"button",className:"btn btn-primary btn-sm",onClick:this.runAnimation,style:{minWidth:180}},n," ",r),s.createElement(ui,{bp:{hashCodes:e,keys:t},epoch:this.state.breakpointsUpdatedCounter,fixedGeometry:Vt}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.breakpoints!==t.breakpoints?Ur(Ur({},t),{},{breakpoints:e.breakpoints,breakpointsUpdatedCounter:t.breakpointsUpdatedCounter+1}):null}}]),n}(s.PureComponent);Hr(Ei,"FULL_WIDTH",!0),Hr(Ei,"EXTRA_ERROR_BOUNDARY",!0);var xi=function(e){Xr(n,e);var t=Jr(n);function n(){var e;return Fr(this,n),Hr(ei(e=t.call(this)),"runCreateNew",Object(me.a)((function(e,t){return vi.createNew(e,t)}))),Hr(ei(e),"runSearch",Object(me.a)((function(e,t,n){return{bp:vi.hasKey(e,t,n).bp}}))),Hr(ei(e),"runRemove",Object(me.a)((function(e,t,n){var r=vi.remove(e,t,n);return{bp:r.bp,hashCodes:r.hashCodes,keys:r.keys}}))),Hr(ei(e),"runResize",Object(me.a)((function(e,t){return{bp:vi.resize(e,t).bp}}))),e.state={array:["uname","mv",1,"time",-6,"ps","mkdir","less"],searchedObj:"less",objToRemove:1},e}return Kr(n,[{key:"render",value:function(){var e=this,t=performance.now(),n=this.runCreateNew(this.state.array),r=n.hashCodes,i=n.keys,o=this.runSearch(r,i,this.state.searchedObj),a=this.runRemove(r,i,this.state.objToRemove);r=a.hashCodes,i=a.keys;var l=this.runResize(r,i);return console.log("Chapter2 render timing",performance.now()-t),s.createElement("div",{className:"chapter chapter2"},s.createElement("h2",null," Chapter 2. Why are hash tables called hash tables? "),s.createElement(K,null,s.createElement("p",null,"Now that we have the solution for searching in a list of numbers, can we use it for non-integer objects? We can if we find a way to turn objects into numbers for indexing."),s.createElement("p",null," ","We don't need a perfect one-to-one correspondence between objects and integers. In fact, it is totally fine if two unrelated objects are turned into the same number — we can use linear probing to resolve this collision anyway!"),s.createElement("p",null,"However, if we turn all objects into the same number, for example, ",s.createElement("code",null,"42"),", our hash table would work, but its performance would severely degrade. So, for performance reasons it is desirable to get distinct numbers for distinct objects usually."," "),s.createElement("p",null,"The transformation also needs to be completely deterministic, i.e. we need to always get the same value for the same object. In other words, something like ",s.createElement("code",null,"random()"),' would not work, because we would "forget" where we placed our objects and we wouldn\'t be able to locate them during a search.'),s.createElement("p",null,"Functions that do this kind of transformation are called ",s.createElement("em",null,"hash functions"),'. Since it is not required to preserve any order in the input domain, a typical hash function "mixes up" its input domain, hence the name "hash".'),s.createElement("p",null,"In Python, there are built-in implementations of hash functions for many built-in types. They are all available through a single interface: the function ",s.createElement("code",null,"hash()"),". This function can take any Python object as an input and call an appropriate implementation (if it exists)."),s.createElement("p",null," Here are some examples of hash function values for some of the built-in types. "),s.createElement(bi,null),s.createElement("p",null,"In the case of strings, ",s.createElement("code",null,"hash()")," returns fairly unpredictable results, as it should. However, for small integers ",s.createElement("code",{className:"text-nowrap"},"hash(x) == x"),". This fact may seem surprising to people familiar with hash functions, but it is a deliberate design decision by Python core developers."),s.createElement("p",null,'For "long" integers Python uses a different algorithm. Try typing a relatively big number, for example, ',s.createElement("code",null,"12345678901234567890")," to see this."),s.createElement("p",null,"Another fact: ",s.createElement("code",null,"hash()")," never returns ",s.createElement("code",null,"-1"),", because ",s.createElement("code",null,"-1")," used internally as an indicator of an error. That's why ",s.createElement("code",null,"hash(-1)")," is ",s.createElement("code",null,"-2"),"."),s.createElement("h5",null,"hash() implementation notes"),s.createElement("p",null,"This chapter and the next two chapters will use ",s.createElement("code",null,"hash()")," implementation from Python 3.2 (running on an x86_64 system). So if you run Python 3.2 on your x86_64 system, you should see the same hash values for integers and strings (and the same data structure states). One exception is ",s.createElement("code",null,"hash(None)"),". It changes between runs, but in this explanation"," ",s.createElement("code",null,"hash(None)")," is always ",s.createElement("code",null,"-9223372036581563745"),"."),s.createElement("p",null,"Why Python 3.2? Because dict implementation has changed over time but Python 3.2's dict implements most major ideas, and, thus, Python 3.2's dict is a good starting point. Later versions of Python extend (rather than completely replace) Python 3.2's implementation. Eventually, we will get to these implementations as well."),s.createElement("h5",null," Unhashable types "),s.createElement("p",null,"Not all types are hashable. For example, lists aren't and if you call"," ",s.createElement("code",{className:"text-nowrap"},'hash(["some", "values"])')," you will get"," ",s.createElement("code",null,"TypeError: unhashable type: 'list'"),". Why can't we use the same hash function for lists as for tuples? The answer is because lists are mutable and tuples are not."),s.createElement("p",null,"We could still define a hash function for lists and other mutable objects. However changing a list would change the value of the hash function as well, and therefore we will not be able to locate the mutated list! Hashing and using lists as keys in dicts would lead to many accidental bugs, so core developers of Python chose not to allow this."),s.createElement("h5",null,'A note on the word "hash"'),s.createElement("p",null,'Because hash tables use hash functions and because hash tables mix up inserted elements, they are called hash tables. Sometimes people shorten "hash table" to just "hash". The output of a hash function is sometimes called "hash value" or "hash code", but very often it is also shortened to just "hash". Also, Python\'s built-in hash function is called ',s.createElement("code",null,"hash()"),"."),s.createElement("p",null,"Because people like to shorten things, several different (but related) concepts end up having the same shortened name. This can get a bit confusing sometimes."),s.createElement("h5",null," Using hash functions for hash tables "),s.createElement("p",null,"Recall that we started with a simple problem: searching efficiently in a list of distinct numbers. Now, let's make this problem harder: our hash table needs to handle duplicates, support types other than integers, support removing and adding keys (and therefore resizing). We will see how to handle values in the next chapter, but for now let's assume we only need to search for keys."),s.createElement("p",null,"How does using hash functions change the insertion algorithm?"),s.createElement("p",null,"Obviously, we have to use ",s.createElement("code",null,"hash()")," function to convert objects into integers for indexing."),s.createElement("p",null,"Because ",s.createElement("code",null,"None")," is hashable too, we will need to use some other value as a placeholder for an empty slot. The cleanest way to do this is to create a new type and use a value of this type. In Python, this is quite simple:"),s.createElement(Wt,null,"\nclass EmptyValueClass(object):\n    pass\n\nEMPTY = EmptyValueClass()\n              ".trim()),s.createElement("p",null,"We will now use ",s.createElement("code",null,"EMPTY")," to denote an empty slot. After we do this, we will be able to insert ",s.createElement("code",null,"None")," in the hash table safely."),s.createElement("p",null,"But here is one critical thing: checking for equality of objects can be expensive. For example, comparing strings of length 10000 may require up to 10000 comparison operations - one per each pair of corresponding characters. And, we may end up doing several equality checks when doing linear probing."),s.createElement("p",null,"When we only had integers, we didn't have this problem, because comparing integers is cheap. But here is a neat trick we can use to improve the performance in the case of arbitrary objects. We still get numbers from hash functions. So, we can save these numbers and compare them before comparing actual objects. When comparing hashes, there are two different outcomes. First, the hashes are different; in this case, we can safely conclude that the objects are different as well. Second, the hashes are equal; in this case, there is a good chance that the objects are equal but there is still a possibility of two distinct objects having the same hash, so we have to compare the actual objects."),s.createElement("p",null,"This optimization is a space-time tradeoff. We spend extra memory to make the algorithm faster."),s.createElement("p",null,"In this chapter, we'll allow duplicates. Remember how search works in the previous chapter? We retrace the steps necessary to insert the element and check if any slot along the way contains it. We also do all these steps when we are actually inserting an element. This means that we're effectively doing a search while inserting an element. So, handling duplicates is straightforward — we can terminate the insertion process if we find the element. And if we hit an empty slot without finding the element, then the element is not in the table and it means that we can safely insert it."),s.createElement("p",null,"Now, let's see this algorithm in action. We'll use a separate list called"," ",s.createElement("code",null,"hash_codes")," for caching values of hash functions."),s.createElement("p",null,"Let's say we have ",s.createElement(wi,{array:this.state.array}),":"),s.createElement(Dr,Br({input:Ir,inputProps:{minSize:1},initialValue:this.state.array,onChange:this.setter("array",!0),bottomBoundary:".chapter2"},this.props)),s.createElement("p",null,"Let's build a hash table from it:"),s.createElement(dn,Br({code:ni,breakpoints:n.bp,formatBpDesc:ai,stateVisualization:oi},this.props)),s.createElement("h5",null," Searching "),s.createElement("p",null,"The search algorithm hasn't changed much. We get the ",s.createElement("code",null,"hash()"),' function value for the object, and do linear probing. Just like in the first chapter, we essentially have a bunch of "islands", separated by empty slots. Each island usually contains only a few elements, and a linear scan over a small "island" isn\'t expensive.'),s.createElement("div",{className:"div-p"},"For instance, let's search for",s.createElement(Sr,{inline:!0,value:this.state.searchedObj,onChange:this.setter("searchedObj"),anotherValue:function(){return ri(e.state.array)}}),"and see what happens:"),s.createElement(dn,Br({code:si,breakpoints:o.bp,formatBpDesc:li,stateVisualization:ci},this.props)),s.createElement("h5",null," Removing objects "),s.createElement("p",null,"If we removed a key without a trace, it'd leave a hole, and this would break the search algorithm. Then, how do we remove a key?"),s.createElement("p",null,'The answer is that if we can\'t remove a key without a trace, we should leave a trace. When removing a key, we replace it with a "dummy" object (another term for this object is "tombstone"). This object acts as a placeholder that indicates we shouldn\'t stop probing during a search.'),s.createElement("p",null,"In code, we can create this placeholder object just like we created ",s.createElement("code",null,"EMPTY"),":"),s.createElement(Wt,null,"\nclass DummyValueClass(object):\n    pass\n\nDUMMY = DummyValueClass()\n              ".trim()),s.createElement("div",{className:"div-p"},"Let's see removing in action. Let's say we want to remove:",s.createElement(Sr,{inline:!0,value:this.state.objToRemove,onChange:this.setter("objToRemove"),anotherValue:function(){return ri(e.state.array,.7,.2,.1)}})),s.createElement(dn,Br({code:hi,breakpoints:a.bp,formatBpDesc:li,stateVisualization:ci},this.props)),s.createElement("p",null,"Removing a lot of objects may lead to a table being filled with these dummy objects. What if a table overflows with dummy objects? There is a way to clean them up. But first, let's see what happens if a table overflows with ordinary objects."),s.createElement("h5",null,"Resizing hash tables"),s.createElement("p",null,"How do we resize a hash table? The index of each element depends on the table size, so it may change if the size of a table changes. Moreover, because of collisions and linear probing, each index may depend on the indexes of other objects (which, in turn, also depend on the size of a table and the indexes of other objects). This is a tangled mess."),s.createElement("p",null,"There is a way to disentangle this Gordian Knot, however. We can create a new, bigger table and re-insert all the elements from the smaller table (skipping dummy placeholders). This may sound expensive. And, it ",s.createElement("em",null,"is")," expensive. But, the thing is, we don't have to resize the table after every operation. If we make the new table size 1.5x, 2x or even 4x the size of the old table, it'll take a while until it fills up again. We will do resizes rarely enough that the heavy cost of it will amortize (spread out) over many insertions/deletions."),s.createElement(Ei,{breakpoints:l.bp}),s.createElement("p",{className:"mt-2"},"Since we're re-building the table, the code is fairly similar to the code for building it from scratch. The differences are:"),s.createElement("ul",null,s.createElement("li",null,"the hash codes are already there, so we don't need to compute them the second time;"),s.createElement("li",null,"we don't have to check for duplicates, because we know that each object is present only once in the original table;"),s.createElement("li",null,"we skip empty and dummy slots.")),s.createElement(dn,Br({code:pi,breakpoints:l.bp,formatBpDesc:mi,stateVisualization:yi},this.props)),s.createElement("p",null,"There is still one more important question. What condition should trigger the resizing operation? If we postpone resizing until a table is nearly full, the performance will severely degrade. If we resize a table when it is still sparse, we will waste memory. Typically, a hash table is resized when it is around 66% full."),s.createElement("p",null,"The number of non-empty slots (including dummy/tombstone slots) is called ",s.createElement("em",null,"fill"),". The ratio between fill and table capacity is called the ",s.createElement("em",null,"load factor")," (also, sometimes:"," ",s.createElement("em",null,"fill factor")," or ",s.createElement("em",null,"fill ratio"),"). So, using the new terms, we can say that a hash table is resized when the load factor reaches 66%. When a table is resized, it's size usually goes up, but sometimes it can actually go down, if there are a lot of dummy slots."),s.createElement("p",null,'To implement this efficiently, we need to track the load factor. We will need two counters for tracking fill and "real" usage. With the current code structure, tracking these counters would be messy because we would need to pass these counters to and from every function. A much cleaner solution would be using classes. More on that in the next chapter.')))}}]),n}(G);function ki(e){return(ki="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ti(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ni(r.key),r)}}function Ii(e,t,n){return t&&Ti(e.prototype,t),n&&Ti(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ni(e){var t=function(e,t){if("object"!==ki(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ki(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ki(t)?t:String(t)}function ji(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Oi(e,t)}function Oi(e,t){return(Oi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Si(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Pi(e);if(t){var i=Pi(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Di(this,n)}}function Di(e,t){if(t&&("object"===ki(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ci(e)}function Ci(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pi(e){return(Pi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ai=[["def bubble_sort(a):","",0],["    for i in range(len(a)):","for-i",1],["        swapped = False","swapped-false",1],["        for j in range(len(a) - i - 1):","for-j",2],["            if a[j] > a[j + 1]:","compare",2],["                a[j], a[j + 1] = a[j + 1], a[j]","swap",2],["                swapped = True","swapped-true",2],["        if not swapped:","check-swapped",1],["            break","break-swapped",1],["","end",-1]],Li=function(e){ji(n,e);var t=Si(n);function n(){return Mi(this,n),t.call(this)}return Ii(n,[{key:"run",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.a=new gt.a(e);var n=e.length;for(this.i=0;this.i<n;++this.i){for(this.addBP("for-i"),this.swapped=!1,this.addBP("swapped-false"),this.j=0;this.j<n-1-this.i;++this.j){this.jplus1=this.j+1,t&&this.addBP("for-j");var r=this.a.get(this.j),i=this.a.get(this.j+1);t&&this.addBP("compare"),r>i&&(this.a=this.a.set(this.j,i),this.a=this.a.set(this.j+1,r),t&&this.addBP("swap"),this.swapped=!0,t&&this.addBP("swapped-true"))}if(this.j=void 0,this.jplus1=void 0,this.addBP("check-swapped"),!this.swapped)return void this.addBP("break-swapped");this.swapped=void 0}return this.addBP("end"),this.a}}]),n}(Ze);var _i=function(e){return sn([[pn,[{labels:e?["a"]:[null]},"a","j","jplus1",{selection1color:"red",selection2color:"red"}]]])};_i(!0),_i(!1),sn([[pn,[{labels:["a"]},"a","i",void 0]]]),sn([[pn,[{labels:["a"]},"a","l","r"]],[pn,[{labels:["left_a"]},"left_a","li"]],[pn,[{labels:["right_a"]},"right_a","ri"]]]),sn([[yn,[{labels:["from_keys"],marginBottom:20},"plus1_fromKeys","plus1_fromKeysIdx","double_fromKeysIdx",{selection1color:"#13920b"}]],[pn,[{labels:["keys"],marginBottom:7},"plus1_keys","plus1_idx"]],[pn,[{labels:["hash_codes"]},"plus1_hashCodes","plus1_idx"]],[pn,[{labels:["keys"],marginBottom:7},"double_keys","double_idx"]],[pn,[{labels:["hash_codes"]},"double_hashCodes","double_idx"]]]);function zi(e,t){return e===t?"==":e<t?"<":">"}var Bi=function(e){ji(n,e);var t=Si(n);function n(){return Mi(this,n),t.call(this)}return Ii(n,[{key:"run",value:function(e){this.array=new gt.a(e),this.recursionLevel=0,this.quickSort(0,e.length-1)}},{key:"quickSort",value:function(e,t){if(this.start=e,this.stop=t,this.addBP("compare-size"),console.log("quicksort",this.start,this.stop),this.stop<=this.start)this.addBP("return");else{for(this.pivot=this.array.get(Math.trunc((this.start+this.stop)/2)),this.addBP("select-pivot"),this.left=this.start,this.addBP("left-start"),this.right=this.stop,this.addBP("right-stop");this.addBP("while-left-right"),!(this.left>this.right);){for(;this.addBP("while-left"),!(this.array.get(this.left)>=this.pivot);)this.left++,this.addBP("inc-left-first");for(;this.addBP("while-right"),!(this.array.get(this.right)<=this.pivot);)this.right--,this.addBP("dec-right-first");if(this.addBP("compare-left-right"),this.left<=this.right){var n=this.array.get(this.left),r=this.array.get(this.right);this.array=this.array.set(this.left,r),this.array=this.array.set(this.right,n),this.addBP("swap"),this.left+=1,this.addBP("inc-left-second"),this.right-=1,this.addBP("dec-right-second")}}console.log(this.start,this.left,this.right,this.stop);var i=this.pivot,o=this.left,a=this.right,s=this.stop,l=this.start;this.pivot=void 0,this.left=void 0,this.addBP("sort-left"),this.recursionLevel++,this.quickSort(this.start,this.right),this.recursionLevel--,this.pivot=i,this.left=o,this.right=a,this.stop=s,this.start=l,this.pivot=void 0,this.right=void 0,this.addBP("sort-right"),this.recursionLevel++,this.quickSort(this.left,this.stop),this.recursionLevel--,this.addBP("exit")}}}]),n}(Ze),Ri=(n(490),function(){return s.createElement("svg",{width:"11",height:"17",viewBox:"0 0 11 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s.createElement("path",{d:"M1.10807 7.87806L8.22902 0.757486C8.57233 0.414171 9.12926 0.414171 9.47257 0.757486L10.3032 1.58811C10.6461 1.93106 10.6465 2.48652 10.3047 2.8302L4.66103 8.49984L10.3043 14.1698C10.6465 14.5135 10.6458 15.069 10.3028 15.4119L9.4722 16.2426C9.12889 16.5859 8.57196 16.5859 8.22865 16.2426L1.10807 9.12162C0.764757 8.7783 0.764757 8.22138 1.10807 7.87806Z",fill:"#ffff"}))});function Ui(e){return(Ui="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hi(Object(n),!0).forEach((function(t){eo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wi(e){return function(e){if(Array.isArray(e))return Qi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Qi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qi(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Vi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,to(r.key),r)}}function Gi(e,t,n){return t&&Fi(e.prototype,t),n&&Fi(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ki(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zi(e,t)}function Zi(e,t){return(Zi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Xi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$i(e);if(t){var i=$i(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return qi(this,n)}}function qi(e,t){if(t&&("object"===Ui(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ji(e)}function Ji(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $i(e){return($i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eo(e,t,n){return(t=to(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function to(e){var t=function(e,t){if("object"!==Ui(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ui(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ui(t)?t:String(t)}var no=function(e){Ki(n,e);var t=Xi(n);function n(){var e;Vi(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return eo(Ji(e=t.call.apply(t,[this].concat(i))),"ERROR_COLOR","rgb(222, 39, 22)"),e}return Gi(n,[{key:"getPattern",value:function(){return"array_int"===this.props.type?"[0-9 ,]*":"int"===this.props.type?"[0-9]*":null}},{key:"render",value:function(){var e;console.log("Input state",this.state),this.state.error&&(e=this.state.error.text&&this.state.error.text.ru?this.state.error.text.ru:this.state.error.message);var t={borderColor:e?this.ERROR_COLOR:"#000"};return"int"!==this.props.type&&"int_str_none"!==this.props.type||(t.width=50),s.createElement("div",{className:"player-input-wrapper"},this.props.label&&s.createElement("span",{className:"player-input-label"},this.props.label),s.createElement("input",{pattern:this.getPattern(),type:"int"===this.props.type?"number":void 0,style:t,className:a()("player-input",e?"player-input-error":null),onChange:this.handleChange,value:this.state.valueRaw}),e&&s.createElement("span",{className:"player-input-comment",style:{color:this.ERROR_COLOR}},e))}}]),n}(wr);function ro(e){if(!ye.BigNumber.isBigNumber(e)&&"number"!=typeof e)return{en:"Expected an integer",ru:"Допустимы только числа"}}function io(e,t){return"array_int"===t||"array"===t?Yn(e):"int"===t||"int_str_none"===t?Hn(e):void 0}function oo(e,t){return console.log("parseValue",e,t),"array_int"===t?Rn(e,!1,1,ro):"array"===t?Rn(e,!0,1):"int"===t?Bn(e):"int_str_none"===t?Un(e):void 0}var ao=function(e){Ki(n,e);var t=Xi(n);function n(e){var r,o;Vi(this,n),eo(Ji(o=t.call(this,e)),"SLIDER_MULTIPLIER",1e3),eo(Ji(o),"SLIDER_AUTOPLAY_UPDATE_MS",5),eo(Ji(o),"SLIDER_AUTOPLAY_BASE_MS",750),eo(Ji(o),"MAX_WIDTH",1300),eo(Ji(o),"INPUTS_LS_PREFIX","player-v1-1-"),eo(Ji(o),"navigateHome",(function(){o.setState({navigatingHome:!0})})),eo(Ji(o),"maxTime",(function(){return o.state.breakpoints.length-1})),eo(Ji(o),"handleSliderValueChange",(function(e){o.stop();var t=e/o.SLIDER_MULTIPLIER;o.handleTimeChange(t)})),eo(Ji(o),"saveSliderTimeToLS",(function(e){localStorage.setItem(o.props.lessonId+"_time",e.toString())})),eo(Ji(o),"handleTimeChange",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;console.log("handleTimeChange",e,t);var r=Math.round(e);o.setState((function(){return{time:r,sliderTime:e,autoPlaying:t}}),n),setTimeout(i()((function(){return o.saveSliderTimeToLS(e)}),500),0)})),eo(Ji(o),"prevStep",(function(){if(o.stop(),o.state.time>0){var e=o.state.time-1;o.handleTimeChange(e)}})),eo(Ji(o),"nextStep",(function(){if(o.stop(),o.state.time<o.maxTime()){var e=o.state.time+1;o.handleTimeChange(e)}})),eo(Ji(o),"singleAutoPlayIteration",(function(){console.log("autoplay iteration",o.state),o.state.autoPlaying&&(o.timeoutId=setTimeout(o.autoPlay,o.SLIDER_AUTOPLAY_UPDATE_MS))})),eo(Ji(o),"autoPlay",(function(){if(o.state.sliderTime<o.maxTime()){var e=1/o.SLIDER_AUTOPLAY_BASE_MS*(performance.now()-(o.lastTimeChange?o.lastTimeChange:performance.now()));console.log("autoPlay",o.state.time,e);var t=Math.min(o.maxTime(),o.state.sliderTime+e);t<o.maxTime()?(o.timeoutId&&clearTimeout(o.timeoutId),o.lastTimeChange=performance.now(),o.handleTimeChange(t,!0,o.singleAutoPlayIteration)):(o.resetTimer(),o.handleTimeChange(t,!1))}})),eo(Ji(o),"repeatPlay",(function(){o.handleTimeChange(0,!0),o.timeoutId=setTimeout(o.autoPlay,o.SLIDER_AUTOPLAY_UPDATE_MS)})),eo(Ji(o),"forceAutoPlay",(function(){console.log("autoplay"),o.state.time<o.maxTime()?o.autoPlay():o.repeatPlay()})),eo(Ji(o),"toggleAutoPlay",(function(){console.log("toggleAutoPlay",o.state.autoPlaying),o.state.autoPlaying?o.stop():o.forceAutoPlay()})),eo(Ji(o),"resetTimer",(function(){clearTimeout(o.timeoutId),o.timeoutId=null,o.lastTimeChange=null})),eo(Ji(o),"stop",(function(){null!=o.timeoutId&&o.resetTimer(),o.state.autoPlaying&&o.setState({autoPlaying:!1})})),eo(Ji(o),"hackTransition",(function(){var e=document.getElementsByClassName("rc-slider-track")[0],t=document.getElementsByClassName("rc-slider-handle")[0];e&&t&&(e.classList.add("slider-transition"),t.classList.add("slider-transition")),o._transitionHackStarted=performance.now()})),eo(Ji(o),"removeHackTransition",le()((function(){var e=document.getElementsByClassName("rc-slider-track")[0],t=document.getElementsByClassName("rc-slider-handle")[0];e&&t&&performance.now()-o._transitionHackStarted>150&&(e.classList.remove("slider-transition"),t.classList.remove("slider-transition"))}),250)),eo(Ji(o),"handleKeyboard",(function(e){if(console.log("keyboard",e),"INPUT"!==e.target.nodeName){var t=e.keyCode,n=40===t||39===t,r=38===t||37===t,i=32===t;(n||r||i)&&(e.preventDefault(),o.hackTransition(),n?o.nextStep():r?o.prevStep():i&&o.toggleAutoPlay())}})),eo(Ji(o),"toggleTheory",(function(){o.state.showingTheory||o.stop(),o.setState({showingTheory:!o.state.showingTheory})})),eo(Ji(o),"isMobile",(function(){return o.props.windowWidth<=480}));for(var a=localStorage.getItem(e.lessonId+"_time"),l=o.props.inputs||[],c=e.resetToZero,u=[],h=[],d=[],p=function(e){var t=l[e],n=localStorage.getItem(o.INPUTS_LS_PREFIX+t.id),r=n||t.default;u.push(oo(r,t.type)),h.push(r),d.push((function(n,r){if(console.log("equal compare",io(u[e],t.type),io(n,t.type)),io(u[e],t.type)!==io(n,t.type)){var i,a=Wi(o.state.programInputs);a[e]=n;var s=(i=o.props).getBreakpoints.apply(i,Wi(a)),l=!c&&o.state.time>0?s.length-1:0;o.setState({programInputs:a,breakpoints:s,time:l,sliderTime:l}),o.saveSliderTimeToLS(l),localStorage.setItem(o.INPUTS_LS_PREFIX+t.id,r),console.log("onInputChangeHandlers",n,a,s)}}))},f=0;f<l.length;++f)p(f);o.onInputChangeHandlers=d,console.log("Inputs",u);var m=(r=o.props).getBreakpoints.apply(r,u);console.log("breakpoints",m);var y=Math.min(+a||0,m.length-1);return o.state={time:Math.round(y),sliderTime:y,autoPlaying:!1,showingTheory:!1,navigatingHome:!1,breakpoints:m,programInputs:u,originalRawInputs:h},console.log("Player constructor state",o.state),o.componentRef=s.createRef(),o}return Gi(n,[{key:"unixtimestamp",value:function(){return(new Date).getTime()}},{key:"componentDidUpdate",value:function(){var e=this;setTimeout((function(){return e.removeHackTransition()}),200),!this.state.autoPlaying&&this.timeoutId&&this.stop()}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyboard)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyboard)}},{key:"render",value:function(){var e=this;if(console.log("Player",this.props,this.state),this.state.navigatingHome)return s.createElement(h.a,{push:!0,to:"/"});var t=this.state.breakpoints,n=t.length,r=this.props.stateVisualization,i=this.props,o=i.windowHeight,l=i.windowWidth;console.log("Player window size",o,l);var c,u,d,p,f,m,y,g=Math.min(this.MAX_WIDTH,l),b=this.state.time,v=t[b],w=(E?45:35)+16,E=!1;if(o){var x=1.1*r.getExpectedHeight(g,o);console.log("Expected vis height",x),u=g-24,this.isMobile()?(E=!0,l-1):Math.max(.3*g,300),o-w-15,w-4,d=this.props.inputs&&!E?7+38*this.props.inputs.length:0,c=this.props.windowHeight-x-w-d}E&&(p={position:"absolute",bottom:0},f={position:"absolute",bottom:80,width:"100%"},m=(m=this.props.mobileHeaderTitle||this.props.playerHeaderTitle).charAt(0).toUpperCase()+m.slice(1),y={paddingBottom:15,paddingTop:20}),console.log("mobile header title",m);var k=this.props.inputs;return s.createElement("div",{className:"fluid-body"},s.createElement("div",{className:"player"},s.createElement("div",{className:a()("player-header",!E&&"player-header-desktop"),style:p},s.createElement("div",{style:{display:"flex",alignItems:"center"}},(!this.state.showingTheory||!E)&&s.createElement("a",{className:"player-title",href:"/",onClick:this.navigateHome,children:s.createElement(Ri,null)}),!E&&s.createElement("div",{className:"player-lesson-name"}," ",this.props.playerHeaderTitle)),(!this.state.showingTheory||!E)&&s.createElement("div",{className:a()("player-buttons",E?"player-buttons-mobile":"")},s.createElement("div",{className:"player-button player-prev",onClick:this.prevStep},s.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOSIgaGVpZ2h0PSIxMyIgdmlld0JveD0iMCAwIDkgMTMiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0wLjY4NjQ1OCA1LjkwMjU3TDYuMzgzMjEgMC4yMDYxMTFDNi42NTc4NyAtMC4wNjg1NDA5IDcuMTAzNCAtMC4wNjg1NDA5IDcuMzc4MDYgMC4yMDYxMTFMOC4wNDI1NiAwLjg3MDYxQzguMzE2OTIgMS4xNDQ5NyA4LjMxNzIxIDEuNTg5MzQgOC4wNDM3MyAxLjg2NDI4TDMuNTI4ODMgNi4zOTk5OUw4LjA0MzQ0IDEwLjkzNkM4LjMxNzIxIDExLjIxMDkgOC4zMTY2MiAxMS42NTUzIDguMDQyMjYgMTEuOTI5N0w3LjM3Nzc2IDEyLjU5NDJDNy4xMDMxMSAxMi44Njg4IDYuNjU3NTcgMTIuODY4OCA2LjM4MjkyIDEyLjU5NDJMMC42ODY0NTggNi44OTc0MkMwLjQxMTgwNiA2LjYyMjc2IDAuNDExODA2IDYuMTc3MjIgMC42ODY0NTggNS45MDI1N1oiIGZpbGw9IiMyNDI0MjQiLz4KPC9zdmc+Cg=="})),s.createElement("div",{className:"player-counters"},s.createElement("span",{children:"Шаг ".concat(b+1," из ").concat(n)})),s.createElement("div",{className:"player-button player-next",onClick:this.nextStep},s.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOSIgaGVpZ2h0PSIxMyIgdmlld0JveD0iMCAwIDkgMTMiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik04LjMxMzU0IDUuOTAyNTdMMi42MTY3OSAwLjIwNjExMUMyLjM0MjEzIC0wLjA2ODU0MDkgMS44OTY2IC0wLjA2ODU0MDkgMS42MjE5NCAwLjIwNjExMUwwLjk1NzQ0MyAwLjg3MDYxQzAuNjgzMDg0IDEuMTQ0OTcgMC42ODI3OTIgMS41ODkzNCAwLjk1NjI3MSAxLjg2NDI4TDUuNDcxMTcgNi4zOTk5OUwwLjk1NjU2MyAxMC45MzZDMC42ODI3OTEgMTEuMjEwOSAwLjY4MzM3OCAxMS42NTUzIDAuOTU3NzM2IDExLjkyOTdMMS42MjIyNCAxMi41OTQyQzEuODk2ODkgMTIuODY4OCAyLjM0MjQzIDEyLjg2ODggMi42MTcwOCAxMi41OTQyTDguMzEzNTQgNi44OTc0MkM4LjU4ODE5IDYuNjIyNzYgOC41ODgxOSA2LjE3NzIyIDguMzEzNTQgNS45MDI1N1oiIGZpbGw9IiMyNDI0MjQiLz4KPC9zdmc+Cg=="})),s.createElement("div",{className:"player-button player-play-button",onClick:this.toggleAutoPlay},s.createElement("img",{src:this.state.autoPlaying?"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxMiAxNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0wIDE0SDRWMEgwVjE0Wk04IDBWMTRIMTJWMEg4WiIgZmlsbD0iIzMyMzIzMiIvPg0KPC9zdmc+DQo=":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxMiAxNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTExLjM2ODIgNS44Njk1OUwxLjkzOTM0IDAuMTc5NTg1QzEuMTczMjUgLTAuMjgyNTA2IDAgMC4xNjU5MTQgMCAxLjMwODg0VjEyLjY4NjFDMCAxMy43MTE1IDEuMDkwMjEgMTQuMzI5NCAxLjkzOTM0IDEzLjgxNTRMMTEuMzY4MiA4LjEyODA5QzEyLjIwOTMgNy42MjIyNSAxMi4yMTE5IDYuMzc1NDMgMTEuMzY4MiA1Ljg2OTU5WiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg=="})))),s.createElement("div",{className:"player-slider-wrapper"},s.createElement(Ie.a,{onChange:this.handleSliderValueChange,min:0,max:this.maxTime()*this.SLIDER_MULTIPLIER,value:this.state.sliderTime*this.SLIDER_MULTIPLIER,style:y,dotStyle:{top:0,height:3,width:3,borderRadius:0,backgroundColor:"white",border:"none"},handleStyle:{height:12,width:12,marginTop:-4.5,backgroundColor:"#FF3B99",border:"none"},railStyle:{height:2,cursor:"pointer",backgroundColor:"#ffffff"},trackStyle:{height:2,cursor:"pointer",backgroundColor:"#FF3B99"},className:a()(E&&"slider-mobile-extra")})),!E&&k&&k.length&&s.createElement("div",{className:"player-inputs-outer"},s.createElement("div",{className:"player-inputs-inner"},k.map((function(t,n){return s.createElement(no,{value:e.state.programInputs[n],valueRaw:e.state.originalRawInputs[n],key:t.id,label:t.label,type:t.type,onChange:e.onInputChangeHandlers[n],dumpValue:function(e){return io(e,t.type)},parseValue:function(e){return oo(e,t.type)}})})))),s.createElement("div",{className:"player-main"},s.createElement("div",{className:"player-code-and-visualisation",style:{width:u}},s.createElement(un,{height:c,time:b,code:this.props.code,overflow:!1,fontSize:15,lineVerticalPadding:2,breakpoints:t,formatBpDesc:this.props.formatBpDesc,withShortExplanation:E,mobileHeaderTitle:m}),s.createElement("div",{className:"player-state-vis-wrapper",style:f},s.createElement(r,{bp:v,epoch:this.state.breakpointsUpdatedCounter,innerRef:this.componentRef,windowWidth:l,windowHeight:o,overflow:!1}))))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.autoPlaying&&e.time===t.breakpoints.length-1?Yi(Yi({},t),{},{autoPlaying:!1}):null}}]),n}(s.Component);function so(e){return(so="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lo(){return(lo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function co(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return uo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ho(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function po(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xo(r.key),r)}}function fo(e,t,n){return t&&po(e.prototype,t),n&&po(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function mo(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yo(e,t)}function yo(e,t){return(yo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function go(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wo(e);if(t){var i=wo(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bo(this,n)}}function bo(e,t){if(t&&("object"===so(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return vo(e)}function vo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wo(e){return(wo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Eo(e,t,n){return(t=xo(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xo(e){var t=function(e,t){if("object"!==so(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==so(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===so(t)?t:String(t)}var ko=Object.assign({},n(25),n(90),n(493),n(495),n(496)),Mo={boxSize:30,boxSpacing:1},To=function(e){mo(n,e);var t=go(n);function n(e){var r;return ho(this,n),Eo(vo(r=t.call(this,e)),"TRANSITION_TIME",500),Eo(vo(r),"TOP_SPACE",66),Eo(vo(r),"BOTTOM_SPACE",66),Eo(vo(r),"transitionId",null),Eo(vo(r),"lastTransitionId",0),Eo(vo(r),"setRef",(function(e){r.gChild=e})),r.state={firstRender:!0,bpIdx:e.bpIdx,breakpoints:e.breakpoints,transitionRunning:!1,transitionToBpIdx:null,boxSize:null,boxSpacing:null},r}return fo(n,[{key:"shouldComponentUpdate",value:function(e,t){var n=!1,r=!1;return this.state.boxSize!==t.boxSize||null==this.state.boxSize||null==t.boxSize||(e.breakpoints!==t.breakpoints?(n=!0,r=!0):e.bpIdx===t.bpIdx||null!=t.transitionToBpIdx&&e.bpIdx===t.transitionToBpIdx||(r=!0,n=null!=t.transitionToBpIdx&&(t.bpIdx>t.transitionToBpIdx&&e.bpIdx>t.transitionToBpIdx||t.bpIdx<t.transitionToBpIdx&&e.bpIdx<t.transitionToBpIdx)),r&&(!t.transitionRunning||!n))}},{key:"render",value:function(){var e=this.state.boxSize+this.TOP_SPACE+this.BOTTOM_SPACE+10+30+25,t=this.props,n=t.fixedHeight,r=t.adjustTop,i=n||e;return r=r||0,s.createElement("div",{ref:this.props.innerRef},s.createElement("svg",{width:10+this.props.slotsCount*(this.state.boxSize+this.state.boxSpacing),height:i},s.createElement("defs",null,["blue","green"].map((function(e){return s.createElement("marker",{id:"arrow-".concat(e),key:"arrow-".concat(e),markerUnits:"strokeWidth",markerWidth:"7",markerHeight:"7",viewBox:"0 0 12 12",refX:"6",refY:"6",orient:"auto"},s.createElement("path",{d:"M2,2 L10,6 L2,10 L6,6 L2,2",style:{fill:e}}))}))),s.createElement("g",{ref:this.setRef,transform:"translate(0, ".concat(r+30,")")})))}},{key:"transitionEnd",value:function(){this.transitionToBpIdx;this.transitionId=null,this.state.transitionRunning&&this.setState({transitionRunning:!1,bpIdx:this.state.transitionToBpIdx,transitionToBpIdx:null})}},{key:"d3render",value:function(){for(var e=this,t=this.props.slotsCount,n=this.props.breakpoints[this.props.bpIdx],r=n.links.toJS(),i=null!=n.startIdx?n.startIdx:null,o=[],a=[],s=0;s<r.length;++s){var l={};a.push([]);for(var c=0;c<r[s].length;++c){var u=r[s][c].nextIdx;u in l?l[u]++:l[u]=0,o.push([s,c]),a[s].push(l[u])}}var h,d=this.oldLinks,p=this.oldBoxSize,f=this.oldNextIdxRepeatedAdjustment,m={transitionToBpIdx:this.props.bpIdx,breakpoints:this.props.breakpoints};this.state.firstRender?(m.firstRender=!1,h=0):(h=this.TRANSITION_TIME,m.transitionRunning=!0);var y=ko.transition().duration(h);this.lastTransitionId++;var g=this.lastTransitionId;this.transitionId=g,y.on("end",(function(){e.transitionId===g&&setTimeout((function(){return e.transitionEnd()}),0)}));var b=ko.select(this.gChild),v=ko.line().x((function(e){return e.x})).y((function(e){return e.y})).curve(ko.curveMonotoneX),w=this.state,E=w.boxSize,x=w.boxSpacing,k=E!==p,M=b.selectAll("rect").data(ko.range(t));M.enter().append("rect").style("fill","#e5e6f1").attr("x",(function(e,t){return(E+x)*t})).attr("y",this.TOP_SPACE).attr("rx",4).attr("ry",4).attr("width",E).attr("height",E).merge(M).style("stroke",(function(e,t){return t===i?"green":"none"})).style("stroke-width",1);var T=function(n,r,i){return function(n,r,i){var o,a,s,l,c;if(n<r)o=e.TOP_SPACE,a=e.TOP_SPACE,s=e.TOP_SPACE*(1-(Math.max(r-n,1)+i)/t),l=.66*E,c=.33*E;else if(n==r)o=e.TOP_SPACE,a=e.TOP_SPACE,s=e.TOP_SPACE*(1-(1+i)/t),l=.33*E,c=.66*E;else{var u=e.TOP_SPACE+E;o=u,a=u,s=u+e.BOTTOM_SPACE*((2+i)/t),l=.33*E,c=.66*E}var h=(E+x)*n+l,d=(E+x)*r+c;return[[h,o],[(h+d)/2,s],[d,a]]}(n,r,i).map((function(e){var t=co(e,2);return{x:t[0],y:t[1]}}))},I=function(e){var t=co(e,2),n=t[0],i=t[1];return r[n][i].perturbLink?"green":"blue"},N=function(e){var t=co(e,2),n=t[0],r=t[1];return"url(#arrow-".concat(I([n,r]),")")},j=b.selectAll("path").data(o,(function(e){return e})),O=j.enter(),S=j.exit();O.append("path").style("stroke",I).style("stroke-width",1).style("fill","none").attr("d",(function(e){var t=co(e,2),n=t[0],i=t[1],o=r[n][i].nextIdx,s=a[n][i],l=T(n,o,s);return v(l)})).each((function(e,t){var n=this.getTotalLength(),r=ko.select(this);r.classed("entering",!0).attr("stroke-dasharray",n+" "+n).attr("stroke-dashoffset",n).transition(y).attr("stroke-dashoffset",0).on("end",(function(){r.attr("marker-end",N(e)),r.classed("entering",!1)}))})),j.filter((function(e,t){var n=co(e,2),i=n[0],o=n[1];return!ko.select(this).classed("entering")||k||d[i][o].nextIdx!=r[i][o].nextIdx})).style("stroke",I).attr("stroke-dasharray",null).attr("stroke-dashoffset",null).transition(y).attrTween("d",(function(e){var t=co(e,2),n=t[0],i=t[1],o=r[n][i].nextIdx,s=d[n][i].nextIdx,l=f[n][i],c=a[n][i],u=T(n,s,l),h=T(n,o,c),p=ko.interpolateArray(u,h);return function(e){return v(p(e))}})).attr("marker-end",N),S.filter((function(e,t){return!ko.select(this).classed("exiting")})).classed("exiting",!0).each((function(){var e=this.getTotalLength();ko.select(this).attr("stroke-dasharray",e+" "+e).attr("stroke-dashoffset",0).attr("marker-end",null).transition(y).attr("stroke-dashoffset",e).remove()})),this.oldLinks=r,this.oldBoxSize=E,this.oldNextIdxRepeatedAdjustment=a,this.setState(m)}},{key:"_initOrUpd",value:function(){null==this.state.boxSize&&null!=this.props.boxSize?this.setState({boxSize:this.props.boxSize,boxSpacing:this.props.boxSpacing}):null!=this.state.boxSize&&this.d3render()}},{key:"componentDidUpdate",value:function(){this._initOrUpd()}},{key:"componentDidMount",value:function(){this._initOrUpd()}}]),n}(s.Component);function Io(e,t){return Mo}s.Component;var No=function(e){mo(n,e);var t=go(n);function n(){return ho(this,n),t.apply(this,arguments)}return fo(n,[{key:"render",value:function(){return s.createElement(To,lo({slotsCount:this.props.slotsCount||8,breakpoints:[{links:this.props.links}],bpIdx:0},this.props,Io(this.props.windowWidth,this.props.windowHeight)))}}]),n}(s.Component);Eo(No,"FULL_WIDTH",!0),Eo(No,"EXTRA_ERROR_BOUNDARY",!0);var jo=function(e){mo(n,e);var t=go(n);function n(){return ho(this,n),t.apply(this,arguments)}return fo(n,[{key:"run",value:function(e,t,n){"python"===n&&(this.PERTURB_SHIFT=5),this.slotsCount=e,this.key=t,this.links=new gt.a;for(var r=0;r<this.slotsCount;++r)this.links=this.links.set(r,new gt.a);this.addBP("def-probe-all"),this.hashCode=Ke(this.key),this.addBP("compute-hash"),"python"===n&&(this.perturb=ot(this.hashCode),this.addBP("compute-perturb")),this.idx=Xe(this.hashCode,this.slotsCount),this.startIdx=this.idx,this.addBP("compute-idx"),this.visitedIdx=new gt.b,this.addBP("create-empty-set");for(var i,o,a,s=!!this.perturb&&!this.perturb.eq(0);this.addBP("while-loop"),this.visitedIdx.size!==this.slotsCount;){this.visitedIdx.has(this.idx)||(this.visitedIdx=this.visitedIdx.set(this.idx,{perturbLink:s})),this.addBP("visited-add");var l=void 0;if("python"===n)i=this.idx,o=this.perturb,a=this.slotsCount,l=+Object(ye.BigNumber)(5*i+1).plus(o).mod(a).toString();else if("5i+1"===n)l=(5*this.idx+1)%this.slotsCount;else{if("i+1"!==n)throw new Error("Unknown probing algorithm: ".concat(n));l=(this.idx+1)%this.slotsCount}var c=null!=this.perturb&&!this.perturb.eq(0);s=c,this.links=this.links.set(this.idx,this.links.get(this.idx).push({nextIdx:l,perturbLink:c})),this.idx=l,this.addBP("next-idx"),"python"===n&&(this.perturb=at(this.perturb),this.addBP("perturb-shift"))}return{links:this.links,startIdx:this.startIdx}}}]),n}(Ze);function Oo(e){return(Oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var So=["inputComponentRef"];function Do(e){return function(e){if(Array.isArray(e))return Lo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ao(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Co(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||Ao(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Po(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Ao(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Ao(e,t){if(e){if("string"==typeof e)return Lo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lo(e,t):void 0}}function Lo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ko(r.key),r)}}function Bo(e,t,n){return t&&zo(e.prototype,t),n&&zo(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ro(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Uo(e,t)}function Uo(e,t){return(Uo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ho(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Qo(e);if(t){var i=Qo(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yo(this,n)}}function Yo(e,t){if(t&&("object"===Oo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Wo(e)}function Wo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qo(e){return(Qo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vo(Object(n),!0).forEach((function(t){Go(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Go(e,t,n){return(t=Ko(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ko(e){var t=function(e,t){if("object"!==Oo(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Oo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Oo(t)?t:String(t)}function Zo(){return(Zo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Xo(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var qo=[["def simple_search(simple_list, key):","",0],["    idx = 0","start-from-zero",1],["    while idx < len(simple_list):","check-boundary",2],["        if simple_list[idx] == key:","check-found",2],["            return True","found-key",2],["        idx += 1","next-idx",2],["    return False","found-nothing",1]];function Jo(e){var t=Bn(e),n=$o(t);if(n)throw new Error(n);return+t.toString()}function $o(e){return ye.BigNumber.isBigNumber(e)||"number"==typeof e?e.lt(-999)||e.gt(999)?"In chapter 1 only small integers are supported (between -".concat(999," and ").concat(999,")"):void 0:"Expected an integer"}function ea(e){var t=e.inputComponentRef,n=Xo(e,So);return s.createElement(Tr,Zo({},n,{dumpValue:JSON.stringify,parseValue:Jo,ref:t}))}var ta=function(e){switch(e.point){case"start-execution":return"Ищем <code>".concat(e.number,"</code>");case"iteration":return"Проверим ячейку с индексом ".concat(e.idx," (<code>").concat(e.atIdx,"</code>)");case"start-from-zero":return"Начинаем с нулевого элемента массива";case"check-boundary":return e.idx<e.size?"[Попытка №".concat(e.idx+1,"] <code>").concat(e.idx," < ").concat(e.size,"</code>, значит, обработаны еще не все элементы, и искомое число может находиться дальше"):"<code>".concat(e.idx," == ").concat(e.size,"</code>, значит все элементы обработаны");case"check-found":return e.found?"<code>".concat(e.atIdx," == ").concat(e.arg,"</code> &mdash; искомое число найдено"):"<code>".concat(e.atIdx," != ").concat(e.arg,"</code> &mdash; искомое число еще не найдено");case"found-key":return"Поэтому возвращаем <code>True</code>";case"found-nothing":return"Искомое число <code>".concat(e.arg,"</code> не найдено, поэтому возвращаем значение<code>False</code>");case"next-idx":return"Переходим к следующему индексу: <code>".concat(e.idx,"</code> == <code>").concat(e.idx-1," + 1</code>")}},na=sn([[yn,[{labels:["simple_list"]},"data","idx"]]]),ra=sn([[yn,[{labels:[null]},"data"]]]);function ia(e){var t=null==e.windowHeight;return s.createElement(ra,Zo({},e,{overflow:t}))}var oa=[["def build_no_collision_resolution(original_list):","start-execution",0],["    new_list = [None] * len(original_list)","create-new-list",1],["",""],["    for number in original_list:","for-loop",2],["        idx = number % len(new_list)","compute-idx",2],["        new_list[idx] = number","assign-elem",2],["    return new_list","return-created-list",1]],aa=[["def build_insert_all(original_list):","start-execution",0],["    new_list = [None] * (2 * len(original_list))","create-new-list",1],["",""],["    for number in original_list:","for-loop",2],["        idx = number % len(new_list)","compute-idx",2],["        while new_list[idx] is not None:","check-collision",3],["            idx = (idx + 1) % len(new_list)","next-idx",3],["        new_list[idx] = number","assign-elem",2],["    return new_list","return-created-list",1]],sa=function(e){Ro(n,e);var t=Ho(n);function n(){var e;return _o(this,n),(e=t.call(this))._overwritten=[],e}return Bo(n,[{key:"run",value:function(e){var t,n=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.fmtIsBroken=r,this.originalList=new gt.a(e),this.newList=new gt.a,r&&(this.fmtMissingNumbers=new gt.a,this.newListWithReplacements=new gt.a),i?i=t:t=(r?1:2)*this.originalList.size;for(var o=0;o<t;++o)this.newList=this.newList.push(null),r&&(this.newListWithReplacements=this.newListWithReplacements.push(new gt.a));this.addBP("create-new-list",!0);var a,s=Po(this.originalList.entries());try{for(s.s();!(a=s.n()).done;){var l=Co(a.value,2);if(this.originalListIdx=l[0],this.number=l[1],this.fmtCollisionCount=0,this.addBP("for-loop"),this.newListIdx=(this.number%this.newList.size+this.newList.size)%this.newList.size,this.addBP("compute-idx"),!r)for(;this.addBP("check-collision"),null!==this.newList.get(this.newListIdx);)this.fmtCollisionCount+=1,this.newListIdx=(this.newListIdx+1)%this.newList.size,this.addBP("next-idx");var c=this.newList.get(this.newListIdx);if(null!=c){if(!r)throw new Error("!isBroken and overwriting a number - this should not happen");this.fmtMissingNumbers=this.fmtMissingNumbers.push(c),this._overwritten.push([this.originalListIdx,c,this.number])}this.newList=this.newList.set(this.newListIdx,this.number),r&&(this.newListWithReplacements=this.newListWithReplacements.updateIn([this.newListIdx],(function(e){return e.insert(0,n.number)}))),this.newList=this.newList.set(this.newListIdx,this.number),this.addBP("assign-elem",!0)}}catch(e){s.e(e)}finally{s.f()}return this.addBP("return-created-list"),this.newList}},{key:"overwrittenNumbers",value:function(){return this._overwritten}}]),n}(Ze),la=function(e,t){switch(e.point){case"create-new-list":return"Создаем новый массив из <code>".concat(e.newList.size,"</code> пустых ячеек");case"for-loop":return"[".concat(e.originalListIdx+1,"/").concat(e.originalList.size,"] Вставляем <code>").concat(e.number,"</code>");case"compute-idx":return"Вычисляем индекс ячейки: <code>".concat(e.newListIdx,"</code> == <code>").concat(e.number," % ").concat(e.newList.size,"</code>");case"check-collision":return Pr(e.newList,e.newListIdx,e.fmtCollisionCount);case"next-idx":return"Продолжаем, индекс следующего элемента <code>".concat(e.newListIdx,"</code> == <code>(").concat(t.newListIdx," + 1) % ").concat(e.newList.size,"</code>");case"assign-elem":var n=t.newList.get(e.newListIdx);return null!=n?"Коллизия чисел <code>".concat(e.number,"</code> и <code>").concat(n,"</code> в ячейке с индексом <code>").concat(e.newListIdx,"</code> — значение перезаписано"):"Помещаем <code>".concat(e.number,"</code> в ячейку с индексом <code>").concat(e.newListIdx,"</code>");case"return-created-list":return e.fmtMissingNumbers&&e.fmtMissingNumbers.size>0?"Возвращаем созданный массив. Потеряны числа: ".concat(e.fmtMissingNumbers.map((function(e){return"<code>".concat(e,"</code>")})).join(", ")):"Возвращаем созданный массив со всеми исходными числами"}},ca=sn([[yn,[{labels:["original_list"]},"originalList","originalListIdx",void 0,{selection1color:"#13920b"}]],[pn,[{labels:["new_list"]},"newList","newListIdx",void 0]]]),ua=sn([[yn,[{labels:["original_list"]},"originalList","originalListIdx",void 0,{selection1color:"#13920b"}]],[fn,[{labels:["new_list"]},"newListWithReplacements","newListIdx",void 0]]]),ha=[["def has_number(new_list, number):","start-execution",0],["    idx = number % len(new_list)","compute-idx",1],["    while new_list[idx] is not None:","check-not-found",2],["        if new_list[idx] == number:","check-found",2],["            return True","found-key",2],["        idx = (idx + 1) % len(new_list)","next-idx",2],["    return False","found-nothing",1]],da=Object(d.a)((function(e){var t=e.children;e.tag;return s.createElement("span",{style:{opacity:m.jsLoaded?0:1,transition:"opacity 1s ease"}},t)})),pa=function(e){Ro(n,e);var t=Ho(n);function n(){return _o(this,n),t.apply(this,arguments)}return Bo(n,[{key:"run",value:function(e,t){for(this.newList=new gt.a(e),this.number=t,this.addBP("start-execution"),this.fmtCollisionCount=0,this.newListIdx=(this.number%this.newList.size+this.newList.size)%this.newList.size,this.addBP("compute-idx");this.addBP("check-not-found"),null!==this.newList.get(this.newListIdx);){if(console.log("Simplified search",this),this.addBP("check-found"),it(this.newList.get(this.newListIdx),this.number))return this.addBP("found-key"),!0;this.fmtCollisionCount+=1,this.newListIdx=(this.newListIdx+1)%this.newList.size,this.addBP("next-idx")}return this.addBP("found-nothing"),!1}}]),n}(Ze),fa=function(e){switch(e.point){case"start-execution":return"Ищем <code>".concat(e.number,"</code>");case"compute-idx":return"Вычисляем индекс ячейки: <code>".concat(e.newListIdx,"</code> == <code>").concat(e.number," % ").concat(e.newList.size,"</code>");case"check-not-found":return Lr(e.newList,e.newListIdx,e.fmtCollisionCount);case"check-found":return it(e.newList.get(e.newListIdx),e.number)?"Число найдено: <code>".concat(e.newList.get(e.newListIdx)," == ").concat(e.number,"</code>"):"Число пока не найдено: <code>".concat(e.newList.get(e.newListIdx)," != ").concat(e.number,"</code>");case"found-key":return"Теперь просто возвращаем <code>True</code>";case"found-nothing":return"Теперь просто возвращаем <code>False</code>";case"next-idx":return"Продолжаем, индекс следующего элемента <code>".concat(e.newListIdx,"</code>");case"return-created-list":return"Возвращаем созданный массив"}},ma=sn([[pn,[{labels:["new_list"]},"newList","newListIdx"]]]);function ya(e){var t,n,r=e.originalNumbers,i=e.addedNumber,o=Co(e.overwrittenNumbers[0],3),a=o[0],l=o[1],c=o[2];if(l=We(l),c=We(c),null===i)n=!1,t=s.createElement(s.Fragment,null,"For example, ",s.createElement("code",null,l)," will get the same slot index (",s.createElement("code",null,a),") as ",s.createElement("code",null,c),", and it will be overwritten.");else{n=!0;var u=We(i);t=s.createElement(s.Fragment,null,"For the current list (",s.createElement("code",{dangerouslySetInnerHTML:{__html:"["+r.join(", ")+"]"}}),") it would work. But if we append a single number to it, for example ",s.createElement("code",null,u),", then ",s.createElement("code",null,l)," would get overwritten by ",s.createElement("code",null,c),", and the simple algorithm breaks.")}return s.createElement(U,null,s.createElement("p",{className:"dynamic-p",key:"oe-p-".concat(i,"-").concat(l,"-").concat(c,"-").concat(a,"-").concat(n?JSON.stringify(r):null)},"Would this approach work, however? Not entirely. ",t," Situations like these are called"," ",s.createElement("em",null,"collisions"),"."))}var ga=function(){function e(){_o(this,e)}return Bo(e,null,[{key:"createNew",value:function(e){var t=new sa;return{keys:t.run(e),bp:t.getBreakpoints()}}},{key:"createNewBroken",value:function(e){var t=new sa,n=t.run(e,!0);return{bp:t.getBreakpoints(),overwrittenNumbers:t.overwrittenNumbers(),keys:n}}},{key:"hasKey",value:function(e,t){var n=new pa,r=n.run(e,t);return{bp:n.getBreakpoints(),result:r,keys:e}}},{key:"linearSearch",value:function(e,t){return function(e,t){var n={type:"breakpoint",arg:t,data:e,size:e.length},r=[],i=function(t,r,i){return Fo(Fo(Fo({},n),{point:t,idx:r,atIdx:e[r]}),i)},o=0;for(r.push(i("start-from-zero",o));r.push(i("check-boundary",o)),!(o>=e.length);){if(it(e[o],t))return r.push(i("check-found",o,{found:!0})),r.push(i("found-key",o)),{bp:r,result:!0};r.push(i("check-found",o,{found:!1})),o+=1,r.push(i("next-idx",o))}return r.push(i("found-nothing",o)),{bp:r,result:!1}}(e,t)}}]),e}();function ba(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.3;return Math.random()>t?+ee(e).toString():$(Math.floor(-99.9),Math.floor(99.9))}var va=function(e){Ro(n,e);var t=Ho(n);function n(){var e;return _o(this,n),Go(Wo(e=t.call(this)),"runSimplifiedInsertAll",Object(me.a)((function(e){return ga.createNew(e)}))),Go(Wo(e),"generateAlternativeDataForInsertAllBroken",Object(me.a)((function(t){var n=e.runSimplifiedInsertAllBroken(t),r=n.bp,i=n.overwrittenNumbers;if(i.length>0)return{originalNumbers:t,numbers:t,bp:r,addedNumber:null,overwrittenNumbers:i};var o=ye.BigNumber.max.apply(ye.BigNumber,Do(t)).plus(t.length+1),a=[].concat(Do(t),[o]),s=e.runSimplifiedInsertAllBroken(a);return{originalNumbers:t,numbers:a,bp:r=s.bp,addedNumber:o,overwrittenNumbers:i=s.overwrittenNumbers}}))),Go(Wo(e),"runProbingSimple",Object(me.a)((function(e){var t=new jo;return{links:t.run(e,"","i+1").links,bp:t.getBreakpoints()}}))),Go(Wo(e),"runSimplifiedInsertAllBroken",Object(me.a)((function(e){return ga.createNewBroken(e)}))),Go(Wo(e),"runSimplifiedSearch",Object(me.a)((function(e,t){return ga.hasKey(e,t)}))),Go(Wo(e),"runSimpleListSearch",Object(me.a)((function(e,t){return{bp:ga.linearSearch(e,t).bp}}))),e.state={numbers:[Object(ye.BigNumber)(1),Object(ye.BigNumber)(56),Object(ye.BigNumber)(50),Object(ye.BigNumber)(2),Object(ye.BigNumber)(44),Object(ye.BigNumber)(25),Object(ye.BigNumber)(17),Object(ye.BigNumber)(4)],simpleSearchNumber:25,simplifiedHashSearchNumber:2},e}return Bo(n,[{key:"render",value:function(){var e=this,t=this.runSimpleListSearch(this.state.numbers,this.state.simpleSearchNumber),n=this.generateAlternativeDataForInsertAllBroken(this.state.numbers),r=this.runSimplifiedInsertAll(this.state.numbers),i=this.runSimplifiedSearch(r.keys,this.state.simplifiedHashSearchNumber),o=this.runProbingSimple(8);return s.createElement("div",{className:"chapter chapter1"},s.createElement("h5",null,"Contents"),this.props.contents,s.createElement("h2",null,"Introduction"),s.createElement(K,null,s.createElement("p",null,"Hi! This is ",s.createElement("em",null,"an explorable explanation")," of Python dictionaries. This page is dynamic and interactive — you can plug in your data and see how the algorithms work on it."," ",s.createElement(da,null,"(Once the javascript loads)")),s.createElement("p",{className:"mb-2"},"To start with, let's say we have a simple list of distinct integers (change it if you want - the page will update):"),s.createElement(Dr,Zo({input:Ir,inputProps:{allowDuplicates:!1,minSize:1,extraValueValidator:$o},initialValue:this.state.numbers,onChange:this.setter("numbers",!0),bottomBoundary:".chapter1"},this.props)),s.createElement("p",{className:"mb-0"},'Python lists are actually arrays — contiguous chunks of memory. The name "list" may be misleading to people who know about double-linked lists but are unfamiliar with Python. You can picture a Python list as a row of slots, where each slot can hold a Python object:'),s.createElement(ia,{bp:{data:this.state.numbers},compensateTopPadding:25,windowWidth:this.props.windowWidth,windowHeight:this.props.windowHeight}),s.createElement("p",null,"To check if an element is present in a list, we can use the ",s.createElement("code",null,"in")," operator like this:"," ",s.createElement("code",{className:"text-nowrap"},"number in simple_list"),", which returns either"," ",s.createElement("code",null,"True")," or ",s.createElement("code",null,"False"),". Under the hood this short snippet does a linear scan. This can be a lot of work. To see this, let's reimplement it in Python."),s.createElement("div",{className:"div-p"},"Let's say we're looking for the following number in the original list:",s.createElement(ea,{inline:!0,value:this.state.simpleSearchNumber,onChange:this.setter("simpleSearchNumber"),anotherValue:function(){return ba(e.state.numbers)}})),s.createElement(dn,Zo({code:qo,breakpoints:t.bp,formatBpDesc:ta,stateVisualization:na,autoplayByDefault:!0},this.props)),s.createElement("p",null,"(The visualization is interactive. The buttons allow you to step through the code. Notice here that the time slider is draggable - feel free to rewind the time or move it forward. Also, feel free to mess with the input and the original list - the visualization will update automatically)"),s.createElement("p",null,"What's not so great about linear scans? If we have a million distinct numbers, in the worst case scenario, we may need to scan the whole list. But scanning over a few elements is no big deal. We need to have some order and predictability to make the search fast. We need to have some idea of where the searched element is located."),s.createElement("p",null,"A Python dict implementation is basically a scan of a list (but a pretty weird scan). We'll build the actual algorithm and data structure inside Python dictionary step by step, starting with the code above, which is intentionally verbose."," "),s.createElement("h2",null,"Chapter 1: searching efficiently in a list"),s.createElement("p",null,"A Python dict is a collection of key-value pairs. And, the most important part of it is handling keys. Keys need to be organized in such a way that efficient searching, inserting and deleting is possible."),s.createElement("p",null,'In this chapter, to keep things simple, we won\'t have any values, and "keys" will just be plain integers. So, the simplified problem is to check if a number is present in a list, but we have to do this'," ",s.createElement("em",null,s.createElement("strong",null,"fast")),". We'll tackle the real problem in the following chapters. But for now, bear with me."),s.createElement("p",null,"Accessing a single element by index is very fast. Accessing only a few elements would be fast too. We don't want to be doing a linear scan over the whole list every time we look up a number, so we need to organize our data in a clever way."),s.createElement("p",null," Here's how. "),s.createElement("p",null,"Let's begin by creating a new list of slots. Each slot will either hold a number from the original list or be empty (empty slots will hold ",s.createElement("code",null,"None"),"). We'll use the number itself to compute an index of a slot. The simplest way to do this is to take the remainder of"," ",s.createElement("code",null,"number")," divided by ",s.createElement("code",null,"len(the_list)"),":"," ",s.createElement("code",{className:"text-nowrap"},"number % len(the_list)")," and put our number in slot with this index. To check if the number is there we could compute the slot index again and see if it is empty."),s.createElement(ya,Zo({key:"overwritten-example-component"},n)),s.createElement(dn,Zo({code:oa,breakpoints:n.bp,formatBpDesc:la,stateVisualization:ua},this.props)),s.createElement("p",null,"To make this approach viable, we need to somehow ",s.createElement("em",null,"resolve collisions"),". Let's do the following: if the slot is already occupied by some other number, we'll just check the slot that comes right after it. And if that slot is empty, we'll put the number there. But, what if that slot is also occupied? Once again, we'll go ahead and check the next slot. We'll keep repeating this process until we finally hit an empty slot. This process is called ",s.createElement("em",null,"probing"),". And because we do it linearly, it is called ",s.createElement("em",null,"linear probing"),". In code, we would write this as"," ",s.createElement("code",{className:"text-nowrap"},"(idx + 1) % len(simple_list)"),", so it wraps around back to the beginning at the last index:"),s.createElement(No,Zo({slotsCount:8,links:o.links,adjustTop:-70,fixedHeight:170},this.props)),s.createElement("p",null,"If we make the new list the same size as the original list, we'll have too many collisions. If we make it 10x larger, we'll have very few collisions, but we'll waste a lot of memory. So what size should it be? We want to hit the sweet spot where we don't use up too much memory but also don't have too many collisions. Twice the size of the original list is reasonable."),s.createElement("p",null,"Let's transform the original list using this method (when reading this code, keep in mind that"," ",s.createElement("code",null,"original_list")," is a list of ",s.createElement("em",null,"distinct numbers"),", so we don't need to handle duplicates just yet)."),s.createElement(dn,Zo({code:aa,breakpoints:r.bp,formatBpDesc:la,stateVisualization:ca},this.props)),s.createElement("p",null,"To search for a number, we retrace all the steps necessary to insert it: we start from the slot"," ",s.createElement("code",{className:"text-nowrap"},"number % len(new_list)")," and do linear probing. We either end up finding the number or hitting an empty slot. The latter situation means that the number is not present."),s.createElement("div",{className:"div-p"},"Let's say we want to search for",s.createElement(ea,{inline:!0,value:this.state.simplifiedHashSearchNumber,onChange:this.setter("simplifiedHashSearchNumber"),anotherValue:function(){return ba(e.state.numbers,.4)}})),s.createElement(dn,Zo({code:ha,breakpoints:i.bp,formatBpDesc:fa,stateVisualization:ma},this.props)),s.createElement("p",null,"Calculating an index based on the value of the number and resolving collisions by linear probing is an incredibly powerful idea. What we've just implemented is a simple ",s.createElement("em",null,"hash table")," ","(more about the term in the next chapter). Python dict uses a hash table internally, albeit a more complex variant."),s.createElement("p",null,"We still haven't discussed adding more elements (what happens if a table overflows?), removing elements (removing an element without a trace would cause a hole to appear, wouldn't this cause the search algorithm to stop prematurely in many cases?), and perhaps most importantly, handling objects other than integers - strings, tuples, floats. We'll do this in the next chapters."),s.createElement("h6",null,"Collision resolution via separate chaining"),s.createElement("p",null,"There is a different method of collision resolution, called"," ",s.createElement("a",{href:"https://en.wikipedia.org/wiki/Hash_table#Separate_chaining",target:"_blank"},"separate chaining"),". It is also a good strategy which is commonly used. But that's not how Python resolves collision in dicts, so it is beyond the scope of this explanation."," "),s.createElement("h6",null,"A couple of the notes about the explanation"),s.createElement("p",null,"First, this explanation discusses ",s.createElement("code",null,"dict")," as it is implemented in"," ",s.createElement("a",{href:"http://python.org/",target:"_blank"},"CPython")," ",'— the "default" and most common implementation of the Python language (if you are not sure what implementation you use, it is almost certainly CPython). Some other implementations are'," ",s.createElement("a",{href:"https://pypy.org/",target:"_blank"},"PyPy"),","," ",s.createElement("a",{href:"http://www.jython.org/",target:"_blank"},"Jython")," ","and"," ",s.createElement("a",{href:"http://ironpython.net/",target:"_blank"},"IronPython"),". The way dicts works in each of these implementations may be similar to CPython (in the case of PyPy) or very different from CPython (in the case of Jython)."),s.createElement("p",null,"Second, even though dict in CPython is implemented in C, this explanation uses Python for code snippets. The goal of this page is to help you understand the algorithms and the underlying data structures, not the minutiae of the C code (these details are interesting too - they are just are beyond the scope of this explanation).")))}}]),n}(G);function wa(){return s.createElement(s.Fragment,null,s.createElement("h1",null,"Коллизии в хеш-таблицах"),s.createElement("p",null,"Хеш-таблица — структура данных, хранящая пары «ключ-значение» или только ключ. Позволяет быстро найти ключ и, если есть, связанное с ним значение."),s.createElement("h2",null,"Как найти нужный элемент с помощью линейного поиска"),s.createElement("p",null,"Последовательно перебирать все элементы списка, пока не найдется требуемый. В худшем случае — придется проверить все элементы. А в среднем — половину."),s.createElement("h2",null,"Как найти нужный элемент хеш-таблицы"),s.createElement("p",null,"По ключу понять, с какого места таблицы искать. И начать поиск рядом с нужным элементом. В среднем такой поиск займет пару итераций."," "),s.createElement("h2",null,"Пример из реальной жизни"),s.createElement("p",null,"Представьте, что вы ищете книгу в библиотеке. Если книги стоят в случайном порядке, то придется перебирать все по одной, пока не найдете нужную. А если книги стоят в алфавитном порядке, то библиотекарь может пойти сразу к нужной полке и перебрать несколько книг, а не всю библиотеку."," "),s.createElement("h2",null,"Устройство простейшей хеш-таблицы"),s.createElement("p",null,"Простейшая хеш-таблица — это массив из ключей. Индекс ключа вычисляется по самому ключу. Однако у разных ключей индекс может совпасть. Такие ситуации называются коллизиями."," "),s.createElement("p",null,"В следующей визуализации мы разберемся, как решать коллизии и создадим простейшую хеш-таблицу без потери данных."))}var Ea=(new jo).run(8,"","i+1").links;function xa(){return s.createElement(s.Fragment,null," ",s.createElement(No,{slotsCount:8,links:Ea,adjustTop:-65,fixedHeight:85}),s.createElement("h2",null,"Алгоритм разрешения коллизий"),s.createElement("p",null,"Если текущая ячейка занята, то мы проверим следующую. Если занята и она, то проверим следующую за ней. И так до тех пор, пока не найдем свободную ячейку."),s.createElement("p",null,"Таблицы с таким способом разрешения коллизий называются хеш-таблицами"," ",s.createElement("a",{className:"link",target:"_blank",href:"https://ru.wikipedia.org/wiki/%D0%A5%D0%B5%D1%88-%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D0%B0#%D0%9E%D1%82%D0%BA%D1%80%D1%8B%D1%82%D0%B0%D1%8F_%D0%B0%D0%B4%D1%80%D0%B5%D1%81%D0%B0%D1%86%D0%B8%D1%8F"},"с открытой адресацией"),"."," "),s.createElement("p",null,"Есть и другой способ разрешения коллизий —"," ",s.createElement("a",{className:"link",target:"_blank",href:"https://ru.wikipedia.org/wiki/%D0%A5%D0%B5%D1%88-%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D0%B0#%D0%9C%D0%B5%D1%82%D0%BE%D0%B4_%D1%86%D0%B5%D0%BF%D0%BE%D1%87%D0%B5%D0%BA"},"метод цепочек"),". В хеш-таблицах с цепочками каждая ячейка является односвязным списком. Такие ячейки позволяют хранить сразу несколько элементов."))}function ka(e){return s.createElement(s.Fragment,null,s.createElement("h1",null,"Простейшие хеш-таблицы"),s.createElement("p",null,"Хеш-таблица — структура данных, хранящая пары «ключ-значение» или только ключ. Позволяет быстро найти ключ и, если есть, связанное с ним значение."),s.createElement("p",null,"Простейшая хеш-таблица — это массив из ключей. Индекс ключа вычисляется по самому ключу. Однако у разных ключей индекс может совпасть. Такие ситуации называются коллизиями."," "),s.createElement(xa,null),s.createElement("h2",null,"Производительность и расход памяти"),s.createElement("p",null,"Чем больше свободного места в хеш-таблице, тем меньше коллизий. В пустой таблице не будет ни одной коллизии, а в почти полной — они будут почти наверняка."," "),s.createElement("p",null,"Однако чем больше свободного места, тем больше расходуется памяти. Поэтому при использовании хеш-таблиц стараются достичь баланса. Таблица должна быть не слишком пустой, но и не слишком заполненной. Проблемы с производительностью начиют быть заметны при заполненности на две трети."),s.createElement("p",null,"На нашей визуализации размер таблицы выбран так, чтобы таблица была заполнена наполовину."),s.createElement("h2",null,"Создание хеш-таблицы"),s.createElement("p",null,"Для создания хеш-таблицы мы последовательно вставляем ключи один за другим. При возникновении коллизии переходим к соседней ячейке. Вставляем ключ в первую свободную ячейку."),s.createElement("h2",null,"Поиск в хеш-таблице"),s.createElement("p",null,"Поиск ключа аналогичен вставке. Вычисляем индекс и ищем пустой слот, как при разрешении коллизий. Если по пути мы не нашли ключа, то его нет в таблице."))}function Ma(e){return s.createElement(s.Fragment,null,s.createElement("h1",null,"Хеш-таблицы с открытой адресацией"),s.createElement("p",null,"Хеш-таблица — структура данных, хранящая пары «ключ-значение» или только ключ. Позволяет быстро найти ключ и, если есть, связанное с ним значение."," "),s.createElement("p",null,"Хеш-таблица с открытой адресацией представляет себе массив из ячеек, в каждой из которых может быть записан ключ. Индекс ключа вычисляется по самому ключу с помощью хеш-функции. У разных ключей индекс может совпасть. Такие ситуации называются коллизиями."),s.createElement("p",null,"Задача хеш-функции — по объекту вычислить число по заранее заданному алгоритму. Вычисленное число называется хеш-кодом. Алгоритм хеш-фукнции должен помогать равномерно «раскидать» значения по хеш-таблице. Поэтому у двух похожих значений (например ",s.createElement("code",null,'"hello"')," и ",s.createElement("code",null,'"hello!"'),") может оказаться совсем разный хеш-код."),s.createElement("h2",null,"Примеры значений хеш-функций"),s.createElement("p",null,"В Python есть встроенная хеш-функция ",s.createElement("code",null,"hash()"),". В нашем коде мы используем именно ее."),s.createElement(bi,null),s.createElement("h2",null,"Создание хеш-таблицы"),s.createElement("p",null,"Для создания хеш-таблицы мы последовательно вставляем ключи один за другим. При возникновении коллизии переходим к соседней ячейке. Вставляем ключ в первую свободную ячейку."),s.createElement("h2",null,"Поиск"),s.createElement("p",null,"Поиск ключа аналогичен вставке. Вычисляем индекс и ищем пустой слот, как при разрешении коллизий. Если по пути мы не нашли ключа, то его нет в таблице."),s.createElement("h2",null,"Удаление"),s.createElement("p",null,"При удалении ключа мы перезаписываем его специальным значением-плейсхолдером ",s.createElement("code",null,"DUMMY"),". Если мы оставим слот пустым, то при поиске другого ключа алгоритм разрешения коллизий может остановиться раньше времени."),s.createElement("h2",null,"Расширение"),s.createElement("p",null,"Если при работе хеш-таблицы она заполняется, то ее нужно расширить. Однако вычисленные индексы элементов зависят от размера таблицы. Это значит, что если изменится размер — изменятся и индексы. Для того, чтобы вставленные ключи можно было снова найти, мы создаем новую таблицу и вставляем в нее ключи из старой."))}function Ta(){return s.createElement(s.Fragment,null,s.createElement("h1",null," Сортировка пузырьком"),s.createElement("p",null,"Сортировка пузырьком — самая простая для понимания и реализации сортировка. Алгоритм по очереди просматривает все элементы списка"," ","— сравнивает текущий элемент со следующим и при необходимости меняет их местами. Таким образом, алгоритм проходит по списку, пока все элементы не будут упорядочены."),s.createElement("p",null,"Пузырьковая сортировка является простейшей и эффективна лишь для небольших списков."))}function Ia(){return s.createElement(s.Fragment,null,s.createElement("h1",null," Быстрая сортировка"),s.createElement("p",null,"Быстрая сортировка — одна из самых быстрых сортировок. Основана на принципе «Разделяй и властвуй»."),s.createElement("p",null,"На каждой итерации алгоритма выбирается элемент-делитель. Делитель может быть любым элементом массива. В нашей реализации выбирается элемент посередине."," "),s.createElement("p",null,"Затем элементы распределяются относительно делителя так, чтобы слева были все меньшие элементы, а справа"," ","— все большие. Таким образом массив становится несколько более упорядоченным и делитель оказывается на нужном месте."),s.createElement("p",null,"После этого алгоритм повторяется рекурсивно для левой и правой половин."))}function Na(e){return(Na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ja(){return(ja=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Oa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ba(r.key),r)}}function Da(e,t,n){return t&&Sa(e.prototype,t),n&&Sa(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ca(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pa(e,t)}function Pa(e,t){return(Pa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Aa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=za(e);if(t){var i=za(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return La(this,n)}}function La(e,t){if(t&&("object"===Na(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _a(e)}function _a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function za(e){return(za=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ba(e){var t=function(e,t){if("object"!==Na(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Na(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Na(t)?t:String(t)}function Ra(){return{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight}}function Ua(){console.log("DIMENSIONS: window inner: ".concat(window.innerWidth,"x").concat(window.innerHeight)),console.log("DIMENSIONS: document.documentElement: ".concat(document.documentElement.clientWidth,"x").concat(document.documentElement.clientHeight));var e=window.visualViewport;console.log("DIMENSIONS: visualViewport: ".concat(null!=e?e.width+"x"+e.height:e));var t=Ra(),n=t.width,r=t.height;console.log("DIMENSIONS: used: ".concat(n,"x").concat(r))}var Ha=function(e){Ca(n,e);var t=Aa(n);function n(){var e,r,i,o;return Oa(this,n),e=t.call(this),r=_a(e),o=function(){Ua();var t=Ra(),n=t.width,r=t.height;e.state.windowWidth===n&&e.state.windowHeight===r||(console.log("Processing window size change",n,r),(e.state.windowWidth!=n||e.state.windowHeight>r||r-e.state.windowHeight>0)&&(console.log("App size changed from",e.state),e.setState({windowWidth:n,windowHeight:r}),m.width===n&&m.height===r||m.setWH(n,r)))},(i=Ba(i="handleWindowSizeChange"))in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o,e.state={mounted:!1,windowWidth:null,windowHeight:null},e}return Da(n,[{key:"componentDidMount",value:function(){var e=Ra(),t=e.width,n=e.height;console.log("componentDidMount() window geometry",t,n),window.addEventListener("resize",i()(this.handleWindowSizeChange,500)),f.maxCodePlaySpeed=q().MAX_CODE_PLAY_SPEED,this.setState({windowWidth:t,windowHeight:n,mounted:!0}),m.setAll(t,n,window.scrollY,!0)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleWindowSizeChange)}},{key:"render",value:function(){console.log("App.render()");var e=this.state.mounted?this.state:{},t=e.windowWidth,n=e.windowHeight;return console.log("Window sizes",t,n),this.state.mounted?s.createElement(u.a,null,s.createElement(h.d,null,s.createElement(h.b,{path:"/lesson/:id"},s.createElement(qa,{windowWidth:t,windowHeight:n})),s.createElement(h.b,{path:"/"},s.createElement(Ja,{windowWidth:t,windowHeight:n})))):s.createElement("div",null,"Loading...")}}]),n}(s.Component);sn([[yn,[{labels:[null]},"a","i",void 0]]]),sn([[pn,[{labels:[null]},"a"]]]);var Ya=sn([[pn,[{labels:[null]},"array","left","right"]]]),Wa=sn([[pn,[{labels:[null]},"a","j","jplus1"]]]),Qa=new va,Va=new xi,Fa={label:"original_list",type:"array_int",id:"simplified-hash-original-list",default:"1 56 50 2 44 25 17 4"},Ga={label:"",type:"array_int",id:"sorts-list",default:"42 13 11 92 27 87 14 67 1 12 44 9 20 7"},Ka={label:"from_keys",type:"array",id:"hash-from-keys",default:"'uname' 'mv' 1 'time' -6 'ps' 'mkdir' 'less'"},Za={bubble_sort:{mainPagePaneHeaderTitle:"Сортировка пузырьком",mainPagePaneClassName:"bubble-sort",playerHeaderTitle:"Сортировка пузырьком",mobilePlayerHeaderTitle:"Сортировка пузырьком",getBreakpoints:function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new Li;n.run(e,t);var r=n.getBreakpoints();return{bp:r}}(e.map((function(e){return e.toNumber()})),!0).bp},inputs:[Ga],formatBpDesc:function(e){switch(e.point){case"for-i":return"Делаем <code>".concat(e.i+1,"</code>-ю итерацию сортировки");case"swapped-false":return"На этой итерации элементы еще не меняли местами";case"for-j":return"Посмотрим на <code>".concat(e.j,"</code>-й элемент, <code>").concat(e.a.get(e.j),"</code>");case"compare":var t=e.a.get(e.j),n=e.a.get(e.j+1);return"<code>".concat(t," ").concat(zi(t,n)," ").concat(n,"</code>, сравниваем его с соседним");case"swap":return"Поменяем соседей местами";case"swapped-true":return"Запомним, что поменяли местами";case"check-swapped":return e.swapped?"На этой итерации мы делали обмены, поэтому продолжаем":"На этой итерации мы не сделали обменов, поэтому массив отсортирован";case"break-swapped":return"Выходим";case"end":return"Массив отсортирован"}},stateVisualization:Wa,code:Ai,resetToZero:!0,theory:s.createElement(Ta,null)},quick_sort:{mainPagePaneHeaderTitle:"Быстрая",mainPagePaneClassName:"quick-sort",playerHeaderTitle:"быструю сортировку",mobilePlayerHeaderTitle:"Быстрая сортировка",getBreakpoints:function(e){return function(e){var t=new Bi;t.run(e);var n=t.getBreakpoints();return console.log("quicksort bp",n),{bp:n}}(e.map((function(e){return e.toNumber()}))).bp},inputs:[Ga],formatBpDesc:function(e){switch(e.point){case"compare-size":var t=e.stop-e.start+1,n=t<=0?"пустой подмассив уже отсортирован":1===t?"".concat(e.recursionLevel>0?"под":"","массив из одного элемента уже отсортирован"):"сортируем ".concat(e.recursionLevel>0?"под":"","массив длины <code>").concat(t,"</code>");return"<code>".concat(e.start," ").concat(zi(e.start,e.stop)," ").concat(e.stop,"</code>: ").concat(n);case"return":return"Ничего делать не нужно — выходим";case"select-pivot":return"Выбираем элемент-разделитель: <code>".concat(e.pivot,"</code>");case"left-start":return"Левый указатель: <code>".concat(e.left,"</code>");case"right-stop":return"Правый указатель: <code>".concat(e.right,"</code>");case"while-left-right":var r=e.right-e.left+1,i=r<=0?"все элементы слева от разделителя меньше него, а все справа — больше":"остается обработать ".concat(r," ").concat(J(r,"элемент","элемента","элементов"));return"<code>".concat(e.left," ").concat(e.left<=e.right?"<=":">"," ").concat(e.right,"</code>: ").concat(i);case"while-left":var o=e.array.get(e.left),a=o<e.pivot?"элемент слева от разделителя уже меньше":"слева должны быть элементы меньше разделителя, а мы натолкнулись на ".concat(o===e.pivot?"равный":"больший"," элемент");return"<code>".concat(o," ").concat(zi(o,e.pivot)," ").concat(e.pivot,"</code>: ").concat(a);case"while-right":var s=e.array.get(e.right);console.log("While right",s,e.array,e.array.get(e.right));var l=s>e.pivot?"элемент справа от разделителя уже больше":"справа должны быть элементы больше разделителя, а мы натолкнулись на ".concat(s===e.pivot?"равный":"меньший"," элемент");return"<code>".concat(s," ").concat(zi(s,e.pivot)," ").concat(e.pivot,"</code>: ").concat(l);case"inc-left-first":case"inc-left-second":return"Сдвигаем левый указатель вправо на <code>".concat(e.left,"</code> элемент");case"dec-right-first":case"dec-right-second":return"Сдвигаем правый указатель влево на <code>".concat(e.right,"</code> элемент");case"compare-left-right":var c=e.right-e.left+1;return"<code>".concat(e.left," ").concat(zi(e.left,e.right)," ").concat(e.right,"</code>: еще ").concat(c," ").concat(J(c,"элемент","элемента","элементов")," для обработки");case"swap":return e.left===e.right?"Ничего не происходит: меняем элемент сам с собой":"Меняем местами элементы, на которые наткнулись: <code>".concat(e.array.get(e.right),"</code> и <code>").concat(e.array.get(e.left),"</code>");case"sort-left":return"Рекурсивно сортируем левый подмассив <code>".concat(e.start,"..").concat(e.right,"</code>");case"sort-right":return"Рекурсивно сортируем правый подмассив <code>".concat(e.left,"..").concat(e.stop,"</code>");case"exit":return e.recursionLevel>0?"Подмассив <code>".concat(e.start,"..").concat(e.stop,"</code> отсортирован. Выходим из рекурсии (текущая глубина: ").concat(e.recursionLevel,")"):"Весь массив отсортирован, выходим"}},stateVisualization:Ya,code:[["def quicksort(a, start, stop):","",0],["    if start >= stop:","compare-size",1],["        return","return",2],["","",-1],["    pivot = a[(start + stop) // 2]","select-pivot",1],["    left = start","left-start",1],["    right = stop","right-stop",1],["","",-1],["    while left <= right:","while-left-right",2],["        while a[left] < pivot:","while-left",3],["            left += 1","inc-left-first",3],["        while a[right] > pivot:","while-right",3],["            right -= 1","dec-right-first",3],["        if left <= right:","compare-left-right",2],["            a[left], a[right] = a[right], a[left]","swap",3],["            left += 1","inc-left-second",3],["            right -= 1","dec-right-second",3],["    quicksort(a, start, right)","sort-left",1],["    quicksort(a, left, stop)","sort-right",1],["    ","exit",1]],resetToZero:!0,theory:s.createElement(Ia,null)},simplified_hash_collisions:{mainPagePaneHeaderTitle:"Коллизии",mainPagePaneClassName:"simplified-hash-collisions",playerHeaderTitle:"коллизии в хеш-таблицах",code:oa,getBreakpoints:function(e){return Qa.runSimplifiedInsertAllBroken(e).bp},inputs:[Fa],formatBpDesc:la,stateVisualization:ua,theory:s.createElement(wa,null)},simplified_hash_create:{mainPagePaneHeaderTitle:"Создание",mainPagePaneClassName:"simplified-hash-create",playerHeaderTitle:"создание простейшей хеш-таблицы",code:aa,getBreakpoints:function(e){return Qa.runSimplifiedInsertAll(e).bp},inputs:[Fa],formatBpDesc:la,stateVisualization:ca,theory:s.createElement(ka,{active:"simplified_hash_create"})},simplified_hash_search:{mainPagePaneHeaderTitle:"Поиск",mainPagePaneClassName:"simplified-hash-search",playerHeaderTitle:"поиск в простейшей хеш-таблице",code:ha,getBreakpoints:function(e,t){var n=Qa.runSimplifiedInsertAll(e).keys;return Qa.runSimplifiedSearch(n,t).bp},inputs:[Fa,{label:"number",type:"int",id:"simplified-hash-search-number",default:"25"}],formatBpDesc:fa,stateVisualization:ma,theory:s.createElement(ka,{active:"simplified_hash_search"})},hash_create:{mainPagePaneHeaderTitle:"Создание",mainPagePaneClassName:"hash-create",playerHeaderTitle:"создание хеш-таблицы",code:ni,getBreakpoints:function(e){return Va.runCreateNew(e).bp},inputs:[Ka],formatBpDesc:ai,stateVisualization:oi,theory:s.createElement(Ma,null)},hash_search:{mainPagePaneHeaderTitle:"Поиск",mainPagePaneClassName:"hash-search",playerHeaderTitle:"поиск в хеш-таблице",code:si,getBreakpoints:function(e,t){var n=Va.runCreateNew(e),r=n.hashCodes,i=n.keys;return Va.runSearch(r,i,t).bp},inputs:[Ka,{label:"key",type:"int_str_none",id:"hash-search-key",default:"'less'"}],formatBpDesc:li,stateVisualization:ci,theory:s.createElement(Ma,null)},hash_remove:{mainPagePaneHeaderTitle:"Удаление",mainPagePaneClassName:"hash-remove",playerHeaderTitle:"удаление из хеш-таблицы",code:hi,getBreakpoints:function(e,t){var n=Va.runCreateNew(e),r=n.hashCodes,i=n.keys;return Va.runRemove(r,i,t).bp},inputs:[Ka,{label:"key",type:"int_str_none",id:"hash-remove-key",default:"'ps'"}],formatBpDesc:li,stateVisualization:ci,theory:s.createElement(Ma,null)},hash_resize:{mainPagePaneHeaderTitle:"Расширение",mainPagePaneClassName:"hash-resize",playerHeaderTitle:"расширение хеш-таблицы",code:pi,getBreakpoints:function(e){var t=Va.runCreateNew(e),n=t.hashCodes,r=t.keys;return Va.runResize(n,r).bp},inputs:[Ka],formatBpDesc:mi,stateVisualization:yi,theory:s.createElement(Ma,null)}},Xa=function(e){Ca(n,e);var t=Aa(n);function n(){var e;return Oa(this,n),(e=t.call(this)).state={navigatingPlayer:!1},e}return Da(n,[{key:"render",value:function(){var e=this.props.id,t=Za[e];return console.log("Lesson pane",e,Za[e]),this.state.navigatingPlayer?s.createElement(h.a,{to:"lesson/".concat(e)}):s.createElement("a",{href:"/lesson/".concat(e),className:a()("pane",t.mainPagePaneClassName),onClick:this.navigatePlayer},s.createElement("h2",null,t.mainPagePaneHeaderTitle))}}]),n}(s.Component),qa=Object(h.g)(function(e){Ca(n,e);var t=Aa(n);function n(){return Oa(this,n),t.apply(this,arguments)}return Da(n,[{key:"render",value:function(){console.log("withRouter",this.props);var e=this.props.match.params.id,t=this.props,n=t.windowWidth,r=t.windowHeight;return console.log("Lesson",e,Za[e]),s.createElement(ao,ja({},Za[e],{windowWidth:n,windowHeight:r,lessonId:e}))}}]),n}(s.Component)),Ja=function(e){Ca(n,e);var t=Aa(n);function n(){return Oa(this,n),t.apply(this,arguments)}return Da(n,[{key:"render",value:function(){return s.createElement("div",{className:"fluid-body"},s.createElement("div",{className:"frontpage"},s.createElement("div",{className:"header"},s.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTE3MCIgaGVpZ2h0PSIyNDgiIHZpZXdCb3g9IjAgMCAxMTcwIDI0OCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEzNy45OTQgMjI4LjA3NUgxNjguMDI2VjE1NC4zMjJIMTg3LjMwM0MyMDEuNzM3IDE1NC4zMjIgMjEzLjI4NCAxNDkuMjQ3IDIyMS45NDUgMTM5LjA5NkMyMzAuNjA1IDEyOC45NDYgMjM0LjkzNiAxMTIuMzIzIDIzNC45MzYgODkuMjI4NUMyMzQuOTM2IDYyLjk2NzcgMjMwLjgzOCA0NS42NDY3IDIyMi42NDMgMzcuMjY1NkMyMTQuNTQyIDI4Ljg4NDUgMjAzLjQ2IDI0LjY5NCAxODkuMzk4IDI0LjY5NEgxMzcuOTk0VjIyOC4wNzVaTTE2OC4wMjYgMTE5LjY4VjYxLjAxMjFIMTg0LjM3QzE5MS45MTMgNjAuOTE5IDE5Ny4yMjEgNjEuODUwMiAyMDAuMjk0IDYzLjgwNThDMjAzLjQ2IDY1LjY2ODMgMjA1LjA0MyA3NC43NDc4IDIwNS4wNDMgOTEuMDQ0NEMyMDUuMDQzIDEwMy42MTYgMjAzLjUwNiAxMTEuNTMyIDIwMC40MzMgMTE0Ljc5MUMxOTcuMzYgMTE4LjA1IDE5MS45NTkgMTE5LjY4IDE4NC4yMyAxMTkuNjhIMTY4LjAyNlpNMjA5Ljc5MiAyMjguMDc1SDI0Mi42MThMMjE3LjA1NiAxMzguNTM3TDE4NC45MjggMTM1LjMyNUwyMDkuNzkyIDIyOC4wNzVaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMjQzLjk1NCAyMjguMDc1SDI4Mi43ODZMMzE4LjY4NSAyNC42OTRIMjc5Ljg1M0wyNDMuOTU0IDIyOC4wNzVaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMzIzLjY1MiA2My4zODY3SDQxMi4zNTJWMjI4LjA3NUg0NDguMjUyVjYzLjM4NjdINTM2Ljk1MlYyNC42OTRIMzIzLjY1MlY2My4zODY3WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTUzMS4wMjMgMjI4LjA3NUg2MDguMTNMNjEwLjIyNSAxNDguNzM0QzYxMC4yMjUgMTQ3LjcxIDYxMC4yNzEgMTQxLjk4MyA2MTAuMzY1IDEzMS41NTNDNjEwLjQ1OCAxMjEuMDMgNjEwLjUwNCAxMTUuNDg5IDYxMC41MDQgMTE0LjkzMUg2MTEuNDgyQzYxMS42NjggMTE1LjQ4OSA2MTIuMDg3IDEyMS4wMyA2MTIuNzM5IDEzMS41NTNDNjEzLjQ4NCAxNDIuMDc2IDYxMy45MDMgMTQ3LjgwMyA2MTMuOTk2IDE0OC43MzRMNjI2LjE0OSAyMjguMDc1SDY5Ni41NUw3MDkuNDAxIDE0OS44NTJDNzA5LjQ5NCAxNDkuMTA3IDcwOS45MTMgMTQzLjM4IDcxMC42NTggMTMyLjY3MUM3MTEuNDAzIDEyMS45NjEgNzExLjg2OSAxMTUuODE1IDcxMi4wNTUgMTE0LjIzMkg3MTMuMTczQzcxMy4xNzMgMTE1LjgxNSA3MTMuMDggMTIxLjk2MSA3MTIuODkzIDEzMi42NzFDNzEyLjggMTQzLjM4IDcxMi43NTQgMTQ5LjE1MyA3MTIuNzU0IDE0OS45OTJMNzE0LjcwOSAyMjguMDc1SDc4Mi41OTZMNzY5LjMyNiAyNC42OTRINjc3LjEzNEw2NTcuOTk3IDk4LjE2ODNDNjU3LjcxOCA5OS4wOTk2IDY1Ny4zNDUgMTAwLjY4MyA2NTYuODggMTAyLjkxOEM2NTYuNDE0IDEwNS4wNTkgNjU2LjEzNSAxMDYuMzE3IDY1Ni4wNDIgMTA2LjY4OUg2NTUuNjIyQzY1NS40MzYgMTA2LjMxNyA2NTUuMDY0IDEwNS4wMTMgNjU0LjUwNSAxMDIuNzc4QzY1NC4wMzkgMTAwLjQ1IDY1My42NjcgOTguOTEzMyA2NTMuMzg4IDk4LjE2ODNMNjM0Ljk0OSAyNC42OTRINTQ0LjI5M0w1MzEuMDIzIDIyOC4wNzVaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNNzg1LjYwOCAxMjMuMTcyQzc4NS42MDggMTU4LjU1OSA3OTkuMTExIDE4NS42MTEgODI2LjExNyAyMDQuMzI5Qzg1My4yMTUgMjIyLjk1NCA4ODYuOTI2IDIzMi4yNjYgOTI3LjI0OSAyMzIuMjY2Qzk2Ny41NzEgMjMyLjI2NiAxMDAxLjMzIDIyMi45NTQgMTAyOC41MiAyMDQuMzI5QzEwNTUuODEgMTg1LjYxMSAxMDY5LjQ1IDE1OC41NTkgMTA2OS40NSAxMjMuMTcyVjEyNi45NDNDMTA2OS40NSA5Mi44NjAzIDEwNTUuODEgNjYuNTk5NSAxMDI4LjUyIDQ4LjE2MTFDMTAwMS4zMyAyOS43MjI2IDk2Ny41NzEgMjAuNTAzNCA5MjcuMjQ5IDIwLjUwMzRDODg2LjkyNiAyMC41MDM0IDg1My4yMTUgMjkuNzIyNiA4MjYuMTE3IDQ4LjE2MTFDNzk5LjExMSA2Ni41OTk1IDc4NS42MDggOTIuODYwMyA3ODUuNjA4IDEyNi45NDNWMTIzLjE3MlpNODIyLjQ4NSAxMjQuMTVWMTI2LjgwNEM4MjIuNDg1IDEwNC41NDcgODMyLjI2MyA4Ny40MTI2IDg1MS44MTkgNzUuMzk5N0M4NzEuNDY4IDYzLjM4NjcgODk2LjcwNCA1Ny40MjY4IDkyNy41MjggNTcuNTJDOTU4LjI1OSA1Ny43MDYyIDk4My40NDkgNjMuNzU5MiAxMDAzLjEgNzUuNjc5QzEwMjIuNzUgODcuNTA1NyAxMDMyLjU3IDEwNC41OTQgMTAzMi41NyAxMjYuOTQzVjEyNC40MjlDMTAzMi41NyAxNDcuNDMxIDEwMjIuNyAxNjUuMTcxIDEwMDIuOTYgMTc3LjY0OUM5ODMuMjE2IDE5MC4xMjggOTU4LjA3MiAxOTYuMjc0IDkyNy41MjggMTk2LjA4OEM4OTYuODkgMTk1Ljk5NCA4NzEuNyAxODkuODAyIDg1MS45NTggMTc3LjUwOUM4MzIuMzA5IDE2NS4xMjQgODIyLjQ4NSAxNDcuMzM3IDgyMi40ODUgMTI0LjE1WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTEwNjEuMTYgMjQ3LjY1N0MxMDk3LjAxIDI0OC42ODIgMTEyMS43MyAyNDMuODg2IDExMzUuMzMgMjMzLjI3QzExNDkuMDIgMjIyLjc0NyAxMTUyLjMyIDIwNi40OTcgMTE0NS4yNSAxODQuNTJMMTEzOC4yNiAxNjQuNDA1QzExMzUuMzcgMTU0LjkwNiAxMTM2Ljk2IDE0OC42MiAxMTQzLjAxIDE0NS41NDdDMTE0OS4wNiAxNDIuNDc0IDExNTcuNzcgMTQwLjkzOCAxMTY5LjEzIDE0MC45MzhWMTA2Ljg1NUMxMTU3Ljc3IDEwNi44NTUgMTE0OS4wMiAxMDUuMzE4IDExNDIuODcgMTAyLjI0NUMxMTM2LjcyIDk5LjE3MiAxMTM1LjE0IDkyLjkzMjcgMTEzOC4xMiA4My41MjcyTDExNDUuMzkgNjMuNDEyNkMxMTUyLjU2IDQxLjQzNTQgMTE0OS4yNSAyNS4xMzg4IDExMzUuNDcgMTQuNTIyOEMxMTIxLjc4IDMuOTA2NzEgMTA5Ny4wMSAtMC44ODkxNDIgMTA2MS4xNiAwLjEzNTIxNVYzMi42ODE4QzEwODQuOTkgMzIuNjgxOCAxMTAwLjMxIDM1LjY2MTggMTEwNy4xMSA0MS42MjE3QzExMTMuOTEgNDcuNDg4NSAxMTE1LjE3IDU3LjAzMzYgMTExMC44OCA3MC4yNTcxTDExMDMuNzYgOTAuMzcxOEMxMTAxLjUyIDk4LjE5NDIgMTEwMi4xMyAxMDUuMjI1IDExMDUuNTggMTExLjQ2NEMxMTA5LjExIDExNy43MDQgMTExNS40IDEyMS44NDcgMTEyNC40MyAxMjMuODk2QzExMTUuNCAxMjUuOTQ1IDExMDkuMDcgMTMwLjEzNSAxMTA1LjQ0IDEzNi40NjhDMTEwMS45IDE0Mi43MDcgMTEwMS4zOCAxNDkuNjkxIDExMDMuOSAxNTcuNDIxTDExMTAuODggMTc3LjUzNUMxMTE1LjE3IDE5MC44NTIgMTExMy45MSAyMDAuNDQ0IDExMDcuMTEgMjA2LjMxQzExMDAuMzEgMjEyLjI3IDEwODQuOTkgMjE1LjI1IDEwNjEuMTYgMjE1LjI1VjI0Ny42NTdaIiBmaWxsPSIjRkY3MDAxIi8+CjxwYXRoIGQ9Ik0xMDguMTE2IDI0Ny42NThWMjE1LjExMUM4NC4xODM2IDIxNS4xMTEgNjguODE4MiAyMTIuMTMxIDYyLjAyMDIgMjA2LjE3MUM1NS4zMTUzIDIwMC4zMDQgNTQuMDU4MSAxOTAuNzU5IDU4LjI0ODcgMTc3LjUzNkw2NS4zNzI2IDE1Ny40MjFDNjcuODg3IDE0OS42OTIgNjcuMzI4MiAxNDIuNzA4IDYzLjY5NjQgMTM2LjQ2OEM2MC4wNjQ2IDEzMC4xMzYgNTMuNzMyMiAxMjUuOTQ1IDQ0LjY5OTIgMTIzLjg5N0M1My43MzIyIDEyMS44NDggNjAuMTExMiAxMTcuNjU3IDYzLjgzNjEgMTExLjMyNUM2Ny41NjEgMTA0Ljk5MyA2OC4wNzMyIDk4LjAwODMgNjUuMzcyNiA5MC4zNzIyTDU4LjM4ODQgNzAuMjU3NUM1NC4xMDQ3IDU3LjAzNCA1NS4zMTUzIDQ3LjQ4ODggNjIuMDIwMiA0MS42MjIxQzY4LjgxODIgMzUuNjYyMiA4NC4xODM2IDMyLjY4MjIgMTA4LjExNiAzMi42ODIyVjAuMTM1NTk5QzcyLjI2MzggLTAuNzk1NjM2IDQ3LjQ5MjkgNC4wNDY3OCAzMy44MDM4IDE0LjY2MjhDMjAuMjA3OCAyNS4xODU4IDE2Ljk0ODUgNDEuMzg5MyAyNC4wMjU4IDYzLjI3MzNMMzEuMDEwMSA4My41Mjc2QzMzLjg5NjkgOTIuOTMzMSAzMi4yNjczIDk5LjE3MjMgMjYuMTIxMSAxMDIuMjQ1QzIwLjA2ODEgMTA1LjMxOCAxMS4zNjExIDEwNi44NTUgMCAxMDYuODU1VjE0MC45MzhDMTEuMzYxMSAxNDAuOTM4IDIwLjExNDcgMTQyLjUyMSAyNi4yNjA4IDE0NS42ODdDMzIuNDA2OSAxNDguNzYxIDMzLjk5IDE1NC45NTMgMzEuMDEwMSAxNjQuMjY2TDIzLjg4NjIgMTg0LjUyQzE2LjYyMjUgMjA2LjQ5NyAxOS44ODE4IDIyMi43NDcgMzMuNjY0MSAyMzMuMjdDNDcuNDQ2NCAyNDMuODg2IDcyLjI2MzggMjQ4LjY4MiAxMDguMTE2IDI0Ny42NThaIiBmaWxsPSIjRkZGRjY0Ii8+Cjwvc3ZnPgo=",alt:"logo"})),s.createElement("div",{className:"section"},s.createElement("h1",null,"Сортировки"),s.createElement("div",{className:"lesson-pane-stack"},s.createElement(Xa,{id:"bubble_sort"}),s.createElement("div",{className:"placeholder"})),s.createElement("div",{className:"lesson-pane-stack"},s.createElement("div",{className:"placeholder"}),s.createElement(Xa,{id:"quick_sort"}))),s.createElement("div",{className:"section"},s.createElement("h1",null,"Простейшие хеш-таблицы"),s.createElement("div",{className:"lesson-pane-stack"},s.createElement(Xa,{id:"simplified_hash_collisions"}),s.createElement("div",{className:"placeholder"})),s.createElement("div",{className:"lesson-pane-stack"},s.createElement("div",{className:"placeholder"}),s.createElement(Xa,{id:"simplified_hash_create"})),s.createElement("div",{className:"lesson-pane-stack"},s.createElement(Xa,{id:"simplified_hash_search"}),s.createElement("div",{className:"placeholder"}))),s.createElement("div",{className:"section"},s.createElement("h1",null,"Хеш-таблицы с открытой адресацией"),s.createElement("div",{className:"lesson-pane-stack"},s.createElement(Xa,{id:"hash_create"}),s.createElement("div",{className:"placeholder"})),s.createElement("div",{className:"lesson-pane-stack"},s.createElement("div",{className:"placeholder"}),s.createElement(Xa,{id:"hash_search"})),s.createElement("div",{className:"lesson-pane-stack"},s.createElement(Xa,{id:"hash_remove"}),s.createElement("div",{className:"placeholder"})),s.createElement("div",{className:"lesson-pane-stack"},s.createElement("div",{className:"placeholder"}),s.createElement(Xa,{id:"hash_resize"})))))}}]),n}(s.Component);"undefined"!=typeof window&&"undefined"!=typeof window&&(function(){var e=v.a.getParser(window.navigator.userAgent).parse().parsedResult;console.log("Detected browser",e);var t=e.engine.name,n=e.os.name,r=e.platform.type;console.log("Detected engine",t,"on",n);var i=N({},X);switch(t){case"Blink":i.THROTTLE_SELECTION_TRANSITIONS=!1,i.THROTTLE_SELECTION_TIMEOUT=0;break;case"Gecko":switch(i.THROTTLE_SELECTION_TRANSITIONS=!0,n){case"Linux":i.THROTTLE_SELECTION_TIMEOUT=125;break;case"macOS":i.THROTTLE_SELECTION_TIMEOUT="transitionend";break;default:i.THROTTLE_SELECTION_TIMEOUT=275}break;case"EdgeHTML":i.THROTTLE_SELECTION_TRANSITIONS=!0,i.THROTTLE_SELECTION_TIMEOUT=250;break;case"WebKit":switch(i.THROTTLE_SELECTION_TRANSITIONS=!0,n){case"Linux":i.THROTTLE_SELECTION_TIMEOUT=150;break;case"macOS":i.THROTTLE_SELECTION_TIMEOUT="transitionend";break;default:i.THROTTLE_SELECTION_TIMEOUT=275}}switch(t){case"Blink":case"WebKit":i.TIME_SLIDER_THROTTLE_TIME=null,i.CODE_SCROLL_DEBOUNCE_TIME=150,i.MAX_CODE_PLAY_SPEED=16;break;case"Gecko":i.TIME_SLIDER_THROTTLE_TIME=null,i.CODE_SCROLL_DEBOUNCE_TIME=200}"mobile"===r&&(i.MAX_CODE_PLAY_SPEED=Math.min(i.MAX_CODE_PLAY_SPEED,8)),Z=i,window.insidePythonDictBrowser=e,console.log("UX settings",q())}(),window.addEventListener("load",(function(){Ua();var e=document.getElementById("root");c.a.render(s.createElement(Ha,null),e)})))}},[[497,1,2]]]);
//# sourceMappingURL=main.c98ea796e4162fd75f28.js.map